{"pageProps":{"member":{"id":"syucream","nickname":"syucream","realName":"Ryo Okubo","bio":"A software Engineer","avatarSrc":"/avatars/syucream.jpg","sources":["https://syucream.hatenablog.jp/feed"],"githubUsername":"syucream","twitterUsername":"syu_cream","websiteUrl":"https://syucream.hatenablog.jp/"},"postItems":[{"title":"ãƒ¦ãƒ“ãƒ¼ã«è»¢è·ã—ã¦åŠå¹´ã€æ…£ã‚Œãªã„æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã§ã‚‚ä½•ã¨ã‹ã‚„ã£ã¦ã„ã‘ã¦ã„ã‚‹","contentSnippet":"ã¿ãªã•ã‚“ã„ã‹ãŒãŠéã”ã—ã§ã—ã‚‡ã†ã‹ã€‚ @syu_cream ã§ã™ã€‚ã‚ãŸã—ã¯åŠå¹´ã»ã©å‰ã«ãƒ¦ãƒ“ãƒ¼æ ªå¼ä¼šç¤¾ã¸ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢(ä»¥ä¸‹ SWE)ã¨ã—ã¦è»¢è·ã—ã¦ã„ã¾ã™ã€‚è»¢è·å‰å¾Œã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¯ä»¥ä¸‹ã®ã‚¨ãƒ³ãƒˆãƒªã«ã¦ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚syucream.hatenablog.jpæœ¬è¨˜äº‹ã§ã¯å…¥ç¤¾ã‹ã‚‰åŠå¹´å¾Œã«ã‹ã‘ã¦ã®å±•é–‹ã«ã¤ã„ã¦ç¶´ã‚ã†ã¨æ€ã„ã¾ã™ã€‚ãƒ¦ãƒ“ãƒ¼ã® SWE ã«ã¤ã„ã¦ã¾ãšè‡ªåˆ†ãŒåœ¨ç±ã™ã‚‹ã€ãƒ¦ãƒ“ãƒ¼ã® SWE ã¨ã„ã†ãƒã‚¸ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦è§¦ã‚Œã¦ãŠãã¾ã™ã€‚æ˜¨ä»Šã®ãƒ†ãƒƒã‚¯ä¼æ¥­ã§ã¯é¸è€ƒã®é–“ã«æŠ€è¡“é¢æ¥ã‚’çµŒã¦ãƒã‚¸ã‚·ãƒ§ãƒ³ã«ãƒãƒƒãƒã™ã‚‹æŠ€è¡“åŠ›ã‚’æŒã£ã¦ã„ã‚‹ã‹ã‚’è©•ä¾¡ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã€…ã‚ã‚‹ã¨æ€ã‚ã‚Œã¾ã™ãŒã€ãƒ¦ãƒ“ãƒ¼ã§ã¯ã“ã®ã‚ˆã†ãªæŠ€è¡“é¢æ¥ã¯è¡Œã£ã¦ã„ã¾ã›ã‚“ã€‚ãã®ä»£ã‚ã‚Šã«ã€ç‰¹å®šã®æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã¸ã®ç†è§£ãŒæ·±ã„ã‹ã©ã†ã‹ãªã©ã¯å•ã‚ãšã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºã«æ¬ ã‹ã›ãªã„ç´ é¤ŠãŒã‚ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚é¢æ¥ã‚’è¨­ã‘ã¦ã„ã¾ã™ã€‚ã“ã®é¢æ¥ã®ä½“ç³»ã«ã¤ã„ã¦ã¯ã‚ˆã‚Šè©³ã—ãã¾ã¨ã‚ãŸè¨˜äº‹ãŒã‚ã‚Šã¾ã™ã€‚note.comãƒ¦ãƒ“ãƒ¼ã® SWE ã¨ã—ã¦å…¥ç¤¾ã—ãŸå¾Œã®è©±å…¥ç¤¾æ™‚ç‚¹ã§ã®ã‚¹ã‚­ãƒ«æŠ€è¡“åŠ›ã‚’è©•ä¾¡ã•ã‚Œãšã«å…¥ç¤¾ã—ãŸå¾Œã€å®Ÿéš›ã«æ¥­å‹™ã‚’å›ã›ã‚‹ã®ã‹ã€‚ã©ã®ã‚ˆã†ãªæ´»èºãŒã§ãã‚‹ã®ã‹ã€‚ã‚‚ã—ã‹ã—ãŸã‚‰ç–‘å•ã«æ€ã‚ã‚Œã‚‹æ–¹ã‚‚ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã•ã¦ã€ã‚ãŸã—ã‚‚ãƒ¦ãƒ“ãƒ¼ã®é¸è€ƒã‚’å—ã‘ãŸæ™‚ã«ã“ã¡ã‚‰ã®é¢æ¥ã‚’å—ã‘ã¦ã„ã¾ã™ã€‚ãã—ã¦å®Ÿéš›ã€ãƒ¦ãƒ“ãƒ¼ã§ã¯å¤šç”¨ã•ã‚Œã‚‹ Kotlin ã‚„ GraphQL ã€ React ãªã©ã®çŸ¥è­˜ãŒã‚ã‚‹ã‹ã¯å•ã‚ã‚Œã‚‹ã“ã¨ãªãé¸è€ƒã‚’çµ‚ãˆã¦ãŠã‚Šã¾ã™ã€‚ä»¥ä¸‹ãŒãƒ¦ãƒ“ãƒ¼ã§æ¡ç”¨ã—ã¦ã„ã‚‹ä¸»è¦ãªæŠ€è¡“ãªã®ã§ã™ãŒã€ React ã‚„ Kotlin ã¯å°‘ã—è§¦ã‚ŒãŸç¨‹åº¦ã€ TypeScript ã‚„ GraphQL ã¯è§¦ã‚ŒãŸã“ã¨ã™ã‚‰ãªã„ç¨‹åº¦ã§ã€å®Ÿå‹™ãƒ¬ãƒ™ãƒ«ã®çµŒé¨“ã‚’ã—ã¦ã„ã‚‹ã¨ã¯ãŠä¸–è¾ã«ã¯è¨€ãˆãªã„çŠ¶æ…‹ã§ã—ãŸã€‚ï¼ˆ GCP ã«ã¤ã„ã¦ã¯å¹¸ã„ãªãŒã‚‰ 3 å¹´ä»¥ä¸Šã®çµŒé¨“ãŒã‚ã‚Šã¾ã—ãŸï¼‰å…¥ç¤¾å¾ŒåŠå¹´é–“ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºæ¥­å‹™ãã®ã‚ˆã†ãªã€æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã®ãƒãƒƒãƒå…·åˆã§ã„ã†ã¨èŠ³ã—ããªã„çŠ¶æ…‹ã‹ã‚‰ã“ã“åŠå¹´é–“ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªé–‹ç™ºæ¥­å‹™ã«æºã‚ã£ã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ“ãƒ¼AIå—è¨ºç›¸è«‡ ã¨é–¢é€£ã‚µãƒ¼ãƒ“ã‚¹ ãƒ¦ãƒ“ãƒ¼ãƒªãƒ³ã‚¯åŒ»ç™‚ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ ( å‚è€ƒ )Cloud Spanner ã®åˆ©ç”¨æ¤œè¨å…¨ä½“çš„ã«ã€å¿…è¦ãªæŠ€è¡“ã¯å¿…è¦ã«ãªã£ãŸãã®éƒ½åº¦ç´°ã‹ãå­¦ç¿’ã—ã¤ã¤ã€ã‚ã¾ã‚Šå­¦ç¿’ã«æ™‚é–“ã‚’ã•ãã™ããšé–‹ç™ºã‚’é€²ã‚ã¦ã„ã¾ã™ã€‚ Reactã€ TypeScript ã®çŸ¥è­˜ãŒã‚ã¾ã‚Šãªã„ã¾ã¾ 1. ã®ãƒ¦ãƒ“ãƒ¼AIå—è¨ºç›¸è«‡ã®é–‹ç™ºã«ç€æ‰‹ã—ãŸéš›ã¯æ­£ç›´ã‹ãªã‚Šã®è‹¦æˆ¦ã‚’å¼·ã„ã‚‰ã‚Œã¾ã—ãŸãŒã€ç‰©æ€–ã˜ã›ãšçªã£è¾¼ã‚“ã§ã¿ã¦å¿…è¦ã«è¿«ã‚‰ã‚ŒãŸçŸ¥è­˜ã‚’ç¿’å¾—ã™ã‚‹ã®ã¯è‡ªåˆ†ã®æ€§åˆ†ã¨ã¯åˆã£ã¦ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã¦ã„ã¾ã™ã€‚ã¾ãŸ GCP ã®åˆ©ç”¨çµŒé¨“ãŒã‚ã‚‹ã“ã¨ã‹ã‚‰é©åº¦ã«ã‚¤ãƒ³ãƒ•ãƒ©å‘¨ã‚Šã®ã‚¿ã‚¹ã‚¯ã‚‚ä¸¦è¡Œã—ã¦å–ã‚Šã€ã‚„ã‚ã†ã¨ã—ã¦ã„ã‚‹ã“ã¨ãŒä½•ã‚‚åˆ†ã‹ã‚‰ãªã„ï¼ã¨ã„ã†çŠ¶æ…‹ã‚’å›é¿ã—ã¦ã„ã¾ã™ã€‚ãã†ã—ã¦éƒ½åº¦ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ã‚‹ã¨æ—¢çŸ¥ã®é ˜åŸŸã‚‚åºƒãŒã£ã¦ã‚†ãã€å…¥ç¤¾å¾ŒåŠå¹´çµŒéã—ãŸç¾æ™‚ç‚¹ã§ã¯ã€åˆ†ã‹ã‚‰ãªã„ã“ã¨ã‚‚å¤šã€…ã‚ã‚Šã¤ã¤ã‚‚é–‹ç™ºã‚’å›ã›ã‚‹ã‚ˆã†ã«ã¯ãªã£ã¦ãã¦ã„ã¾ã™ã€‚ãã‚“ãªè¨³ã§ã‚¹ã‚­ãƒ«ã®ãƒŸã‚¹ãƒãƒƒãƒã¯ä½•ã¨ã‹ã‚«ãƒãƒ¼ã™ã‚‹ã“ã¨ã¯ã§ãã¦ã„ã‚‹ã®ã§ã™ãŒã€ä»–æ–¹ã§ã‚¿ã‚¹ã‚¯ã®è¦‹ç©ã‚‚ã‚Šç²¾åº¦ãŒç”˜ããªã£ãŸã‚Šæ¶ˆåŒ–ãŒé…ã‚Œã‚‹ãªã©ã€ã‚¹ã‚­ãƒ«ä¸è¶³ã‚†ãˆã«ãƒãƒªãƒ¥ãƒ¼ã‚’ç™ºæ®ã—ãã‚Œãšã‚‚ã©ã‹ã—ã•ã‚’æ„Ÿã˜ã‚‹ã‚·ãƒ¼ãƒ³ã‚‚ã‚ã‚Šã¾ã™ã€‚ãŸã ã“ã®ç‚¹ã¯ç¾åœ¨ã¯è‹¦ã—ã¿ãŒã‚ã‚‹ã‚‚ã®ã®ã€ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã‚’ç¶šã‘ã¦ã„ãã†ã¡ã«æ™‚é–“ãŒè§£æ±ºã—ã¦ãã‚Œã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚‹ã‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºä»¥å¤–ã§ã®è²¢çŒ®ãƒ¦ãƒ“ãƒ¼ã® SWE ã¯ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºä»¥å¤–ã«ã‚‚ OKR ä½œæˆã¨è­°è«–ã€ãƒ›ãƒ©ã‚¯ãƒ©ã‚·ãƒ¼çµ„ç¹”é–‹ç™ºã€æ¡ç”¨ãªã©ã‚„ã‚‹ã¹ãã“ã¨ãŒå¤šã€…ã‚ã‚Šã¾ã™ã€‚ãã‚Œãã‚Œå°‘ãªããªã„ãƒªã‚½ãƒ¼ã‚¹ã‚’æ³¨ãã“ã¨ã«ãªã‚Šã€ãƒªã‚½ãƒ¼ã‚¹ãŒåˆ†æ•£ã™ã‚‹ã“ã¨ã«è¾›ã•ã‚‚ã‚ã‚Šã¤ã¤ã‚‚å¤šå²ã«æ¸¡ã‚‹æ´»å‹•ãŒã§ãã‚‹ã“ã¨ã«ã¯é¢ç™½ã•ã‚’æ„Ÿã˜ã¦ã„ã¾ã™ã€‚ã“ã®ä¸­ã§ç‰¹ã«ã‚ãŸã—ãŒã‚³ãƒŸãƒƒãƒˆã—ã¦ã„ã‚‹ã®ã¯æ¡ç”¨ã§ã™ã€‚ä¾‹ãˆã°ã€ãã®ä¸€ç’°ã§ç›´è¿‘ã§ã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¦ãƒ“ãƒ¼ã«èˆˆå‘³ã‚’æŒã£ã¦ãã‚Œã‚‹äººãŒé›†ã¾ã‚Œã‚‹ Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ç”¨æ„ãªã©ã‚’è¡Œã£ã¦ã„ã¾ã™ï¼ˆã‚‚ã—ã”èˆˆå‘³ãŒãŠã‚ã‚Šã®æ–¹ã„ã‚‰ã£ã—ã‚ƒã‚Œã°ã€ãœã²ã”å‚åŠ ãã ã•ã„ï¼ï¼ï¼ï¼‰ãƒ¦ãƒ“ãƒ¼ã«èˆˆå‘³ãŒã‚ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®äººãŸã¡ã¨ãƒ¦ãƒ“ãƒ¼ã®ä¸­ã®äººã§ã‚‚ã£ã¨ãƒ©ãƒ•ã«éåŒæœŸã§è©±ã›ã‚‹å ´æ‰€ãŒæ¬²ã—ã„ãª......ã¨æ€ã£ãŸã®ã§ã€ã“ã®ãŸã³ãã‚Œå°‚ç”¨ã® Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸï¼ğŸ¥³ã”èˆˆå‘³ãŒã‚ã‚‹æ–¹ã€ä»¥ä¸‹ãƒ•ã‚©ãƒ¼ãƒ ã‚ˆã‚Šå‚åŠ è¡¨æ˜ã‚’ï¼ä½•å’ä½•å’ã€œã€œï¼ï¼âœ¨âœ¨âœ¨https://t.co/QHChQPIuLKâ€” ã—ã‚…ãƒ¼ã€€ãã‚Šãƒ¼ã‚€ (@syu_cream) 2021å¹´12æœˆ16æ—¥  ä¼šç¤¾ã®æ§˜å­ã¨ã„ã†ã®ã¯ç¤¾å¤–ã‹ã‚‰ã¯è¦³æ¸¬ã—ãŒãŸãã€ã¾ãŸã‚«ã‚¸ãƒ¥ã‚¢ãƒ«é¢è«‡ã¯â€ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«â€ã¨ã†ãŸã„ã¤ã¤ã‚‚å®Ÿæ–½ã¾ã§ã«æ™‚é–“çš„ãƒ»å¿ƒç†çš„ãƒãƒ¼ãƒ‰ãƒ«ãŒé«˜ã„èª²é¡ŒãŒã‚ã‚‹ã®ã§ã¯ã¨ã„ã†ä»®èª¬ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«å¯¾ã—ã¦ã€ç¤¾å†…ãƒ¡ãƒ³ãƒãƒ¼ãŒåŒæ™‚ã«å¤šæ•°å‚åŠ ã§ãã‹ã¤æ°—è»½ãªãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¯èƒ½ãª Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¨­ã‘ã‚‹ã“ã¨ã§ä¸€å®šå¯¾ç­–ã§ãã‚‹ã®ã§ã¯ã¨è€ƒãˆãŸæ¬¡ç¬¬ã§ã™ã€‚ã™ãã®æ¡ç”¨ã«ç¹‹ãŒã‚‰ãªãã¨ã‚‚ä¼šç¤¾ã®ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹å‘ä¸Šã«æœŸå¾…ã™ã‚‹ã“ã¨ã‚‚æœŸå¾…ã§ãã¾ã™ã€‚æ¡ç”¨ã²ã¨ã¤ã¨ã£ã¦ã‚‚å¥¥æ·±ãã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºä»¥å¤–ã«ã‚‚ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã“ã¨ã§é¢ç™½ã„çµŒé¨“ãŒã§ãã¦ã„ã¾ã™ã€‚ãŠã‚ã‚Šã«ä»¥ä¸Šã€ã‚ãŸã—ãŒãƒ¦ãƒ“ãƒ¼ã«å…¥ç¤¾ã™ã‚‹ã‚ãŸã‚Šã‹ã‚‰åŠå¹´ç›®ã¾ã§ã®ç°¡å˜ãªæŒ¯ã‚Šè¿”ã‚Šã§ã—ãŸã€‚æŠ€è¡“ã‚¹ã‚­ãƒ«ã®ãƒãƒƒãƒå…·åˆã‚„ã‚¹ã‚­ãƒ«ä¸è¶³ã§è»¢è·ã‚’ãŸã‚ã‚‰ã†äººã¯å¤šã€…ã„ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ã‚ãŸã—ã®ã‚ˆã†ã«å¾Œã‹ã‚‰ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã—ã¦è¾»è¤„ã‚’åˆã‚ã›ã‚‹ã¨ã„ã†ã‚„ã‚Šæ–¹ã‚‚ã‚ã‚Šã¾ã™ã€‚ã§ããªã„ã“ã¨ãŒå¤šã„æ™‚æœŸã¯ãã‚Œãªã‚Šã®è‹¦ã—ã¿ã‚’æ„Ÿã˜ã¾ã™ãŒã€ã‚¢ãƒ³ãƒ©ãƒ¼ãƒ³ã—ã¦æ–°ã—ã„æŠ€è¡“ã‚’å¸åã§ãã‚‹ç´ é¤Šã•ãˆã‚ã‚Œã°ã‚„ãŒã¦ä¹—ã‚Šè¶Šãˆã‚‰ã‚Œã‚‹ã¯ãšã§ã™ã—ã€ã§ãã‚‹ã“ã¨ãŒå¢—ãˆãŸçŠ¶æ…‹ã§è¦‹æ¸¡ã™æ™¯è‰²ã¯ç¾ã—ã„ã‚‚ã®ã§ã™ã€‚ç‰¹ã«ã‚ãŸã—ãŒæ‰€å±ã™ã‚‹ãƒ¦ãƒ“ãƒ¼ã§ã¯ã‚¢ãƒ³ãƒ©ãƒ¼ãƒ³ã—ã¦ã‚„ã£ã¦ã„ã‘ã‚‹ç´ é¤Šã‚’é‡è¦–ã™ã‚‹ã®ã§ã€ãã®ç‚¹ã§ä¸å®‰ã‚’æ„Ÿã˜ã‚‹æ–¹ãŒã„ã‚Œã°ã”ä¸€è€ƒã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ï¼æœ€å¾Œã«ã€ Meety ä¸Šã§ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«é¢è«‡å‹Ÿé›†ã—ã¦ãŠã‚Šã¾ã™ã€‚æœ¬è¨˜äº‹ã‚„ãƒ¦ãƒ“ãƒ¼ã«ã¤ã„ã¦æ°—ã«ãªã£ãŸã“ã¨ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãœã²ã”å¿œå‹Ÿãã ã•ã„ï¼meety.netmeety.netã‚‚ã£ã¨æ°—è»½ã«ãŠè©±ã—ãŸã„ã”å¸Œæœ›ã‚ã‚Šã¾ã—ãŸã‚‰ã€è¨˜äº‹ä¸­ã§ç´¹ä»‹ã—ãŸ Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚‚ãœã²ï¼ãƒ¦ãƒ“ãƒ¼ã«èˆˆå‘³ãŒã‚ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®äººãŸã¡ã¨ãƒ¦ãƒ“ãƒ¼ã®ä¸­ã®äººã§ã‚‚ã£ã¨ãƒ©ãƒ•ã«éåŒæœŸã§è©±ã›ã‚‹å ´æ‰€ãŒæ¬²ã—ã„ãª......ã¨æ€ã£ãŸã®ã§ã€ã“ã®ãŸã³ãã‚Œå°‚ç”¨ã® Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸï¼ğŸ¥³ã”èˆˆå‘³ãŒã‚ã‚‹æ–¹ã€ä»¥ä¸‹ãƒ•ã‚©ãƒ¼ãƒ ã‚ˆã‚Šå‚åŠ è¡¨æ˜ã‚’ï¼ä½•å’ä½•å’ã€œã€œï¼ï¼âœ¨âœ¨âœ¨https://t.co/QHChQPIuLKâ€” ã—ã‚…ãƒ¼ã€€ãã‚Šãƒ¼ã‚€ (@syu_cream) 2021å¹´12æœˆ16æ—¥","link":"https://syucream.hatenablog.jp/entry/2022/01/31/154157","isoDate":"2022-01-31T06:41:57.000Z","dateMiliSeconds":1643611317000,"authorName":"syucream","authorId":"syucream"},{"title":"2021å¹´Ubie Discoveryã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å…¥ç¤¾ã‚¨ãƒ³ãƒˆãƒªã¾ã¨ã‚ã¦ã¿ãŸ","contentSnippet":"ã¯ã˜ã‚ã«ä»Šå¹´ã‚‚æ®‹ã‚Šå°‘ãªã„æ—¥æ•°ã¨ãªã£ã¦ããŸä»Šæ—¥ã“ã®é ƒã€‚ã¿ãªã•ã‚“ã«ã¨ã£ã¦ä»Šå¹´ã¯ã©ã‚“ãªå¹´ã«ãªã‚Šã¾ã—ãŸã‹ï¼Ÿã¼ãã®æ‰€å±ã™ã‚‹ãƒ¦ãƒ“ãƒ¼æ ªå¼ä¼šç¤¾ã‚‚ä»Šå¹´ã‚‚æ§˜ã€…ãªé£›èºã¨é€²åŒ–ã‚’é‚ã’ã¦ãŠã‚Šã¾ã™ã€‚ubie.lifeç‰¹ã«å¤šæ§˜ãªãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚’æŒã¤å„ªç§€ãªãƒ¡ãƒ³ãƒãƒ¼ãŒåŠ å…¥ã—ãŸã“ã¨ã¯ç›®è¦šã¾ã—ã„ç‚¹ã§ã™ã€‚ã¨ã‚Šã‚ã‘ã€Œã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€ã¨ã„ã†æ  ( https://recruit.ubie.life/engineer ä»¥ä¸‹ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ JD ) ã§åŠ å…¥ã—ãŸãƒ¡ãƒ³ãƒãƒ¼ã¯ä»Šå¹´ 20 äººã»ã©ã„ã‚‹ã‚ˆã†ã§ã—ãŸã€‚ã¨ã¯è¨€ã†ã‚‚ã®ã®ã•ã¦ã€å…·ä½“çš„ã«ã¯ã©ã®ã‚ˆã†ãªãƒ¡ãƒ³ãƒãƒ¼ãŒã‚¸ãƒ§ã‚¤ãƒ³ã—ãŸã®ã§ã—ã‚‡ã†ã‹ã€‚ãƒ¦ãƒ“ãƒ¼ã®ãƒ¡ãƒ³ãƒãƒ¼ã¯è»¢è·ã™ã‚‹éš›ã«ã„ã‚ã‚†ã‚‹è»¢è·ãƒ–ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã‚’æ›¸ã„ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šãã€ã“ã®å ´ã§ã„ãã¤ã‹æŠœç²‹ã—ã¦ç´¹ä»‹ã•ã›ã¦ã„ãŸã ã“ã†ã¨æ€ã„ã¾ã™ï¼è»¢è·ã‚¨ãƒ³ãƒˆãƒªã‚’ä¸€éƒ¨ç´¹ä»‹ï¼@itkqè»¢è·ãˆã‚“ã¨ã‚Šãƒ¼ã§ã™ / Ubie æ ªå¼ä¼šç¤¾ã«å…¥ç¤¾ã—ã¦ã„ãŸ https://t.co/anCRYSNhutâ€” ã„ãŸã“ (@itkq) 2021å¹´2æœˆ24æ—¥  ã¾ãšã¯ SRE ã® @itkq ã§ã™ã€‚ã‚³ãƒ­ãƒŠç¦ã§é•·ãç¶šããƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã¨äº‹æ¥­ã¸ã®è²¢çŒ®ã‚’åŠ å‘³ã—ã¦è»¢è·ã¸ã®è»¢æ›ã‚’æŒ¯ã‚Šè¿”ã£ã¦ã„ã¾ã™ã€‚@h13i32maruUbieã¨ã„ã†åŒ»ç™‚ç³»ãƒ™ãƒ³ãƒãƒ£ãƒ¼ã«è»¢è·ã™ã‚‹ã®ã§ã€ãƒ–ãƒ­ã‚°ã‹ã„ã¦ã¿ã¾ã—ãŸã€‚è»¢è·ã®æ„æ€æ±ºå®šï¼ˆã‚¯ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ â†’ Ubieï¼‰https://t.co/LChrlFDghNâ€” Ryo Maruyama (@h13i32maru) 2021å¹´2æœˆ12æ—¥  æ¬¡ã¯ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ toB å‘ã‘ã‚µãƒ¼ãƒ“ã‚¹é–‹ç™ºã‚’ã—ã¦ã„ã‚‹ @h13i32maru ã§ã™ã€‚è»¢è·ã¨ã„ã†æ„æ€æ±ºå®šã‚’ã™ã‚‹ä¸Šã§ã€æ„Ÿæƒ…ã«æµã•ã‚Œãšæ‡¸å¿µè¦ç´ ã‚’æ´—ã„å‡ºã—æ•´ç†ã—ã¦ã„ãè‰¯ã‚¨ãƒ³ãƒˆãƒªã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚@empitsu88é£Ÿã¹ãƒ­ã‚°ã‹ã‚‰Ubieã«è»¢è·ã—ã¦ãã‚ãã‚2ãƒ¶æœˆãªã®ã§ã€ã„ã‚ã‚†ã‚‹å…¥ç¤¾ã‚¨ãƒ³ãƒˆãƒªã‚’æ›¸ãã¾ã—ãŸã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦Ubieã«å…¥ç¤¾ã—ã¾ã—ãŸ #note https://t.co/vXyOFmqs2Câ€” ãˆã‚“ã´ã¤ (@empitsu88) 2021å¹´8æœˆ11æ—¥  ãŠæ¬¡ã‚‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã® @empitsu88 ã§ã™ã€‚åƒãã‚„ã™ã•ã¨ã„ã†è¦³ç‚¹ã‚‚åŠ ãˆã¦è»¢è·ã‚’æŒ¯ã‚Šè¿”ã£ã¦ã¾ã™ã€‚@jagabassUbieã«è»¢è·ã—ã¦1ãƒ¶æœˆãŒçµŒã£ãŸã®ã§å…¥ç¤¾ã‚¨ãƒ³ãƒˆãƒªã‚’æ›¸ãã¾ã—ãŸï¼è»¢è·æ´»å‹•æ™‚ã®æ„æ€æ±ºå®šã‚„å…¥ç¤¾å¾Œã®æ„Ÿæƒ³ã‚’ä¸­å¿ƒã«ãŠè©±ã—ã—ã¦ã„ã¾ã™ã€œ https://t.co/2Zf2KLK5WPâ€” ã˜ã‚ƒãŒã˜ã‚ƒãŒ (@jagabass) 2021å¹´8æœˆ2æ—¥  @jagabass ã¯ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒŠãƒªã‚¹ãƒˆã¨ã—ã¦ã‚¸ãƒ§ã‚¤ãƒ³ã—ãƒ‡ãƒ¼ã‚¿åˆ†æã‚¹ã‚­ãƒ«ã‚’æ­¦å™¨ã«å¹…åºƒãæ´»èºã—ã¦ã„ã¾ã™ã€‚@syu_creamè¿‘æ³ã§ã™ã€‚ä»Šå¾Œã¨ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚https://t.co/8WpmGWqhe4â€” ã—ã‚…ãƒ¼ã€€ãã‚Šãƒ¼ã‚€ (@syu_cream) 2021å¹´8æœˆ4æ—¥  ç­†è€…è‡ªèº«ã§ã™ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦è»¢è·ã—ã¦ã„ã¾ã™ã€‚ã‚³ãƒ³ãƒ•ã‚©ãƒ¼ãƒˆã‚¾ãƒ¼ãƒ³ã®è„±å‡ºã¨è‡ªèº«ã®ã‚¹ã‚­ãƒ«ã‚»ãƒƒãƒˆã®å¤šæ§˜åŒ–ãªã©ã®æ€æƒ‘ã‚’è¸ã¾ãˆã€ãƒ¦ãƒ“ãƒ¼ã¸ã®ã‚¸ãƒ§ã‚¤ãƒ³ã‚’æ±ºæ–­ã—ã¦ã„ã¾ã™ã€‚@dtaniwakiUbieã«å…¥ç¤¾ã—ã¦1ãƒ¶æœˆçµŒã£ãŸã®ã§ã€å…¥ç¤¾ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’æ›¸ãã¾ã—ãŸã€‚#Ubie #ãƒ¦ãƒ“ãƒ¼ #SRE #Kuberneteshttps://t.co/q5p9CHiNXYâ€” Daisuke Taniwaki (@dtaniwaki) 2021å¹´9æœˆ7æ—¥  SRE ã¨ã—ã¦ @dtaniwaki ã‚¸ãƒ§ã‚¤ãƒ³ã—ã¦ã€æŒã¡å‰ã®æŠ€è¡“åŠ›ã®é«˜ã•ã‚’ç”Ÿã‹ã—ã¦ã‚¤ãƒ³ãƒ•ãƒ©æ•´å‚™ã‚„ã‚¤ãƒ™ãƒ³ãƒˆç™»å£‡ãªã©å¤šå²ã«æ¸¡ã‚‹æ´»èºã‚’ã—ã¦ã„ã¾ã™ã€‚@m_mizutaniæ›¸ãã¾ã—ãŸã€‚9æœˆã‹ã‚‰ã¯Ubieã¨ã„ã†åŒ»ç™‚ç³»ã®ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã§å¼•ãç¶šãã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ã‚„ã£ã¦ã„ãã¾ã™ã€‚å„ä½ä½•å’ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚è»¢è·ã—ã¾ã™ï¼ˆCookpad â†’ Ubieï¼‰ - ã‚ã‚‹ç ”ç©¶è€…ã®æ‰‹è¨˜ https://t.co/KyA6SA8EHLâ€” mizutani (@m_mizutani) 2021å¹´8æœˆ1æ—¥  @m_mizutani ã¯æ¯”è¼ƒçš„æœ€è¿‘ã§ããŸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ã‚¢ ãƒã‚¸ã‚·ãƒ§ãƒ³ã§ã‚¸ãƒ§ã‚¤ãƒ³ã—ã¦ã„ã¾ã™ã€‚æœ€è¿‘ã¯ä¸€äººã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’å›ã™ãªã©ã—ã¦ãŠã‚Š...æ­£æ°—ã‹ï¼ï¼ï¼Ÿadventar.org@shikajiroZOZOãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚º/ZOZOç ”ç©¶æ‰€ã‚’é€€è·ã—ã¾ã—ãŸã€‚æ¬¡ã¯åŒ»ç™‚xAIã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—Ubieã«è¡Œã£ã¦ãã¾ã™ã€‚ï½œshikajiro @shikajiro #note https://t.co/jsRGXr2redâ€” ã—ã‹ã˜ã‚ã† (@shikajiro) 2021å¹´8æœˆ5æ—¥  @shikajiro ã¯ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦å…¥ç¤¾ã—ã¦ãŠã‚Šã€ç¾åœ¨ toB å‘ã‘ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºã«å¾“äº‹ã—ã¦ã„ã¾ã™ã€‚ã€ŒMLä»¥å¤–ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°å…¨éƒ¨ã‚„ã‚‹ã€ã‚’ãƒ¢ãƒƒãƒˆãƒ¼ã«æ´»èºã—ã¦ããŸã¨ã“ã‚ã‹ã‚‰ã®è»¢è·ã€ã‚¨ãƒ¢ã•æº¢ã‚Œã‚‹ã‚¨ãƒ³ãƒˆãƒªã‚’æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚@hokacchaè¿‘æ³ã§ã™ | ã‚¯ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã‚’é€€è·ã—ã¦ Ubie Discovery ã«è»¢è·ã—ã¾ã—ãŸ - hokaccha memo https://t.co/N3KdNGIacHâ€” hokaccha (@hokaccha) 2021å¹´9æœˆ1æ—¥  @hokaccha ã‚‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦å…¥ç¤¾ã—ã¦ãŠã‚Šã¾ã™ã€‚å½¼ã‚‚ã¾ãŸã‚¨ãƒ¢ã•æº¢ã‚Œã‚‹ã‚¨ãƒ³ãƒˆãƒªã‚’ã—ãŸãŸã‚ã¦ã„ã¾ã™ã€‚ã¨ã‚Šã‚‚ã©ãã†ã€é’æ˜¥ã€‚@okiyuki99æœ¬æ—¥12/1ã‹ã‚‰Ubieã«å…¥ç¤¾ã—ã¾ã—ãŸã€‚ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã‚‰ã—ãã€å´–ã®ä¸Šã‹ã‚‰é£›ã³é™ã‚ŠãªãŒã‚‰é£›è¡Œæ©Ÿã‚’ä½œã‚‹ç’°å¢ƒã‚’Enjoyã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™â€” OKIYUKI (@okiyuki99) 2021å¹´11æœˆ30æ—¥  ãƒ–ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã§ã¯ãªã„ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒŠãƒªã‚¹ãƒˆã¨ã—ã¦ @okiyuki99 ã‚‚ã‚¸ãƒ§ã‚¤ãƒ³ã—ã¦ã„ã¾ã™ã€‚æ—©é€Ÿå¤šè§’çš„ã«ãƒ‡ãƒ¼ã‚¿åˆ†æã‚’ã—ã¦ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«ãƒãƒªãƒãƒªè²¢çŒ®ã—ã¦ã„ã¾ã™ã€‚ohtamanæœ¬æ—¥ã‹ã‚‰ Ubie Discovery ã§ã™ï¼BrainPadã®ã¿ãªã•ã‚“ã€12å¹´é–“ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼ #ã¯ã¦ãªãƒ–ãƒ­ã‚°12å¹´ãŠä¸–è©±ã«ãªã£ãŸ BrainPad ã‹ã‚‰ Ubie ã¸è¡Œãã¾ã™ - 0-8 https://t.co/FpmJkO0Kygâ€” ãŠãŠãŸã¾ã‚“ (@ohtaman) 2021å¹´11æœˆ30æ—¥  ohtaman ã¯å‰è·ã«ãŠã„ã¦ CDTO ï¼ˆæœ€é«˜ãƒ‡ãƒ¼ã‚¿æŠ€è¡“è²¬ä»»è€…ï¼‰ã¨ã„ã†ç«‹å ´ã«ãŠã‚Šã€ãƒ¦ãƒ“ãƒ¼ã«ã¯æ©Ÿæ¢°å­¦ç¿’ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã‚¸ãƒ§ã‚¤ãƒ³ã—ã¦ã„ã¾ã™ã€‚ 12 å¹´é–“ã«ã‚ãŸã‚‹å‰è·ã®æŒ¯ã‚Šè¿”ã‚Šã¨ãƒ¦ãƒ“ãƒ¼ã§ã®å±•æœ›ã€èª­ã¿å¿œãˆãŒã‚ã‚Šã¾ã™ã€‚@takahi_iæ›¸ãã¾ã—ãŸï¼ /  Ubie Discovery ã«è»¢è·ã—ã¾ã—ãŸï¼ˆäººç”Ÿåˆã®å…¥ç¤¾ã‚¨ãƒ³ãƒˆãƒªï¼‰ï½œtakahi_i @takahi_i #note https://t.co/BWBn79tc5sâ€” Takahiko Ito (@takahi_i) 2021å¹´9æœˆ17æ—¥  @takahi_i ã¯æ©Ÿæ¢°å­¦ç¿’ã‚„æ¤œç´¢ã‚’å¾—æ„ã¨ã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã‚ã‚Šã€ã€ŒMLãŒã‚µãƒ¼ãƒ“ã‚¹ã®æ ¹å¹¹ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã€ã“ã¨ãªã©å°‚é–€æ€§ã‚’æ´»ã‹ã›ã‚‹è·å ´ã§ã‚ã‚‹ã“ã¨ã‚’ã‚¨ãƒ³ãƒˆãƒªã§æŒ¯ã‚Šè¿”ã£ã¦ã„ã¾ã™ã€‚ãŠã‚ã‚Šã«ä¸Šè¨˜ã«æŒ™ã’ãŸã®ã¯ä¸€ä¾‹ã§ã€ä»–ã«ã‚‚ç´¹ä»‹ã—ãã‚Œãªã„é­…åŠ›çš„ãªãƒ¡ãƒ³ãƒãƒ¼ãŒãŠã‚Šã¾ã™ã€‚å„ªç§€ãªãƒ¡ãƒ³ãƒãƒ¼ãŒæƒã†ãƒ‰ãƒªãƒ¼ãƒ ãƒãƒ¼ãƒ ãŒå‡ºæ¥ä¸ŠãŒã‚Šã¤ã¤ã‚ã‚Šã€å€‹äººçš„ã«ã¯è‰¯ã„ãƒ¡ãƒ³ãƒãƒ¼ã¨ä¸€ç·’ã«åƒã‘ã‚‹ã“ã®ç’°å¢ƒãŒã‚ã‚‹ç¨®ã®ç¦åˆ©åšç”Ÿã«ã‚‚æ€ãˆã¦ãã¦ã„ã¾ã™ã€‚ãŒã€ãƒ¦ãƒ“ãƒ¼ã®é‡æœ›ã¯æœã¦ã—ãªããƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ãŸã„é ˜åŸŸãŒå¤šåˆ†ã«ã‚ã‚‹ä¸€æ–¹ã¾ã ã¾ã äººãŒè¶³ã‚Šã¾ã›ã‚“ã€‚ã¾ã ã¾ã æ‰‹ã®å±Šã„ã¦ã„ãªã„èª²é¡ŒãŒå±±ã»ã©ã‚ã‚Šã¾ã™ï¼ã“ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ã¿ã¦ã„ã‚‹ã‚ãªãŸã®å°†æ¥ã®é¸æŠè‚¢ã«ãƒ¦ãƒ“ãƒ¼ã‚’è€ƒãˆã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿãƒ¦ãƒ“ãƒ¼ã«ã¤ã„ã¦ã‚‚ã£ã¨çŸ¥ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’ã”è¦§é ‚ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚recruit.ubie.lifeMeety ã‚’ã‚„ã£ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒãƒ¼ã‚‚å¤šãã€ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«é¢è«‡ã‚‚ãŠæ°—è»½ã«ã”å‚åŠ ã„ãŸã ã‘ã¾ã™ã€‚meety.netã¾ãŸã€æœ€è¿‘ãƒ¦ãƒ“ãƒ¼åœ¨ç±ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ãƒ©ãƒ•ã«è©±ã›ã‚‹å°‚ç”¨ Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç”¨æ„ã—ã¦ã¿ã¾ã—ãŸã€‚æ‹›å¾…åˆ¶ã«ãªã£ã¦ãŠã‚Šãƒ•ã‚©ãƒ¼ãƒ ã®å…¥åŠ›ãŒå¿…è¦ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ãŒã€ãœã²ãŠæ°—è»½ã«ã”å‚åŠ ãã ã•ã„ã€‚ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«é¢è«‡ã‚ˆã‚Šæ›´ã«ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãªéåŒæœŸã«è©±ã‚’èãå ´ã¨ã—ã¦ã€ã‚ã‚‹ã„ã¯ãƒ¦ãƒ“ãƒ¼ã®é›°å›²æ°—ã‚’æ„Ÿã˜å–ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã€ã”æ´»ç”¨ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ï¼ãƒ¦ãƒ“ãƒ¼ã«èˆˆå‘³ãŒã‚ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®äººãŸã¡ã¨ãƒ¦ãƒ“ãƒ¼ã®ä¸­ã®äººã§ã‚‚ã£ã¨ãƒ©ãƒ•ã«éåŒæœŸã§è©±ã›ã‚‹å ´æ‰€ãŒæ¬²ã—ã„ãª......ã¨æ€ã£ãŸã®ã§ã€ã“ã®ãŸã³ãã‚Œå°‚ç”¨ã® Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸï¼ğŸ¥³ã”èˆˆå‘³ãŒã‚ã‚‹æ–¹ã€ä»¥ä¸‹ãƒ•ã‚©ãƒ¼ãƒ ã‚ˆã‚Šå‚åŠ è¡¨æ˜ã‚’ï¼ä½•å’ä½•å’ã€œã€œï¼ï¼âœ¨âœ¨âœ¨https://t.co/QHChQPIuLKâ€” ã—ã‚…ãƒ¼ã€€ãã‚Šãƒ¼ã‚€ (@syu_cream) 2021å¹´12æœˆ16æ—¥","link":"https://syucream.hatenablog.jp/entry/2021/12/20/170222","isoDate":"2021-12-20T08:02:22.000Z","dateMiliSeconds":1639987342000,"authorName":"syucream","authorId":"syucream"},{"title":"è»¢è·ã—ã¾ã—ãŸ: ãƒ¡ãƒ«ãƒšã‚¤ -> Ubie ~ã‚¯ã‚»ã¤ã‚ˆçµ„ç¹”ã‚’æ±‚ã‚ã¦~","contentSnippet":"è¡¨é¡Œã®é€šã‚Šã§ã€ 2021å¹´7æœˆã‚ˆã‚Šå‰è·ã®æ ªå¼ä¼šç¤¾ãƒ¡ãƒ«ãƒšã‚¤ï¼ˆãƒ¡ãƒ«ã‚«ãƒªï¼‰ã‚’é€€è·ã—ã¦ Ubie ã«è»¢è·ã—ã¾ã—ãŸã€‚ã¨ã„ã†ã‚ã‘ã§ã„ã‚ã‚†ã‚‹è»¢è·ã‚¨ãƒ³ãƒˆãƒªã§ã™ã€‚TL;DRãƒ¡ãƒ«ã‚«ãƒªãƒ»ãƒ¡ãƒ«ãƒšã‚¤ã« 3 å¹´ 10 ãƒ¶æœˆåœ¨ç±ã—ã¾ã—ãŸã‚¹ã‚­ãƒ«ã‚„çµŒé¨“ã®å¹…ã‚’æŒãŸã›ãŸã„ã€ã‚µãƒ¼ãƒ“ã‚¹åˆæœŸã®é›°å›²æ°—ã‚’ã¾ãŸå‘³ã‚ã„ãŸãã¦è»¢è·Ubie ã«å…¥ç¤¾ã—ã¦ SWE ã¨ã—ã¦åƒãå‡ºã—ã¦ä¸€ãƒ¶æœˆçµŒéã—ã¾ã—ãŸãƒ¡ãƒ«ã‚«ãƒªãƒ»ãƒ¡ãƒ«ãƒšã‚¤ã§ã‚„ã£ã¦ãŸã“ã¨ãƒ¡ãƒ«ã‚«ãƒªã«ã¯ 2017 å¹´ 8 æœˆã«å…¥ç¤¾ã—ã€ç´„åŠå¹´é–“ SRE ãƒãƒ¼ãƒ ã«æ‰€å±ã—ã¦ã„ã¾ã—ãŸã€‚ãã®å¾Œãƒ¡ãƒ«ãƒšã‚¤ã®ç«‹ã¡ä¸Šã’ã«åˆã‚ã›ã¦ç•°å‹•ã—ã¦ 2021 å¹´ 6 æœˆæœ«ã¾ã§ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ã‚„ã£ã¦ã„ã¾ã—ãŸã€‚æœ¬å½“ã«æ•°å¤šãã®åŒåƒšã‚„é–¢ä¿‚è€…ã«æµã¾ã‚Œã¦ãŠã‚Šã¾ã—ãŸã€‚ãŠä¸–è©±ã«ãªã£ãŸæ–¹ã€…ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚ãƒ¡ãƒ«ã‚«ãƒªãƒ»ãƒ¡ãƒ«ãƒšã‚¤ã§ä½“é¨“ã—ãŸã“ã¨ã¯æšæŒ™ã«æš‡ãŒãªãã€ç´„ 4 å¹´ã§ä½“é¨“ã—ãŸã“ã¨ãªã®ã‹ã¨ç–‘ã†ã»ã©ã«æ¿ƒå¯†ãªã‚‚ã®ã§ã—ãŸã€‚ãƒ—ãƒ­é›†å›£ã® SRE ãƒãƒ¼ãƒ ã®ä¸€å“¡ã¨ã—ã¦åƒãã€åˆºæ¿€ã‚’å—ã‘ãŸã“ã¨ã€‚ãƒ¡ãƒ«ãƒšã‚¤ã®ç«‹ã¡ä¸Šã’åˆæœŸãƒ¡ãƒ³ãƒãƒ¼ã«åŠ ã‚ã‚Šã€å¤§è¦æ¨¡ãªæ–°ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ãƒ¼ãƒ³ãƒã«é–¢ã‚ã‚ŒãŸã“ã¨ã€‚ãƒã‚¶ãƒ¼ã‚ºä¸Šå ´ã€‚ç¤¾å“¡æ•°ã®æ€¥æ‹¡å¤§ï¼ˆè‡ªåˆ†ãŒå…¥ç¤¾ã—ãŸé ƒã‚ˆã‚Šæœ€çµ‚çš„ã«ç´„ 3 å€ã«ãªã£ãŸï¼ï¼‰ã¨å¤šæ§˜ãªãƒãƒƒã‚¯ã‚°ãƒ©ãƒ³ãƒ‰ã‚’æŒã¤ãƒ¡ãƒ³ãƒãƒ¼ãŒæƒã„å‡ºã—ãŸã“ã¨ã€‚å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šæ‰±ã†ãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®æ§‹ç¯‰ã«ãƒªã‚½ãƒ¼ã‚¹ã‚’æŒ¯ã‚Šåˆ‡ã‚ŒãŸã“ã¨ã€‚ç‰¹ã«ãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®æ§‹ç¯‰ã¯ç´„ 4 å¹´ã®æ­³æœˆã®ä¸­ã§æ³¨åŠ›ã—ã¦ã„ãŸäº‹ã§ã‚ã‚Šã€æˆæœã‚’ Builerscon 2018 LT ã‚„ ApacheCon NA 2019 ã§ç™ºè¡¨ã•ã›ã¦é ‚ãã«ã‚‚è‡³ã‚Šã¾ã—ãŸã€‚ speakerdeck.com speakerdeck.comãƒ¡ãƒ«ã‚«ãƒªãƒ»ãƒ¡ãƒ«ãƒšã‚¤ã¯å…ˆæ—¥ç™ºè¡¨ãŒã‚ã£ãŸãƒ¡ãƒ«ã‚«ãƒªShops ã‚„ã€ãƒ¡ãƒ«ã‚³ã‚¤ãƒ³ã‚‚æ‰‹ãŒã‘ã¦ãŠã‚Šã€ç¾çŠ¶ã«æº€è¶³ã›ãšã« Go Bold ã«æŒ‘æˆ¦ã—ç¶šã‚‹ã€åˆºæ¿€ã®å¼·ã„ç’°å¢ƒã§ã™ã€‚about.mercari.comå°†æ¥ã«å‘ã‘ãŸè‘›è—¤ãã‚“ãªè‰¯ã„ç’°å¢ƒã‚’æ‰‹æ”¾ã—ã¦ã¾ã§è»¢è·ã™ã‚‹ç†ç”±ã¨ã—ã¦ã¯ã€ã²ã¨ãˆã«è‡ªåˆ†ã®ã‚­ãƒ£ãƒªã‚¢ã¨å°†æ¥ã‚’è€ƒãˆãŸä¸Šã§åˆ¥ã®é“ã‚’æ­©ã‚€ã®ãŒè‰¯ã„ã¨åˆ¤æ–­ã—ãŸãŸã‚ã§ã™ã€‚è»¢è·ã«è‡³ã‚‹ã¾ã§ä»¥ä¸‹ã®ã‚ˆã†ãªè‘›è—¤ã‚’æŠ±ãˆã¦ã„ã¾ã—ãŸã€‚è‡ªåˆ†ã®å¹´é½¢ã¨äººç”Ÿã‚’è€ƒæ…®ã—ã¦ä»Šã‚‚ã£ã¨æŒ‘æˆ¦ã™ã¹ãã¨æ„Ÿã˜ãŸè‡ªåˆ†ã®ç«‹å ´ãŒã‚³ãƒ³ãƒ•ã‚©ãƒ¼ãƒˆã‚¾ãƒ¼ãƒ³ã«ãªã£ã¦ããŸã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã®é›°å›²æ°—ã‚’ã‚ˆã‚Šæ„Ÿã˜ãŸããªã£ãŸãã‚Œãã‚Œåˆ†è§£ã—ã¦ã¿ã¾ã™ã€‚è‡ªåˆ†ã®å¹´é½¢ã¨äººç”Ÿã‚’è€ƒæ…®ã—ã¦ä»Šã‚‚ã£ã¨æŒ‘æˆ¦ã™ã¹ãã¨æ„Ÿã˜ãŸä»Šå¹´ã§è‡ªåˆ†ã¯ 33 æ­³ã§ã‚ã‚Šã€ä»Šå¾Œã®ãƒ©ã‚¤ãƒ•ã‚¤ãƒ™ãƒ³ãƒˆã‚‚è€ƒæ…®ã™ã‚‹ã¨ã©ã“ã¾ã§è‡ªç”±ã«æŒ‘æˆ¦ã§ãã‚‹ã‹ç–‘å•ãŒæµ®ã‹ã³ã¾ã™ã€‚ä»Šã“ã®ã¨ãã€ä½“åŠ›ã‚„æƒ…ç†±ãŒã‚ã‚Šå¤šå°‘äººç”Ÿã®æ™‚é–“ã®ä½¿ã„æ–¹ã‚’è‡ªç”±ã«ã§ãã‚‹æ™‚ã«ã‚ˆã‚ŠæŒ‘æˆ¦ã™ã¹ãã§ã¯ãªã„ã‹ã¨æ„Ÿã˜ã¦ã„ã¾ã—ãŸã€‚è‡ªåˆ†ã®ç«‹å ´ãŒã‚³ãƒ³ãƒ•ã‚©ãƒ¼ãƒˆã‚¾ãƒ¼ãƒ³ã«ãªã£ã¦ããŸã‚ã‚Šãµã‚ŒãŸè©±ã§ã™ãŒã€è‡ªåˆ†ã®ç«‹å ´ãŒã‚³ãƒ³ãƒ•ã‚©ãƒ¼ãƒˆã‚¾ãƒ¼ãƒ³ã«ãªã‚Šã€æ–°ã—ã„åˆºæ¿€ãŒå°‘ãªãæˆé•·ã‚’ã‚ã¾ã‚Šå®Ÿæ„Ÿã§ããªããªã£ã¦ã„ã¾ã—ãŸã€‚ãƒ¡ãƒ«ã‚«ãƒªãƒ»ãƒ¡ãƒ«ãƒšã‚¤ã§ã¯ä¸»ã«ãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®é–‹ç™ºã¨é‹ç”¨ã‚’ã‚„ã£ã¦ã„ã¾ã—ãŸã€‚ã“ã†ã—ãŸã„ã‚ã‚†ã‚‹ç¤¾å†…ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåŸºç›¤ãªã©ã¨å‘¼ã°ã‚Œã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®æ‹…å½“åˆ†é‡ã«ãŠã„ã¦ã¯ã€ç‰¹å®šã®æŠ€è¡“çš„ãªå•é¡Œã¨æŒ‘æˆ¦ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã‚„ã™ã„åé¢ã€ãƒ“ã‚¸ãƒã‚¹ä¸Šã®ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã®ç²å¾—ã‚„å¤šæ§˜ãªæŠ€è¡“ã®ç†è§£ãŒå¾—é›£ã„ã¨ã„ã†ãƒ‡ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ã¨è€ƒãˆã¾ã™ã€‚ã¾ãŸåŸºç›¤åˆ·æ–°ã‚„æ–°æŠ€è¡“ã®å°å…¥ã§æ–°ã—ã„çŸ¥è­˜ã‚’ç²å¾—ã™ã‚‹æ©Ÿä¼šã¯ã‚ã‚‹ã‚‚ã®ã®ã€å¾ã€…ã«å¼·ãã¦ãƒ‹ãƒ¥ãƒ¼ã‚²ãƒ¼ãƒ ã«ãªã‚Šåˆºæ¿€ãŒç„¡ããªã£ã¦ãã‚‹ã‚ˆã†ã«ã‚‚æ„Ÿã˜ã¾ã™ã€‚è‡ªåˆ†ã®ç›´è¿‘ã®å®Ÿä¾‹ã‚’å–ã‚‹ã¨ã€ Apache Airflow ã‚„ Apache Beam, Apache Spark, Apache Flink ã‚’æ´»ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿åé›†åŸºç›¤ã®æ§‹ç¯‰ã‚„ BigQuery ã«ã‚ˆã‚‹å‡ºãŸã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹æä¾›ã«å¾“äº‹ã—ã¦ãã¾ã—ãŸã€‚ä»–æ–¹ã€é€£æºã™ã‚‹ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®çŸ¥è­˜ã¯ãã‚Œã»ã©èº«ã«ä»˜ã‹ãšã€ Android, iOS ã‚¢ãƒ—ãƒªã‚„ Web ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã¤ã„ã¦ã¯æ›´ã«è·é›¢ã®ã‚ã‚‹è©±é¡Œã«ãªã£ã¦ã„ã¾ã—ãŸã€‚å‰å‰è·ã¾ã§é¡ã‚‹ã¨ã€è‡ªåˆ†ã®ã‚­ãƒ£ãƒªã‚¢ã«ãŠã„ã¦ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çš„ãªå½¹å‰²ã«æŒ¯ã£ãŸæ™‚é–“ã¯ 8 å‰²ã»ã©ã‚’å ã‚ã¦ã„ã¾ã™ã€‚ã“ã®æ–¹å‘æ€§ã‚’ç¶­æŒã™ã‚‹ã«ã‚‚åˆ¥ã®é“ã‚’æ¨¡ç´¢ã™ã‚‹ã«ã‚‚ã€ã‚ˆã‚Šå¤šæ§˜ãªçµŒé¨“ã‚’ç©ã‚“ã§èƒ½åŠ›ã‚„ç™ºæƒ³ã«å¹…ã‚’æŒãŸã›ã‚‹ã¹ãã§ã¯ãªã„ã‹ã¨è€ƒãˆã¾ã—ãŸã€‚ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã®é›°å›²æ°—ã‚’ã‚ˆã‚Šæ„Ÿã˜ãŸããªã£ãŸè‡ªåˆ†ãŒãƒ¡ãƒ«ã‚«ãƒªã«å…¥ç¤¾ã—ãŸé ƒã¨æ¯”ã¹ã¦ç¤¾å“¡æ•°ã¯åŠ‡çš„ã«å¤‰åŒ–ã—ã¾ã—ãŸã€‚çµ„ç¹”ã¯æˆç†Ÿã—ã¦ä¸Šå ´ã‚‚æœãŸã—ã€ä»•äº‹ã®ä»•æ–¹ã‚‚è‡ªåˆ†ã®å…¥ç¤¾ã—ãŸé ƒã¨æ¯”è¼ƒã—ã¦ã“ãªã‚Œã¦ããŸå°è±¡ãŒã‚ã‚Šã¾ã—ãŸã€‚ãã‚Œã«éš›ã—ã¦ã©ã“ã‹ã€Œæ˜”ã¯ã‚ˆã‹ã£ãŸã€ã¨æ„Ÿã˜ã¦ã—ã¾ã†ã‚·ãƒ¼ãƒ³ãŒå¢—ãˆã¦ãã¾ã—ãŸã€‚ï¼ˆå¤§æŠµã¯æ€ã„å‡ºã‚’éå‰°ã«ç¾åŒ–ã—ã¦ã„ã‚‹ã‹ã‚‚ã§ã™ãŒï¼‰è€ƒãˆã‚‹ã¹ãã“ã¨ã€ã‚„ã‚‹ã¹ãä»•äº‹ãŒå¤šé‡ã«ã‚ã‚‹æ€¥æˆé•·ä¸­ã®ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã§ã¯åˆºæ¿€ã‚‚å¤šãå­¦ã¹ã‚‹ã“ã¨ãŒã‚ã‚‹ã¯ãšã§ã™ã€‚è‡ªåˆ†ã«ã¯ä»Šã€å†ã³ãã®ã‚«ã‚ªã‚¹ã ã‘ã©å–œã³ãŒå¤šã„ç’°å¢ƒã«èº«ã‚’ãŠãã¹ããªã®ã§ã¯ã¨è‘›è—¤ã—ã¾ã—ãŸã€‚Ubie å…¥ç¤¾å‰è¿°ã®ã‚ˆã†ãªè‘›è—¤ã‚’ã‹ã‚Œã“ã‚ŒåŠå¹´ã»ã©ç¶šã‘ã¦ã€æœ€çµ‚çš„ã« 2021 å¹´ 7 æœˆã«åŒ»ç™‚ç³»ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã§ã‚ã‚‹ Ubie æ ªå¼ä¼šç¤¾ã«å…¥ç¤¾ã™ã‚‹é‹ã³ã«ãªã‚Šã¾ã—ãŸã€‚ubie.lifeUbie ã¯ç¾åœ¨ãƒ›ãƒƒãƒˆãªåŒ»ç™‚ã¨ã„ã†åˆ†é‡ã§ã®æ´»èºã‚’ã­ã‚‰ã„ã€ã¾ãŸç‰¹è‰²ã®ã‚ã‚‹ã¨ã„ã†ã‹ã‚¯ã‚»ãŒå¼·ã„çµ„ç¹”ã‚„æ–‡åŒ–ã‚’æŒã£ã¦ãŠã‚Šã€ã“ã‚ŒãŒè‡ªåˆ†ãŒæŠ±ãˆã‚‹èª²é¡Œã‚’ç·©å’Œã™ã‚‹ææ–™ã«ãªã‚‹ã¨æ„Ÿã˜ãŸãŸã‚ã§ã™ã€‚åŒ»ç™‚ X ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¯æŒ‘æˆ¦ã—ãŒã„ãŒã‚ã‚‹ä»£è¡¨ã®é˜¿éƒ¨ã®è¨˜äº‹ã®é€šã‚Šã€åŒ»ç™‚åˆ†é‡ã«ãŠã„ã¦ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚’çµ„ã¿åˆã‚ã›ã¦è§£æ±ºã§ãã‚‹èª²é¡ŒãŒã‚ã‚Šã€æŒ‘æˆ¦ã—ãŒã„ãŒã‚ã‚Šã¾ã™ã€‚note.comã€Œãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã§äººã€…ã‚’é©åˆ‡ãªåŒ»ç™‚ã«æ¡ˆå†…ã™ã‚‹ã€ã“ã¨ã§æ•‘ãˆã‚‹å‘½ã€åŠ©ã‘ã‚‰ã‚Œã‚‹äººã€…ãŒå±…ã‚‹ã¯ãšã§ã™ã€‚ã‚‚ã£ã¨èº«è¿‘ã«è¨€ã†ãªã‚‰å°†æ¥ã®è‡ªåˆ†ã‚’æ•‘ã†ã“ã¨ã«ã‚‚ãªã‚Šãˆã¾ã™ã€‚ä¿ºã‚‚ã¾ã ã¾ã è‹¥ã„ã—æ”¾ã£ã¦ãŠã‘ã°ç›´ã‚‹ã£ã—ã‚‡ã€ã¨ã„ã†æ²¹æ–­ã‚’ã„ã¤ã¾ã§ã§ãã‚‹ã‹åˆ†ã‹ã£ãŸã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®ã‚³ãƒ­ãƒŠç¦ã§ã€æˆ‘ã€…ã¯èª°ã—ã‚‚å½“äº‹è€…ã«ãªã‚Šã†ã‚‹ã¨ã„ã†å±æ©Ÿæ„Ÿã‚’æ¤ãˆä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚åŒ»ç™‚ã¨å°†æ¥ã®å¥åº·çŠ¶æ…‹ã¯ä»Šæ”¹ã‚ã¦æˆ‘ã€…ã®ç›®ã®å‰ã«è¦‹ãˆã‚‹å£ã¨ã—ã¦ç«‹ã¡ã¯ã ã‹ã£ã¦ã„ã¾ã™ã€‚ãã—ã¦èª²é¡ŒãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã¯ã€ãƒ“ã‚¸ãƒã‚¹ãƒãƒ£ãƒ³ã‚¹ã«ã‚‚æº€ã¡ã¦ã„ã‚‹ã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚ä¼šç¤¾ã®æˆé•·ã«è²¢çŒ®ã—ã¦ã€å¯¾ä¾¡ã¨ã—ã¦ã®å ±é…¬ã‚’å¾—ã‚‹ã€‚è‡ªåˆ†ãŒäº‹æ¥­ã«ã‚³ãƒŸãƒƒãƒˆã—ã¦ã„ã‚‹å®Ÿæ„ŸãŒéå¸¸ã«å‡ºã‚‹çŠ¶æ³ãŒæƒã£ã¦ã„ã‚‹ã¨è€ƒãˆã¾ã™ã€‚ãƒ›ãƒ©ã‚¯ãƒ©ã‚·ãƒ¼çµ„ç¹”ã¨é »ç¹ãªç•°å‹•Ubie ã§ã¯ãƒ›ãƒ©ã‚¯ãƒ©ã‚·ãƒ¼ã¨ã„ã†çµ„ç¹”ä½“ç³»ã‚’æ¡ã£ã¦ã„ã¾ã™ã€‚è©³ç´°ã¯ä»¥ä¸‹ã«ã¾ã¨ã¾ã£ã¦ã„ã¾ã™ã€‚å€‹äººçš„ã«éŸ¿ã„ãŸç‚¹ã¨ã—ã¦ã€æœ‰æ©Ÿçš„ã«çµ„ç¹”ãŒå¤‰åŒ–ã—ã¦ç•°å‹•ãŒé »ç¹ã«è¡Œã‚ã‚Œã¦ã„ã‚‹ã“ã¨ã€å€‹äººãŒè¤‡æ•°ã®ãƒ­ãƒ¼ãƒ«ã«ç´ä»˜ãæ¥­å‹™ã‚’é‚è¡Œã™ã‚‹ã“ã¨ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚ï¼ˆå®Ÿéš›ã€å…¥ç¤¾ã—ã¦äºŒæ—¥ç›®ã§è‡ªåˆ†ã®ãƒ¡ãƒ³ã‚¿ãƒ¼ãŒç•°å‹•ã—ã¦ãƒãƒ¼ãƒ ã‹ã‚‰å±…ãªããªã‚Šã¾ã—ãŸã€‚ãƒ¯ãƒ­ã‚¿ã€ãã‚“ãªã®ã£ã¦ã‚¢ãƒªï¼ï¼Ÿï¼‰note.comãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®åƒãæ–¹ã¯ã€ç¾åœ¨å¤šæ§˜ãªçµŒé¨“ã‚’ç©ã‚“ã§å¼•ãå‡ºã—ã‚’å¢—ã‚„ã—ãŸãæ„Ÿã˜ã¦ã„ã‚‹è‡ªåˆ†ã«ã¨ã£ã¦ãƒãƒƒãƒã—ãã†ã§ã™ã€‚ will/can/must ãŒãƒãƒƒãƒã—ãã†ãªç’°å¢ƒã«èº«ã‚’ç½®ãã€åˆ¥ã®é“ãŒã‚ã‚Œã°åˆ¥ã®ãƒ­ãƒ¼ãƒ«ã‚’æ¢ã™ã“ã¨ã‚‚ã§ããã†ã§ã™ã€‚ã“ã‚Œã ã‘è¨€ã†ã¨å…¼å‹™ã«è¿‘ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ãªã‚Šã¾ã™ãŒã€ Ubie ã®ãƒ›ãƒ©ã‚¯ãƒ©ã‚·ãƒ¼ã§ã¯ãƒ­ãƒ¼ãƒ«ã‚’ç©æ¥µçš„ã«æŠœã‘ã¦ã„ãæƒ³å®šã§ã‚‚ã‚ã‚Šã€æ©Ÿå‹•åŠ›é«˜ãå‹•ã„ã¦ã„ã‘ãã†ã§ã™ã€‚ã•ã¦ä¸€é¢¨å¤‰ã‚ã£ãŸãã‚“ãªçµ„ç¹”ã«ã‚¸ãƒ§ã‚¤ãƒ³ã—ã¦ä¸€ãƒ¶æœˆã€‚ç¾åœ¨ã¯ã€Œç”Ÿæ´»è€…ã¨ã‹ã‹ã‚Šã¤ã‘åŒ»ã‚’ã¤ãªãã€ç‚ºã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºã®ãŸã‚ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦å‹•ãåˆã‚ã¦ã„ã¾ã™ã€‚å…ˆæ—¥æ–°ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã™ã‚‹ãƒ—ãƒ¬ã‚¹ã‚‚æ‰“ãŸã‚Œã¾ã—ãŸã€‚prtimes.jpé–¢ã‚ã‚‹æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã¨ã—ã¦ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ React(Next.js), TypeScript ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ã¯ Kotlin, Spring Boot, GraphQL ãªã©ã§ã€æ­£ç›´ã»ã¨ã‚“ã©è§¦ã£ãŸã“ã¨ãªã„ï¼ˆç‰¹ã« TypeScript ã¯å…¥ç¤¾ã¾ã§è§¦ã£ãŸã“ã¨ãŒå…¨ããªã‹ã£ãŸï¼‰è¦ç´ ã°ã‹ã‚Šã§ã™ã€‚ã—ã‹ã—ã“ã‚Œã‚‚ã¾ãŸè‰¯ã„åˆºæ¿€ã§ã‚ã‚Šã‚³ãƒ³ãƒ•ã‚©ãƒ¼ãƒˆã‚¾ãƒ¼ãƒ³ã‹ã‚‰ã®è„±å‡ºãŒæ—ã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ã¾ã ã¾ã ãƒãƒªãƒãƒªã®ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã§ã‚ã‚‹è‡ªåˆ†ãŒå…¥ç¤¾ã—ãŸæ™‚ç‚¹ã§ç¤¾å“¡æ•°ã¯ 100 åè¶…ãã‚‰ã„ã§ã—ãŸã€‚ãã®ä¸­ã§ã‚‚ Web å‘¨ã‚Šã‚’è§¦ã£ã¦ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«é™å®šã™ã‚‹ã¨ 15 åã»ã©ã¨å°‘æ•°ç²¾é‹­éƒ¨éšŠã«ãªã£ã¦ã„ã¾ã™ã€‚Ubie ã‚‚ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒå°‘ã—ãšã¤å¢—ãˆã¦ããŸã‚“ã§ã™ãŒã€SWE ã«çµã‚‹ã¨ä»Šã ã«15äººãã‚‰ã„ã—ã‹ã„ãªã„çŠ¶æ³ã§ã™...ä¸–ç•Œã«ç¾½ã°ãŸããƒ˜ãƒ«ã‚¹ã‚±ã‚¢ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’ä½œã‚ŠãŸã„æ–¹çµ¶è³›å‹Ÿé›†ã—ã¦ã„ã‚‹ã®ã§å¿œå‹Ÿã—ã¦ãã ã•ã„ï¼https://t.co/gezcIyiibzâ€” ä¹…ä¿ æ’å¤ª / Ubie CEO (@quvo_ubie) 2021å¹´7æœˆ6æ—¥  twitter.comã¨ã„ã†ã“ã¨ã¯å€‹ã€…äººã‚„ã‚Œã‚‹ã“ã¨ã‚„ã‚„ã‚‹ã¹ãã“ã¨ã¯ç„¡é™ã«ã‚ã‚‹ã‚ã‘ã§ã™ã€‚æˆé•·ã§ãã‚‹è¦ç´ ã—ã‹ãªã„ã—ã€ã“ã®ãƒ•ã‚§ãƒ¼ã‚ºã®é›°å›²æ°—ã‚’å‘³ã‚ãˆã‚‹ã“ã¨ã¯éå¸¸ã«ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸä¼šç¤¾ã®è¦æ¨¡ã¨äº‹æ¥­ã®ãƒ•ã‚§ãƒ¼ã‚ºã‚‚æ‰‹ä¼ã£ã¦ã‹ç‡ç›´ã‹ã¤å»ºè¨­çš„ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚æ ¹å›ã—ã‚„ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªãƒãƒ£ãƒƒãƒˆãªã©ç¤¾å†…æ”¿æ²»ã‚’é¿ã‘ã€ã‹ã¤åŒåƒšã«ãƒ©ãƒ•ã«ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–ã‚‹ä½“åˆ¶ã¯ã€è‡ªåˆ†ã«ã¯å¿«ãæ„Ÿã˜ã‚‹ã«åŠ ãˆã¦ãƒãƒªãƒãƒªã®æˆé•·é€”ä¸­æ„Ÿã‚’è¦šãˆã•ã›ã‚‹ã‚‚ã®ã«ãªã£ã¦ã„ã¾ã™ã€‚ãŠã‚ã‚Šã«ã¨ã„ã†ã‚ã‘ã§ã€ãƒ¡ãƒ«ã‚«ãƒªãƒ»ãƒ¡ãƒ«ãƒšã‚¤ã« 3 å¹´ 10 ãƒ¶æœˆåœ¨ç±ã—ã¾ã—ãŸã‚¹ã‚­ãƒ«ã‚„çµŒé¨“ã®å¹…ã‚’æŒãŸã›ãŸã„ã‚µãƒ¼ãƒ“ã‚¹åˆæœŸã®é›°å›²æ°—ã‚’ã¾ãŸå‘³ã‚ã„ãŸãã¦è»¢è·Ubie ã«å…¥ç¤¾ã—ã¦ SWE ã¨ã—ã¦åƒãå‡ºã—ã¦ä¸€ãƒ¶æœˆçµŒéã—ã¾ã—ãŸã¨ã„ã†ãŠè©±ã§ã—ãŸã€‚ä»Šå¾Œã¨ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ã¾ãŸæœ¬è¨˜äº‹ãŒãªã«ã‹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚ã‚‚ã—æœ¬è¨˜äº‹ã‚’é€šã—ã¦ Ubie ã«ã”èˆˆå‘³ã‚’æŒã£ã¦ã„ãŸã ã‘ãŸæ–¹ãŒã„ã‚‰ã£ã—ã‚ƒã„ã¾ã—ãŸã‚‰ã€æ¡ç”¨ãƒšãƒ¼ã‚¸ã‚ã‚‹ã„ã¯åƒ•ã«ç›´æ¥ã”é€£çµ¡ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ï¼ã‚ã‚“ã¾ã‚Šèˆˆå‘³ã‚’æŒã£ãŸè¨³ã˜ã‚ƒãªãã¦æœ€è¿‘ã©ã†ãªã®ï¼Ÿã£ã¦è©±ã§ã‚‚æŒ¯ã£ã¦é ‚ã‘ã‚‹ã¨å–œã³ã¾ã™ã€‚å…ˆè¿°ã®é€šã‚Š Ubie ã§ã¯ã¾ã ã¾ã ãƒ¡ãƒ³ãƒãƒ¼ã‚’å‹Ÿé›†ã—ã¦ãŠã‚Šã€æ›´ã«ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºã‚’é‚é€²ã—ã¦ã„ããŸã„çŠ¶æ³ã§ã™ã€‚SRE ã‚„ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã¤ã„ã¦ã¯å›ºæœ‰ã® JD ãŒã‚ã‚Šã€recruit.ubie.liferecruit.ubie.lifeWeb å‘¨ã‚Šè§¦ã£ã¦ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼ˆåƒ•ã®ä»Šã®æœ¬æ¥­ã¯ã“ã“ï¼‰ã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰ã«ãªã‚Šã¾ã™ã€‚recruit.ubie.life","link":"https://syucream.hatenablog.jp/entry/2021/08/04/125435","isoDate":"2021-08-04T03:54:35.000Z","dateMiliSeconds":1628049275000,"authorName":"syucream","authorId":"syucream"},{"title":"æŠ€è¡“æ›¸å…¸9ã§ã€ŒApache Parquet ã¦ã‚™ã¯ã—ã‚™ã‚ã‚‹å¿«é© ãƒ†ã‚™ãƒ¼ã‚¿åˆ†æã€ã‚’å‡ºã—ã¾ã™","contentSnippet":"æŠ€è¡“æ›¸å…¸9 ã§ã€ŒApache Parquet ã¦ã‚™ã¯ã—ã‚™ã‚ã‚‹å¿«é© ãƒ†ã‚™ãƒ¼ã‚¿åˆ†æã€ã‚’å‡ºã—ã¾ã™ã€‚ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ãŠæ‰‹ã«ã¨ã£ã¦ã„ãŸã ã‘ã‚Œã°å¹¸ã„ã§ã™ã€‚ã¾ã‚ä»Šå›ã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³é–‹å‚¬ã§é›»å­æ›¸ç±ã®ã¿ã®é…å¸ƒãªã®ã§ã€ç‰©ç†çš„ã«ãŠæ‰‹ã«å–ã‚Œãªã„ã‚“ã§ã™ã‘ã©ã­ã€œï¼æœ¬æ›¸ã¯ Apache Parquet ã«ã¤ã„ã¦ã¤ã‚‰ã¤ã‚‰ã¨ç´¹ä»‹è¨˜äº‹ã‚’æ›¸ã„ãŸå†…å®¹ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸä»˜éŒ²çš„ã«åŒã‚µãƒ¼ã‚¯ãƒ«ãƒ¡ãƒ³ãƒãƒ¼è‘—ã€ŒUSB ãƒ†ã‚™ãƒã‚™ã‚¤ã‚¹ã‚’ä½œã‚‹ã®ã‹ã‚™ãƒ„ãƒ©ã„ã€ã¨ã„ã†ãƒ†ãƒ¼ãƒã®è¨˜äº‹ã‚‚æ²è¼‰ã—ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿åˆ†ææ¥­å‹™ã«ãƒ ãƒƒãƒãƒ£é–¢ã‚ã‚‹ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆã‚’æœ€é©åŒ–ã—ãŸã„ã€ BigQuery ãªã©ã®ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ—¥å¸¸çš„ã«ã¤ã‹ã†ã€ãªã‚“ã¨ãªãæ°—ã«ãªã£ãŸã€ã‚ˆã†ãªäººã€…ã«åŠ¹æœçš„ã ã¨æ€ã„ã¾ã™ã€‚ä»¥ä¸Šã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ç›®æ¬¡:ç¬¬1ç«  Apache Parquet ã¦ã‚™ã¯ã—ã‚™ã‚ã‚‹å¿«é©ãƒ†ã‚™ãƒ¼ã‚¿åˆ†æ 51.1 ã¯ã—ã‚™ã‚ã« .................................. 5 ãƒ¬ã‚³ãƒ¼ãƒˆã‚™æŒ‡å‘ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ã¯? ..................... 6 ã‚«ãƒ©ãƒ ãƒŠãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ã¯? ....................... 8 ãƒ¬ã‚³ãƒ¼ãƒˆã‚™æŒ‡å‘ã¨ã‚«ãƒ©ãƒ ãƒŠã€OLTPã¨OLAP ............... 10 ã‚«ãƒ©ãƒ ãƒŠãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å®Ÿè£…ä¾‹ ...................... 111.2 ApacheParquetã¨ã¯ãªã«ã‹........................ 11 ä¸¦åˆ—èª­ã¿æ›¸ãå‡¦ç†åŒ–ã—ã‚„ã™ã„ãƒã‚™ã‚¤ãƒŠãƒªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ............. 12 ã‚¹ã‚­ãƒ¼ãƒã‹ã‚™è‡ªå·±è¨˜è¿°çš„ ........................... 15 ã‚·ãƒ³ãƒ•ã‚šãƒ«ã¦ã‚™æŸ”è»Ÿæ€§ã®ã‚ã‚‹å‹è¡¨ç¾ ...................... 15 ãƒã‚¹ãƒˆã•ã‚ŒãŸã‚«ãƒ©ãƒ ã‚„ç¹°ã‚Šè¿”ã—ã•ã‚Œã‚‹ã‚«ãƒ©ãƒ ã«å¯¾ã—ã¦ã‚‚æœ‰åŠ¹ . . . . . . . 16 å¤šæ§˜ãªã‚¨ãƒ³ã‚³ãƒ¼ãƒˆã‚™æ–¹æ³• ........................... 26 è±Šå¯Œãªåœ§ç¸®ã‚³ãƒ¼ãƒ†ã‚™ãƒƒã‚¯ã‚’é¸æŠå¯èƒ½ ..................... 31 ãƒ¡ã‚¿ãƒ†ã‚™ãƒ¼ã‚¿ã‚’é§†ä½¿ã—ãŸã‚¯ã‚¨ãƒªæœ€é©åŒ–ã‹ã‚™å¯èƒ½ ................ 321.3 ApacheParquetå®Ÿè£…ä¾‹ .......................... 33 parquet-mr................................. 33 ApacheArrowC++å®Ÿè£…......................... 34 Goã«ãŠã‘ã‚‹å®Ÿè£…ä¾‹............................. 341.4 å®Ÿéš›ã«ä½¿ã£ã¦ã¿ã‚‹ ............................. 35 Parquetãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ã¿ã‚‹ ..................... 35 Parquetãƒ•ã‚¡ã‚¤ãƒ«ã«Athenaã‹ã‚‰ã‚¯ã‚¨ãƒªã—ã¦ã¿ã‚‹ . . . . . . . . . . . . 391.5 å®Ÿéš›ã®é‹ç”¨................................. 42 Parquet ã¦ã‚™å®Ÿéš›ã¨ã‚™ã‚Œãã‚‰ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚¹ã‚™ã‹ã‚™å‰Šæ¸›ã•ã‚Œã‚‹ã®ã‹? . . . . . 42 RowGroupã¨Pageã®ã‚µã‚¤ã‚¹ã‚™ã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚¯ã‚™ .............. 42 é•·æœŸãƒ­ã‚¯ã‚™ä¿å­˜ã«ãŠã‘ã‚‹ã‚³ã‚¹ãƒˆå‰Šæ¸›ã«å¯„ä¸ã¦ã‚™ãã‚‹ .............. 42 ã‚¹ãƒˆãƒªãƒ¼ãƒ å‡¦ç†ã«çµ„ã¿è¾¼ã‚€é›£ã—ã•ã‚’è€ƒæ…®ã™ã‚‹ ............... 43 SELECT*ã«å¼±ã„............................. 44 1.6 ãŠã‚ã‚Šã« .................................. 45ä»˜éŒ² AA.1 ã¯ã—ã‚™ã‚ã« .................................. 46A.2 USBé€šä¿¡ãƒ•ã‚šãƒ­ãƒˆã‚³ãƒ«æ¦‚è¦ ......................... 46A.3 USBãƒ†ã‚™ãƒã‚™ã‚¤ã‚¹ã®è¨­è¨ˆæ–¹é‡ ......................... 48A.4 USBãƒ†ã‚™ãƒã‚™ã‚¤ã‚¹ã‹ã‚™å‹•ãã¾ã¦ã‚™ ......................... 49A.5 USBã®æ¶ˆè²»é›»åŠ›è¦æ ¼............................ 50A.6 åœ°ç„ã®ãƒã‚¤ã‚¹ã‚™è€æ€§è©¦é¨“ ........................... 50ãƒˆã‚¯ã‚™ãƒ«ãƒ’ã‚™ãƒƒãƒˆä¸ä¸€è‡´ ............................ 51å®‰ç‰©ã®ãƒãƒ•ã‚™ã‹ã‚™...... ............................. 52A.7 ã¾ã¨ã‚ ................................... 52ã‚ã¨ã‹ã‚™ã54USB ãƒ†ã‚™ãƒã‚™ã‚¤ã‚¹ã‚’ä½œã‚‹ã®ã‹ã‚™ãƒ„ãƒ©ã„ 46@syu_cream .................................... 54 @lunatic_star ................................... 54","link":"https://syucream.hatenablog.jp/entry/2020/09/08/225620","isoDate":"2020-09-08T13:56:20.000Z","dateMiliSeconds":1599573380000,"authorName":"syucream","authorId":"syucream"},{"title":"Data Mesh ã®è¨˜äº‹ã‚’èª­ã‚“ã ","contentSnippet":"ä¸€å¹´ä»¥ä¸Šå‰ã®è¨˜äº‹ã ã‘ã©ã€ https://martinfowler.com/ ã« \"Data Mesh\" ã‚’ã†ãŸã†è¨˜äº‹ãŒã‚ã£ãŸã®ã§è»½ãèª­ã¿ã¾ã—ãŸã€‚martinfowler.comã“ã¡ã‚‰ã«æ—¥æœ¬èªã§æ¦‚è¦ã‚’ã¾ã¨ã‚ãŸè¨˜äº‹ã‚‚ã‚ã‚Šã”ä¸€èª­ã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚åƒ•ã®å€‹äººãƒ–ãƒ­ã‚°ã‚’è¦‹ã‚‹ã‚ˆã‚Šç¢ºå®Ÿã§è‰¯ã„æƒ…å ±ã‚’å¾—ã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚https://www.infoq.com/jp/news/2020/03/distributed-data-mesh/ä»¥ä¸‹ã§ã¯ç¾è¡Œã®ã¼ãã®æ¥­å‹™ã¨ç…§ã‚‰ã—åˆã‚ã›ã¦ã€ Data Mesh ã«ã¤ã„ã¦å€‹äººçš„è§£é‡ˆãªã©ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚Current status ...äºŒå¹´ãã‚‰ã„å‰ã« builderscon ã§ \"ãƒ¡ãƒ«ãƒšã‚¤ã«ãŠã‘ã‚‹ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«å¯„ã‚Šæ·»ã†ãƒ­ã‚°åé›†åŸºç›¤\" ã¿ãŸã„ãªã‚¿ã‚¤ãƒˆãƒ«ã§ LT ã§ç™ºè¡¨ã—ãŸã‚Šã—ã¾ã—ãŸã€‚å½“æ™‚ã€æ€¥é€Ÿã«é–‹ç™ºã•ã‚Œã‚‹ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ç¾¤ã¨å…ƒã‹ã‚‰å­˜åœ¨ã—ãŸãƒ¢ãƒãƒªã‚¹ãªã‚·ã‚¹ãƒ†ãƒ ã«ç‰¹åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿åŸºç›¤ãŒå­˜åœ¨ã—ã€ã€Œãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã—ãŸã‚‰åˆ†æç­‰ã®ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã©ã†ãªã‚“ã®ï¼Ÿï¼Ÿï¼Ÿã€ã¨æ¼ ç„¶ã¨ã—ãŸèª²é¡Œæ„Ÿã¯ã‚ã‚‹ã‚‚ã®ã®èª°ã‚‚ç­”ãˆã‚’è¦‹å‡ºã ã›ã¦ã„ãªã„çŠ¶æ³ã§ã—ãŸã€‚ speakerdeck.comãã“ã‹ã‚‰äºŒå¹´ã‚‚çµŒéã™ã‚‹ã¨å¼Šãƒ‡ãƒ¼ã‚¿åŸºç›¤ã‚‚è‰²ã€…ã¨ã‚ã‚Šã€ä¸Šè¨˜ã«æŒ™ã’ãŸ batch/streaming ãã‚Œãã‚Œã®è¦ä»¶ã«ç‰¹åŒ–ã—ãŸä»•çµ„ã¿ã‚’ä½œã£ãŸã‚Šåˆ·æ–°ã—ãŸã‚Šã€å…¬é–‹ã—ã¦ã„ãªã„ã¾ãŸåˆ¥ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ãŸã‚Šã¨ã‹ã—ã¦ã„ã¾ã—ãŸã€‚ï¼ˆãã®è¾ºã®æœ€è¿‘ã®è©±ã‚‚åˆ¥é€”å…¬é–‹ã—ã¦ã„ã‘ã‚Œã°ã¨æ€ã£ã¦ã„ã¾ã™ï¼‰ã“ã®äºŒå¹´ã§ç™ºç”Ÿã—ãŸå¤§ããªå¤‰åŒ–ã¨ã—ã¦ã¯ã€ä»¥ä¸‹ã®è¾ºã‚ŠãŒæŒ™ã’ã‚‰ã‚Œã‚‹ã‹ã¨æ€ã„ã¾ã™ãƒ“ã‚¸ãƒã‚¹ã®ã‚¹ã‚±ãƒ¼ãƒ«ã«å¯¾ã—ã¦è‡ªåˆ†ãŒèªçŸ¥ã§ãã‚‹ç¯„å›²ãŒè¿½ã„ã¤ã‹ãªããªã£ãŸãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚€ã£ã¡ã‚ƒå¢—ãˆãŸã€‚ä¿ºã¯æ•°ãˆã‚‹ã®ã‚’ã‚„ã‚ãŸãƒ‡ãƒ¼ã‚¿ã®è¦ä»¶ã‚‚å¤šç¨®å¤šæ§˜ã«ãªã£ãŸã€‚ç¨®é¡ã«ã‚ˆã‚‹ã¨ã“ã‚ã‚„æ€§èƒ½è¦ä»¶ãªã©ã“ã®è¾ºã‚Šã®ç…½ã‚Šã‚’å—ã‘ã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿åŸºç›¤ã‚‚ã“ã®ã‚ˆã†ãªå¤‰åŒ–ã«è¿½å¾“ã§ããªã‘ã‚Œã°çµ„ç¹”ã®ä¸­ã§ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«ãªã‚Šã‹ã­ãªã„ãªã¨ã„ã†å±æ©Ÿæ„Ÿã‚’è¦šãˆã¦ã„ã¾ã™ã€‚Data Mesh ã®è©±ã¨ã„ã†å€‹äººçš„æŒ¯ã‚Šè¿”ã‚Šã‚’ã—ã¤ã¤å…ƒè¨˜äº‹ã®è©±é¡Œã«ç§»ã‚Šã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿åŸºç›¤å‰å²ã¨ã«ã‹ãæˆ‘ã€…ã¯ã€Œã‚µã‚¤ãƒ­åŒ–ã€ã¨ã„ã†è¨€è‘‰ã‚’å¥½ã‚“ã§ä½¿ã„ã€æ‰“ã¡å€’ã™ã¹ãæ•µã¿ãŸã„ã«æ‰±ã„ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã®ã‚µã‚¤ãƒ­åŒ–ã‚‚ãã®ã‚„ã‚Šç‰ã«æŒ™ãŒã‚Šã€çµ„ç¹”ã‚„ã‚·ã‚¹ãƒ†ãƒ é–“ã§ãƒ‡ãƒ¼ã‚¿é€£æºãŒã§ããšã«åˆ†æåŸºç›¤ã§ã†ã¾ãæ‰±ãˆãªã„èª²é¡Œã‚’æŒ‡æ‘˜ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã«å¯¾ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ã‚„ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã¿ãŸã„ãªä¸€å…ƒçš„ã«ãƒ‡ãƒ¼ã‚¿ãŒç®¡ç†å¯èƒ½ãªå…¥ã‚Œç‰©ã‚’ç”¨æ„ã—ã¦ã€ã¨ã‚Šã‚ãˆãšãã“ã«ãƒ‡ãƒ¼ã‚¿ã‚’çªã£è¾¼ã‚€é“è·¯ã‚’èˆ—è£…ã—ã¦åˆ†ææ¥­å‹™ã‚’å›ã™ã¿ãŸã„ãªè§£ãŒå–ã‚‰ã‚Œã¦ããŸã¨æ€ã„ã¾ã™ã€‚Data Mesh ã®è¨˜äº‹ã§ã¯ã“ã®ã‚ˆã†ãªä¸€å…ƒçš„ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å‰ä¸–ä»£çš„ãªã‚‚ã®ã¨ä½ç½®ä»˜ã‘ã¦ã„ã¾ã™ã€‚ä¸­å¤®é›†æ¨©çš„ãªãƒ‡ãƒ¼ã‚¿åŸºç›¤ã¯å…¨ä½“æœ€é©åŒ–ã«ã¯è‰¯ã„ã‘ã‚Œã©ã€å€‹åˆ¥ã®é«˜åº¦ãªè¦ä»¶ã‚’æº€ãŸã™ã®ãŒé›£ã—ããªã‚Šã¾ã™ã€‚ã¾ãŸãƒ‡ãƒ¼ã‚¿åŸºç›¤ã¯ãƒ‡ãƒ¼ã‚¿ã® producer / consumer ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã«æ²¿ã£ãŸä¸Šæµãƒ»ä¸‹æµã®æ§‹å›³ã‚’ä½œã‚ŠãŒã¡ã§ã™ã€‚ã‚“ã§ã€ consumer ãŒè¦ä»¶ã‚’æº€ãŸã—ãŸã„å ´åˆä¸Šæµã«é¡ã‚Šã¤ã¤ãƒ‡ãƒ¼ã‚¿åŸºç›¤å±‹ã•ã‚“ã«ã‚‚ç›¸è«‡ã™ã‚‹ã‚ˆã†ãªä¾å­˜é–¢ä¿‚ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚ã•ã‚‰ã«ãã†ã—ãŸæ§‹å›³ãŒç”Ÿã¾ã‚Œã‚‹ã¨ä¸­æµã«ä½ç½®ã™ã‚‹ãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®ãƒãƒ¼ãƒ ã¯æ™‚ã¨ã—ã¦ producer/consumer ã®ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã®æŒ¯ã‚‹èˆã„ã‚’è¡Œãˆã‚‹ãƒ¡ãƒ³ãƒãƒ¼ãŒã©ã‚Œã ã‘ç¢ºä¿ã§ãã‚‹ã§ã—ã‚‡ã†ã‹ãƒ»ãƒ»ãƒ»ã€‚å€‹äººçš„ã«ã¯ã“ã†ã—ãŸãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®ãƒ¢ãƒãƒªã‚¹åŒ–ã¯ãªã‚“ã‚‰ä¸æ€è­°ã§ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚BigQuery ã¯ã˜ã‚ã¨ã—ãŸä¾¿åˆ©ãªãƒ‡ãƒ¼ã‚¿åŸºç›¤ã«ä½¿ãˆã‚‹ã‚·ã‚¹ãƒ†ãƒ ãŒå°é ­ã—ã¦ãã¦ã¯ã„ã¾ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®é ˜åŸŸã¯æœªã è·äººèŠ¸ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹é ˜åŸŸã§ã‚ã‚Šã€ãã‚Œã«ç‰¹åŒ–ã—ãŸã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆãŒåŸºç›¤æ§‹ç¯‰ã‚’è¡Œã†ã®ã¯è‡ªç„¶ã‹ãªã¨ã€‚ã¾ãŸãƒ‡ãƒ¼ã‚¿åŸºç›¤æ§‹ç¯‰ã«ã‚ãŸã‚Šã€ã¾ãšãƒ‡ãƒ¼ã‚¿ã‚’ä¸€å®šæ•°æƒãˆãªã„ã¨ãƒãƒªãƒ¥ãƒ¼ã‚’å‡ºã—ã«ãã„ã§ã—ã‚‡ã†ã‹ã‚‰ producer ã«å¯„ã£ãŸæœ€é©åŒ–ã‚’ã—ã¦ã€Œã¨ã‚Šã‚ãˆãšãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã‚‹ã€ã€Œãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ã«çªã£è¾¼ã‚“ã§ã‹ã‚‰å¾Œã®ã“ã¨ã‚’è€ƒãˆã‚‹ã€ã®ã¯ç†ã«ã‹ãªã£ã¦ã„ã‚‹ã¨è€ƒãˆã¾ã™ã€‚ã¨ã¯ã„ãˆãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®åˆ©ç”¨è€…ãŒå¢—ãˆã¦ã€ consumer ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’èãå§‹ã‚ã‚‹ã¨è‹¦ã—ã¿ãŒç”Ÿã¾ã‚Œå§‹ã‚ã‚‹ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚è‡ªåˆ†ã®å®Ÿä½“é¨“ã¨ã—ã¦ã‚‚ã€é»™ã£ã¦ã¦ã‚‚ãƒ‡ãƒ¼ã‚¿åŸºç›¤ãŒãƒ¯ãƒ¼ã‚¯ã™ã‚‹ã‚±ãƒ¼ã‚¹ã¨ã„ã†ã®ã¯ producer ã¨ consumer ãŒåŒä¸€ã®ãƒãƒ¼ãƒ ã‹ã‚ã¾ã‚Šè·é›¢ãŒé ããªã„ãƒãƒ¼ãƒ ã®ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã‚ˆã†ãªæ°—ã‚‚ã—ã¦ã„ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ¡ãƒƒã‚·ãƒ¥ã«ã™ã‚‹ã“ã®è¨˜äº‹ã«ãŠã‘ã‚‹å‰ä¸–ä»£çš„ãªãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®èª²é¡Œã®è§£æ±ºæ–¹æ³•ã¯ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã•ãªãŒã‚‰ãƒ¢ãƒãƒªã‚¹ã®åˆ†è§£ã ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒƒã‚·ãƒ¥ã®ä¸–ç•Œã§ã¯ä¸€å…ƒçš„ã§ãƒ¢ãƒãƒªã‚¹ãªãƒ‡ãƒ¼ã‚¿åŸºç›¤ã¯å­˜åœ¨ã›ãšã€ä»£ã‚ã‚Šã«åºƒãä½¿ã‚ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒ•ãƒ©ã‚’è¦‹ã‚‹ãƒãƒ¼ãƒ ã¨åˆ†æ•£ã—ãŸãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã¾ãŸæ˜ç¢ºãª producer ã¨ consumer ã¨ã„ã†ç«‹å ´ã‚’ç”Ÿã˜ã•ã›ãšã€å„ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒãƒ¼ãƒ ãŒãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã‚‚è¡Œã„ç›¸äº’ã«ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚åˆ†æ•£ã™ã‚‹ã“ã¨ã§å‰è¿°ã®ã‚µã‚¤ãƒ­åŒ–å•é¡ŒãŒå†ç†±ã—ãã†ã§ã™ãŒã€æ¨ªæ–­çš„ãªãƒ‡ãƒ¼ã‚¿ã‚¬ãƒãƒŠãƒ³ã‚¹ã®ä»•çµ„ã¿ã‚„ã‚»ãƒ«ãƒ•ã‚µãƒ¼ãƒ–å¯èƒ½ãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚’å°å…¥ã—ã¦ã„ãã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒƒã‚·ãƒ¥ã®æ€æƒ³ã¯æœ¬è³ªçš„ã«ã¯æ¨©é™ã‚„è²¬å‹™ã®ç§»è­²ã¨ã€ãƒ‡ãƒ¼ã‚¿åŸºç›¤ãŒçœŸã«åŸºç›¤ã‚‰ã—ãæŒ¯ã‚‹èˆã†ãŸã‚ã®ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ã‚·ãƒ•ãƒˆã‚’èµ·ã“ã™ã“ã¨ã ã¨è€ƒãˆã¾ã™ã€‚å‰è€…ã®æ€æƒ³ã¯ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã‚ˆããªã˜ã¿ã€ãƒ‡ãƒ¼ã‚¿ã® producer ãŒãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚‹ãªã‚‰ã°ãã®å»¶é•·ã§ãƒ‡ãƒ¼ã‚¿ã‚‚æ‰±ãˆã‚Œã°ã„ã„ã ã‘ã§ã—ã‚‡ã†ã€‚ãƒ‡ãƒ¼ã‚¿åŸºç›¤ãŒåŸºç›¤æœ¬æ¥ã®ä»•äº‹ã«é›†ä¸­ã™ã‚‹ã®ã‚‚é‡è¦ãªã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã® producer / consumer ãŒå¢—ãˆã‚‹ã«ã¤ã‚Œç„¡é™ã«ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ãªã‚‰çµ„ç¹”ã®ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¯æ­»ã‚“ã§ã„ãã—ã€åŒæ§˜ã®æŒ¯ã‚‹èˆã„ãŒã§ãã‚‹ãƒ¡ãƒ³ãƒãƒ¼ã‚’æ¢ã™ã®ãŒå›°é›£ã«ãªã£ã¦ãã‚‹ã¨æ€ã„ã¾ã™ã€‚ã¼ãã®æ‰€å±ã™ã‚‹çµ„ç¹”ã§ã¯ Microservices Platform ãƒãƒ¼ãƒ ã¨ã„ã†ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ”¯ãˆã‚‹åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹ãƒãƒ¼ãƒ ãŒå­˜åœ¨ã—ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹ç™ºé‹ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šå…±é€šèª²é¡Œã¨ãªã‚‹ Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ã‚„ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æä¾›ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«è¿‘ãå„ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒãƒ¼ãƒ ãŒãƒ‡ãƒ¼ã‚¿ã«ã¾ã¤ã‚ã‚‹èª²é¡Œã‚’è§£ããŸã‚ã®å…±é€šåŸºç›¤ã‚’æä¾›ã—ã¦ã‚»ãƒ«ãƒ•ã‚µãƒ¼ãƒ–å¯èƒ½ã«ã—ã¦ã€ã—ã‹ã—è‡ªèº«ã¯èª²é¡Œã‚’è§£ãä¸»å½¹ã«ã¯ãªã‚‰ãªã„ãã‚‰ã„ã®ãƒãƒ©ãƒ³ã‚¹ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚tech.mercari.comãã†ç†æƒ³ã¯è¨€ã£ã¦ã‚‚ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒƒã‚·ãƒ¥ã®ä¸–ç•Œè¦³ã«æ²¿ã†ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ãŒç„¡ã„ã¨ã“ã®ç†æƒ³çš„ä¸–ç•Œã«è¿‘ã¥ãã“ã¨ã¯ã‹ãªã‚ãªã„ã§ã—ã‚‡ã†ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒƒã‚·ãƒ¥ã®è¨˜äº‹ã§ã¯ç‰¹ã« GCP ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«ã¤ã„ã¦ã€ä¸€å…ƒçš„ãªãƒ‡ãƒ¼ã‚¿ã‚¬ãƒãƒŠãƒ³ã‚¹ãªã‚‰ Google Cloud DataCatalog ãŒã€ãƒãƒƒãƒãƒ»ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã«ã¯çµ±åˆçš„ã«æ‰±ãˆã‚¤ãƒ³ãƒ•ãƒ©ãŒãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãª Google Cloud Dataflow ãŒã‚ã‚‹ã¨æŒ™ã’ã¦ã„ã¾ã™ã€‚ã¾ãŸç­†è€…ã®çµŒé¨“ã§ã¯ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒƒã‚·ãƒ¥ã®ä¸–ç•Œè¦³ã§ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯çš„ãªãƒã‚¸ã‚·ãƒ§ãƒ³ã¨ã—ã¦ GCS ã‚’ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã”ã¨ã« bucket ã‚’ä½œæˆã—ã¦åˆ©ç”¨ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã¨ã—ã¦ BigQuery ã‚’ä½¿ã†ã®ã‚‚ã‚ã‚Šã‹ã¨è€ƒãˆã¾ã™ã€‚ç‰¹ã« BigQuery ã¯ GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒç•°ãªã£ã¦ã„ã¦ã‚‚å‚ç…§ã™ã‚‹æ¨©é™ãŒã‚ã‚Œã° JOIN ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒƒã‚·ãƒ¥ã®ã‚ˆã†ãªè«–ç†çš„ã«ã¯åˆ†æ•£ã—ãŸãƒ‡ãƒ¼ã‚¿åŸºç›¤ã‚’å®Ÿç¾ã™ã‚‹ã®ã«ãƒãƒƒãƒã™ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã¾ã™ã€‚Data Mesh ã¨ä¿ºã‚»ãƒ«ãƒ•ã‚µãƒ¼ãƒ–å¯èƒ½ãªåŸºç›¤ã‚’ç›®æŒ‡ã—ã¦ãªã‚‹ã¹ããƒ‡ãƒ¼ã‚¿åŸºç›¤ãŒãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã‚’æŠ±ãˆè¾¼ã¾ãšã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹æ€æƒ³ã¯é‡è¦ã ã¨æ„Ÿã˜ã¾ã™ã€‚å‰ä¸–ä»£çš„ãªï¼ˆã¨è¨€ã‚ã‚Œã¦ã—ã¾ã£ãŸï¼‰ãƒ‡ãƒ¼ã‚¿åŸºç›¤ã§ã¯ producer/consumer ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚å¢—ãˆã¦ã€ãã®é–“ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ‡ãƒ¼ã‚¿åŸºç›¤ãŒå…¥ã‚‹ã“ã¨ã§ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’ç”Ÿã‚€ã“ã¨ã«ãªã‚Šã‹ã­ã¾ã›ã‚“ã€‚ã‚»ãƒ«ãƒ•ã‚µãƒ¼ãƒ–å¯èƒ½ã§ã‚ã‚Œã°ã‚ã‚‹ç¨‹åº¦ã€Œå‹æ‰‹ã«ã‚„ã£ã¦ãã‚Œã€ã¨ã„ãˆã‚‹é ˜åŸŸãŒå¢—ãˆã¦ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ãŒè§£æ¶ˆã•ã‚Œã¦ã‚†ãã€ãƒ‡ãƒ¼ã‚¿åŸºç›¤ãƒãƒ¼ãƒ ã¯ã‚ˆã‚ŠåŸºç›¤ã®ä½œã‚Šè¾¼ã¿ã«é›†ä¸­ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚ã¨ã¯ã„ãˆã“ã‚Œã‚’æœ€åˆæœŸã‹ã‚‰ã‚´ãƒ¼ãƒ«ã«æ®ãˆã‚‹ã®ã‚‚éª¨ãŒæŠ˜ã‚Œã‚‹ä½œæ¥­ã§ã‚ã‚‹ã¨æ€ã†ã®ã§ã€æ®µéšçš„ã«åˆ†æ•£å¯èƒ½ã«ã—ã¦ã„ãã®ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚æœ€è¿‘ã§ã¯å¼Šãƒãƒ¼ãƒ ã§ã‚‚ã‚»ãƒ«ãƒ•ã‚µãƒ¼ãƒ–ãƒ»åˆ†æ•£ç®¡ç†å¯èƒ½ãªè¨­è¨ˆã«ã—ã¤ã¤ã€æ¯ã‚Œã¦ãã‚‹ã¾ã§ã¯è‡ªãƒãƒ¼ãƒ ã§é¢å€’ã‚’è¦‹ã‚‹ã¨ã„ã†æ€æƒ³ã§å‹•ãã“ã¨ãŒå¢—ãˆã¦ãã¾ã—ãŸã€‚ãƒ‡ãƒ¼ã‚¿ã‚¬ãƒãƒŠãƒ³ã‚¹ã‚„ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®åˆ†æ•£åŒ–ãã®ã‚‚ã®ã«ã¤ã„ã¦ã¯ã‚„ã‚„æ‡ç–‘çš„ãªéƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ã€‚å‰ä¸–ä»£ã®ãƒ‡ãƒ¼ã‚¿åŸºç›¤ã§ã‚‚ååˆ†å¤šã„æ•°ã® producer ãŒç™ºç”Ÿã™ã‚‹ã¯ãšã§ã€ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒƒã‚·ãƒ¥ã®è©±ã¨ã¯ç‹¬ç«‹ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚¬ãƒãƒŠãƒ³ã‚¹ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚„ãƒªãƒãƒ¼ã‚¸è¿½è·¡ã€ã‚¯ã‚ªãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãªã©ã®èª²é¡Œã‚’è€ƒãˆã‚‹ã¹ãã§ã—ã‚‡ã†ã€‚ã‚‚ã—ã‹ã—ãŸã‚‰ãƒ‡ãƒ¼ã‚¿åŸºç›¤ãƒãƒ¼ãƒ ãŒã“ã‚Œã‚‰ã®èª²é¡Œã¾ã§äººæ‰‹ã§ã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ãŒã€ãã‚Œãªã‚‰ãªãŠã®ã“ã¨ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒƒã‚·ãƒ¥ã®æ–‡è„ˆã«ä¾ã‚‰ãšã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®ä½œã‚Šè¾¼ã¿ã‚’ã—ãŸæ–¹ãŒè‰¯ã„ã‚ˆã†ã«æ€ãˆã¾ã™ã€‚ã¾ãŸãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚‚ã¾ãŸè·äººèŠ¸ãŒè©¦ã•ã‚Œã‚‹é ˜åŸŸã§ã‚ã‚Šã‚ã¾ã‚Šå„ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒãƒ¼ãƒ ã«ç§»è­²ã—ã«ãã„ã‚ˆã†ãªæ°—ã‚‚ã—ã¦ã„ã¾ã™ã€‚BigQuery ãªã©ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã«æ ¼ç´ã—ã¦ã‹ã‚‰ SQL ã§ãªã‚“ã¨ã‹ã™ã‚‹ã€ã¿ãŸã„ãªæ±ç”¨çš„ãªã‚·ãƒŠãƒªã‚ªãªã‚‰ã„ã–çŸ¥ã‚‰ãšã€ä½é…å»¶ã§ã®å‡¦ç†ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã¨ã‹é‡è¤‡é™¤å»ã—ãŸã„ã¨ã‹ãƒªãƒƒãƒãªè¦ä»¶ãŒå‡ºã¦ãã‚‹ã‚·ãƒŠãƒªã‚ªã§å„ãƒãƒ¼ãƒ ã§å¯¾å¿œã™ã‚‹ã®ãŒç¾å®Ÿçš„ãªã®ã‹ã©ã†ã‹ã€‚ã¾ãŸã€ã„ãšã‚Œã«ã›ã‚ˆ consumer ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†å´ã«ã‚ã‚‹äººã€…ã‚’ã©ã®ã‚ˆã†ã«ã‚±ã‚¢ã™ã‚‹ã‹ã¯èª²é¡Œã«ãªã‚‹ã¨æ¨æ¸¬ã—ã¦ã„ã¾ã™ã€‚ä¸­å¤®é›†æ¨©çš„ãªãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®æœ‰ç„¡ã«é–¢ã‚ã‚‰ãš consumer ãŒå¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’ producer ã«æº–å‚™ã—ã¦ã‚‚ã‚‰ã†æ çµ„ã¿ã¯å¿…è¦ã§ã€ãã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„å‹•æ©Ÿã¥ã‘ã‚’ã©ã†ã™ã‚Œã°è§£æ±ºã§ãã‚‹ã®ã‹è‡ªåˆ†ã®ä¸­ã§ã¯ã‚¢ã‚¤ãƒ‡ã‚¢ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãã“ã‚’å«ã‚ã¦ãƒ‡ãƒ¼ã‚¿ã‚¬ãƒãƒŠãƒ³ã‚¹ã§é ‘å¼µã‚‹ï¼ã¨ã„ã†è©±ã§ã‚ã‚‹ãªã‚‰ã€ã¾ã ç¾å®Ÿã®èª²é¡Œã«é©ç”¨ã™ã‚‹ã¾ã§ã«éšœå£ãŒã‚ã‚‹æ°—ã‚‚ã—ã¦ãŠã‚Šã¾ã™ã€‚","link":"https://syucream.hatenablog.jp/entry/2020/07/07/000212","isoDate":"2020-07-06T15:02:12.000Z","dateMiliSeconds":1594047732000,"authorName":"syucream","authorId":"syucream"},{"title":"Avro ã¨ BigQuery ã® load ã¨ã†ã¾ãä»˜ãåˆã„ãŸã„","contentSnippet":"Avro ã¨ BigQuery ã®èª­ã¿è¾¼ã¿Apache Avro ã¯ BigQuery ã®ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã«å¯¾å¿œã—ãŸã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚ã‚Šã€ Object Container Files ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã§ã‚¹ã‚­ãƒ¼ãƒãŒè‡ªå·±è¨˜è¿°çš„ã«ãªã‚Šèª­ã¿è¾¼ã¿ã«éš›ã—ã¦åˆ¥é€”ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’ä¸ãˆãªãã¦æ¸ˆã‚€ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸ BigQuery ã¨ã—ã¦ã¯ Avro (ã‚’å«ã‚ãŸã„ãã¤ã‹ã®å½¢å¼) ã§ã¯å¹³è¡Œèª­ã¿è¾¼ã¿ãŒå¯èƒ½ã¨ã•ã‚Œã€ãã‚ŒãŒã§ããªã„å½¢å¼ã€ãŸã¨ãˆã° gzip åœ§ç¸®ã•ã‚ŒãŸ JSONL å½¢å¼ãªã©ã¨æ¯”è¼ƒã—ã¦æ—©ãèª­ã¿è¾¼ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚cloud.google.comåŠ ãˆã¦ã€å®Ÿã¯ä¸¦è¡Œèª­ã¿è¾¼ã¿ãŒå¯èƒ½ã¨ã•ã‚Œã¦ã‹ã¤åŠ¹ç‡çš„ãªåœ§ç¸®ãŒæœŸå¾…ã§ãã‚‹ Avro, Parquet, ORC ã®ä¸­ã«ã‚‚èª­ã¿è¾¼ã¿å‡¦ç†ã«ãŠã„ã¦å„ªåŠ£ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚Google BigQuery: The Definitive Guide ã«ã‚ˆã‚‹ã¨ \"The most efficient expressive format is Avro\" ã¨ã‚ã‚Šã€åˆ—å¿—å‘ã§åœ§ç¸®ã‚‚ã‹ã‹ã‚‹ Avro ãŒæœ€ã‚‚åŠ¹ç‡çš„ã§ã‚ã‚‹ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚å¯¾ã—ã¦ Parquet ã‚„ ORC ã¯è¡Œå¿—å‘ã§ã‚ã‚Šã€ã“ã‚Œã¯ã“ã‚Œã§å¤–éƒ¨ãƒ‡ãƒ¼ãƒ–ãƒ«çµŒç”±ã§ãƒ•ã‚¡ã‚¤ãƒ«ã«ç›´æ¥ã‚¯ã‚¨ãƒªã™ã‚‹åˆ†ã«ã¯åŠ¹ç‡çš„ãªã‚‚ã®ã®ã€ BigQuery ã«èª­ã¿è¾¼ã‚€éš›ã«ã¯å…¨åˆ—èª­ã¾ãªã‘ã‚Œã°ãªã‚‰ãªã„åˆ† Avro ãŒæœ‰åˆ©ãªã‚ˆã†ã§ã™ã€‚ãã‚“ãªã„ã„æ„Ÿã˜ã£ã½ã„ Avro ã® BigQuery ã¸ã®ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã€æœ¬è¨˜äº‹ã§ã¯ã‚¹ã‚­ãƒ¼ãƒå‘¨ã‚Šã«ã¤ã„ã¦ã„ãã¤ã‹å‹•ä½œã‚’ç¢ºèªã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚BigQuery ã«ã•ã¾ã–ã¾ãªã‚¹ã‚­ãƒ¼ãƒã® Avro ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¾ã›ã¦ã¿ã‚‹äº’æ›ãŒã‚ã‚‹ã‚¹ã‚­ãƒ¼ãƒã§è¿½è¨˜ã™ã‚‹å ´åˆã¾ãšã¯ replace ã‚’ã›ãšå˜ç´”ã« BigQuery ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦è¡Œã“ã†ã¨æ€ã„ã¾ã™ã€‚ã¨ã‚Šã‚ãˆãšé©å½“ã« 1 ã‚«ãƒ©ãƒ ã ã‘ã‚ã‚‹ç©ºãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã£ã¦ãŠãã¾ã™ã€‚ã¾ãšã¯ã“ã‚Œã«ãƒãƒƒãƒã™ã‚‹å˜ç´”ãª Avro ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ load ã—ã¦ã¿ã¾ã™ã€‚$ cat user_v1.avsc{  \"name\": \"User\",  \"type\": \"record\",  \"fields\": [    {      \"name\": \"id\",      \"type\": \"long\"    }  ]}$ java -jar ~/tools/avro-tools-1.8.2.jar random --schema-file user_v1.avsc --count 1 user_v1.avro 2>/dev/null$ bq load --project_id syucream-dev --source_format AVRO syucream-dev:test_syucream.user user_v1.avroUpload complete.Waiting on bqjob_r750d0087bb28a293_00000172515bed9d_1 ... (1s) Current status: DONE$ bq query --nouse_legacy_sql 'SELECT * FROM syucream-dev.test_syucream.user'Waiting on bqjob_r7bab3c778b4c6a7d_00000172515c7520_1 ... (0s) Current status: DONE+---------------------+|         id          |+---------------------+| 7190660540979993749 |+---------------------+ã‚µã‚¯ãƒƒã¨ã§ãã¾ã—ãŸã€‚è¿½è¨˜ã‚‚ã‚µã‚¯ãƒƒã¨ã§ãã¾ã™ã€‚$ bq load --project_id syucream-dev --source_format AVRO syucream-dev:test_syucream.user user_v1.avroUpload complete.Waiting on bqjob_r26360ddf0526570_00000172515d711c_1 ... (1s) Current status: DONE$ bq query --nouse_legacy_sql 'SELECT * FROM syucream-dev.test_syucream.user'Waiting on bqjob_rba99937746b1712_00000172515d8f6f_1 ... (0s) Current status: DONE+---------------------+|         id          |+---------------------+| 7190660540979993749 || 7190660540979993749 |+---------------------+ã“ã®ã‚¹ã‚­ãƒ¼ãƒã¨äº’æ›ã®ã‚ã‚‹ã‚¹ã‚­ãƒ¼ãƒã‚’æŒã¤ Avro ãƒ•ã‚¡ã‚¤ãƒ«ã® load ã‚‚å•é¡Œãªãã§ãã¾ã™ã€‚$ cat user_v1_1.avsc{  \"name\": \"User\",  \"type\": \"record\",  \"fields\": [    {      \"name\": \"id\",      \"type\": \"long\"    },    {      \"name\": \"name\",      \"type\": [\"null\", \"string\"],      \"default\": null    }  ]}$ java -jar ~/tools/avro-tools-1.8.2.jar random --schema-file user_v1_1.avsc --count 1 user_v1_1.avro 2>/dev/null$ bq load --project_id syucream-dev --source_format AVRO --schema_update_option ALLOW_FIELD_ADDITION syucream-dev:test_syucream.user user_v1_1.avroUpload complete.Waiting on bqjob_r616f9c494daf502a_00000172516056b9_1 ... (0s) Current status: DONE$ bq query --nouse_legacy_sql 'SELECT * FROM syucream-dev.test_syucream.user'Waiting on bqjob_r46005fd5ddeefbab_00000172516077d6_1 ... (0s) Current status: DONE+----------------------+------+|          id          | name |+----------------------+------+| -6779445778023123159 | NULL ||  7190660540979993749 | NULL ||  7190660540979993749 | NULL |+----------------------+------+BigQuery ã®ã‚¹ã‚­ãƒ¼ãƒçš„ã«ã¯äº’æ›ãŒã‚ã‚‹è¿½è¨˜ã‚’ã™ã‚‹å ´åˆä»Šåº¦ã¯å‰è¿°ã¨ã¯äº’æ›æ€§ãŒãªã„ã€ name ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ nullable ã§ãªããªã£ãŸã‚¹ã‚­ãƒ¼ãƒã‚’æŒã¤ Avro ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ load ã—ã¦ã¿ã¾ã™ã€‚ã“ã‚Œã¯æˆåŠŸã—ã¾ã™ãŒ BigQuery ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã—ã¦ã¯ name ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ nullable ã®ã¾ã¾ã¨ãªã‚Šã¾ã™ã€‚ï¼ˆã¾ã‚ nullable ã‹ã‚‰ required ã®å¤‰æ›´ã¯è¨±ã•ã‚Œã¦ã„ãªã„ã§ã™ã—ã­ã€‚ã€‚ã€‚ï¼‰$ cat user_v2.avsc{  \"name\": \"User\",  \"type\": \"record\",  \"fields\": [    {      \"name\": \"id\",      \"type\": \"long\"    },    {      \"name\": \"name\",      \"type\": \"string\"    }  ]}$ java -jar ~/tools/avro-tools-1.8.2.jar random --schema-file user_v2.avsc --count 1 user_v2.avro 2>/dev/null$ bq load --project_id syucream-dev --source_format AVRO --schema_update_option ALLOW_FIELD_ADDITION syucream-dev:test_syucream.user user_v2.avroUpload complete.Waiting on bqjob_r5a6eb8678879a075_0000017251620b01_1 ... (1s) Current status: DONE$ bq query --nouse_legacy_sql 'SELECT * FROM syucream-dev.test_syucream.user'Waiting on bqjob_r5105091904b8eed0_000001725162d619_1 ... (0s) Current status: DONE+----------------------+-----------------+|          id          |      name       |+----------------------+-----------------+|  3285309633976168209 | twbnsureievqwes ||  7190660540979993749 | NULL            || -6779445778023123159 | NULL            ||  7190660540979993749 | NULL            |+----------------------+-----------------+ã“ã“ã‹ã‚‰é€†è¡Œã—ã¦æœ€åˆã« load ã—ãŸ Avro ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ load ã—ã‚ˆã†ã¨ã—ã¦ã‚‚æˆåŠŸã—ã¾ã™ã€‚ã“ã‚Œã¯ã‚„ã¯ã‚Š BigQuery ã®ãƒ†ãƒ¼ãƒ–ãƒ«ä¸Šã§ã¯ name ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ nullable ã§ã‚ã‚Šã€ name ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãã‚‚ãã‚‚æŒãŸãªã„ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å ´åˆã¯ null ã§åŸ‹ã‚ã‚Œã°ã„ã„ã‹ã‚‰ã§ã™ã­ã€‚$ bq load --project_id syucream-dev --source_format AVRO syucream-dev:test_syucream.user user_v1.avroUpload complete.Waiting on bqjob_r3e8bbde894d35c3b_00000172516328ff_1 ... (0s) Current status: DONE$ bq query --nouse_legacy_sql 'SELECT * FROM syucream-dev.test_syucream.user'Waiting on bqjob_r7e87a10bad564007_00000172516369af_1 ... (0s) Current status: DONE+----------------------+-----------------+|          id          |      name       |+----------------------+-----------------+|  7190660540979993749 | NULL            ||  3285309633976168209 | twbnsureievqwes ||  7190660540979993749 | NULL            || -6779445778023123159 | NULL            ||  7190660540979993749 | NULL            |+----------------------+-----------------+äº’æ›ãŒãªã„è¿½è¨˜ã‚’ã™ã‚‹å ´åˆä»Šåº¦ã¯ã•ã‚‰ã« BigQuery ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã—ã¦ã‚‚äº’æ›ãŒå–ã‚Œãªã„ã§ã‚ã‚ã†å¤‰æ›´ã‚’ã—ã¦ã¿ã¾ã™ã€‚ã“ã“ã§ã¯ required ã¨ãªã‚‹ age ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã™ã€‚ã“ã®å ´åˆã€ã“ã® Avro ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½“ã¨ã—ã¦ã¯ load ã§ããã†ã§ã™ãŒæ—¢å­˜ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒ age ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’ã‚‚ãŸãªã„ãŸã‚ load ã§ãã¾ã›ã‚“ã€‚$ cat user_v3.avsc{  \"name\": \"User\",  \"type\": \"record\",  \"fields\": [    {      \"name\": \"id\",      \"type\": \"long\"    },    {      \"name\": \"name\",      \"type\": \"string\"    },    {      \"name\": \"age\",      \"type\": \"long\"    }  ]}$ java -jar ~/tools/avro-tools-1.8.2.jar random --schema-file user_v3.avsc --count 1 user_v3.avro 2>/dev/null$ bq load --project_id syucream-dev --source_format AVRO --schema_update_option ALLOW_FIELD_ADDITION syucream-dev:test_syucream.user user_v3.avroUpload complete.Waiting on bqjob_r6d0dccd4050d198_000001725165f2c9_1 ... (0s) Current status: DONEBigQuery error in load operation: Error processing job 'syucream-dev:bqjob_r6d0dccd4050d198_000001725165f2c9_1': Provided Schema does not match Tablesyucream-dev:test_syucream.user. Cannot add required fields to an existing schema. (field: age)--replace ã™ã‚‹å ´åˆBigQuery ã®ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã§ã¯è¿½è¨˜ã§ã¯ãªãã‚¢ãƒˆãƒŸãƒƒã‚¯ãªãƒ†ãƒ¼ãƒ–ãƒ«ã®å†ç”Ÿæˆã‚‚è¡Œãˆã¾ã™ã€‚ã“ã®å ´åˆã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ãã®ã‚¹ã‚­ãƒ¼ãƒãŒä½œã‚Šç›´ã•ã‚Œã‚‹éƒ½åˆã€å‰è¿°ã®ã‚¹ã‚­ãƒ¼ãƒã®äº’æ›æ€§ã‚’æ°—ã«ã—ãªãã¦ã‚ˆããªã‚Šã¾ã™ã€‚$ bq load --project_id syucream-dev --replace --source_format AVRO syucream-dev:test_syucream.user user_v1.avroUpload complete.Waiting on bqjob_r1441ed0e2b659303_000001725167e0af_1 ... (0s) Current status: DONE$ bq query --nouse_legacy_sql 'SELECT * FROM syucream-dev.test_syucream.user'Waiting on bqjob_r64a104d745d627a1_00000172516817e3_1 ... (0s) Current status: DONE+---------------------+|         id          |+---------------------+| 7190660540979993749 |+---------------------+$ bq load --project_id syucream-dev --replace --source_format AVRO syucream-dev:test_syucream.user user_v1_1.avroUpload complete.Waiting on bqjob_r1254a5673d1c4a55_0000017251684053_1 ... (0s) Current status: DONE$ bq query --nouse_legacy_sql 'SELECT * FROM syucream-dev.test_syucream.user'Waiting on bqjob_r542e92fd2eadaefe_0000017251685b41_1 ... (0s) Current status: DONE+----------------------+------+|          id          | name |+----------------------+------+| -6779445778023123159 | NULL |+----------------------+------+$ bq load --project_id syucream-dev --replace --source_format AVRO syucream-dev:test_syucream.user user_v2.avroUpload complete.Waiting on bqjob_r7f71a4c5acbb4a54_00000172516874f8_1 ... (0s) Current status: DONE$ bq query --nouse_legacy_sql 'SELECT * FROM syucream-dev.test_syucream.user'Waiting on bqjob_r26844a99b599657a_0000017251688ed0_1 ... (0s) Current status: DONE+---------------------+-----------------+|         id          |      name       |+---------------------+-----------------+| 3285309633976168209 | twbnsureievqwes |+---------------------+-----------------+$ bq load --project_id syucream-dev --replace --source_format AVRO syucream-dev:test_syucream.user user_v3.avroUpload complete.Waiting on bqjob_r3039d309e0eaecd0_000001725168a3bd_1 ... (1s) Current status: DONE$ bq query --nouse_legacy_sql 'SELECT * FROM syucream-dev.test_syucream.user'Waiting on bqjob_r3535c0ed97eae63f_000001725168c9b7_1 ... (0s) Current status: DONE+---------------------+-----------+----------------------+|         id          |   name    |         age          |+---------------------+-----------+----------------------+| 6571829868147110661 | gcypqmwby | -7543339857203188581 |+---------------------+-----------+----------------------+é›‘ãªã¾ã¨ã‚BigQuery ã«ã‚ˆã‚‹ Avro ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã¯éå¸¸ã«å”åŠ›ã§ã€ --replace ã«ã‚ˆã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–°ã«ã‚ˆã£ã¦æ¥½ã§åŠ¹æœçš„ãªé‹ç”¨ãŒã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚BigQuery ä¸Šã§ã‚¹ã‚­ãƒ¼ãƒãŒã©ã†ãªã‚‹ã‹ã‚’è€ƒãˆãšã«èª­ã¿è¾¼ã¿ã‚¸ãƒ§ãƒ–ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã§è‰¯ããªã‚‹ã®ã¯ãƒ¡ãƒªãƒƒãƒˆãŒå¤§ãã„ã§ã—ã‚‡ã†ã€‚ãŸã ã— --replace ã§ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒå¶ãˆã‚‰ã‚Œã‚‹ã‚ã‘ã§ã‚‚ãªãã€å·¨å¤§ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‹ã‚‰ ETL ã‚’çµŒã¦å·®åˆ†æ›´æ–°ã§åŒæœŸã—ãŸã„ã ã¨ã‹ãƒ­ã‚°ã‚’ã²ãŸã™ã‚‰è¿½è¨˜ã—ãŸã„å ´åˆã«ã¯ã‚¹ã‚­ãƒ¼ãƒã®æ›´æ–°å•é¡ŒãŒã—ã°ã—ã°ãƒãƒƒã‚¯ã«ãªã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚ãŸã ãã®å ´åˆã§ã‚‚ã€BigQuery ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¹ã‚­ãƒ¼ãƒã¨ã—ã¦äº’æ›ãŒå–ã‚Œã‚‹ Avro ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚Œã°èª­ã¿è¾¼ã¿å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ã«ã¤ã„ã¦è€ƒãˆã‚‹è² è·ã¯æ¸›ã‚Šãã†ã§ã™ã€‚ã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ãŒé »ç¹ã«ç™ºç”Ÿã—ã†ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã§ã¯é€†ã«ã“ã®ç‰¹æ€§ã‚’æ‰ãˆãŸä¸Šã§ã©ã†ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–°ã™ã‚‹ã‹ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’çµ„ã‚€ã¨è‰¯ã„ã®ã‹ã‚‚ã§ã™ã­ã€‚","link":"https://syucream.hatenablog.jp/entry/2020/05/27/000215","isoDate":"2020-05-26T15:02:15.000Z","dateMiliSeconds":1590505335000,"authorName":"syucream","authorId":"syucream"},{"title":"Cloud Dataflow ã® FlexTemplate ã¯ä½•è€…ã‹","contentSnippet":"å…ˆæœˆã€ã•ã‚‰ã‚Šã¨ Cloud Dataflow ã« FlexTemplate ã¨ã„ã†æ–°æ©Ÿèƒ½ã®ãƒ™ãƒ¼ã‚¿ç‰ˆãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚cloud.google.comæ®‹å¿µãªãŒã‚‰ã¾ã ã‚ã¾ã‚Šãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒãªãã€ã“ã‚Œã‚’ç”¨ã„ã‚‹ã¨ãªã«ãŒå¬‰ã—ã„ã®ã‹ãŒæ´ã¿ã«ãã„ã¨ã“ã‚ã§ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ FlexTemplate å‘¨ã‚Šã‚’è»½ãè©¦ã—ã¦ã©ã®ã‚ˆã†ãªæ©Ÿèƒ½ã§ä½•ãŒå¬‰ã—ã„ã®ã‹æ¢ã£ã¦ã‚†ãã¾ã™ã€‚å¾“æ¥ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆCloud Dataflow ã¯ã‚¸ãƒ§ãƒ–ã®ä¸€éƒ¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®Ÿè¡Œæ™‚ã«ç½®ãæ›ãˆå¯èƒ½ã«ã—ãŸãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸ Google ã¯ã“ã®æ©Ÿèƒ½ã‚’ç”¨ã„ãŸå…¬å¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½•ç¨®é¡ã‹ç”¨æ„ã—ã¦ãã‚Œã¦ãŠã‚Šã€ GCP ä¸Šã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãªã ETL å‡¦ç†ã‚’ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ã€‚cloud.google.comã¡ãªã¿ã«ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ©Ÿèƒ½ãªã®ã§ã™ãŒã€ FlexTemplate ã®ç™»å ´ã®éƒ½åˆã‹ã‚‰ã‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸Šã§ \"å¾“æ¥ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ\" ã¨ã„ã†è¦‹å‡ºã—ã«ãªã£ã¦ã—ã¾ã£ãŸã‚ˆã†ã§ã™ã€‚ã€‚ã€‚å®Ÿè¡Œæ™‚ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç½®ãæ›ãˆå¯èƒ½ã«ã™ã‚‹ã«ã¯ã€ãã®å€¤ã‚’ ValueProvider ã§ãƒ©ãƒƒãƒ—ã—ã¦ã‚ã’ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ValueProvider ã®å®Ÿè£…ã¨ã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°æ™‚ã«é™çš„ã«å€¤ãŒæ±ºã¾ã‚‹ StaticValueProvider ã¨å®Ÿè¡Œæ™‚ã«æ±ºã¾ã‚‹ RuntimeValueProvider ãŒå­˜åœ¨ã—ã¦ãŠã‚Šã€ã“ã‚Œã«ã‚ˆã‚Šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’æŸ”è»Ÿã«é¸ã¹ã¾ã™ã€‚ã¾ãŸ Apache Beam ã® SDK å†…ã® IO é–¢é€£ãƒ“ãƒ«ãƒ€ãƒ¼ã‚¯ãƒ©ã‚¹ã«ã¯ ValueProvider ã‚’å—ã‘å–ã£ã¦æŒ¯ã‚‹èˆã„ã‚’å¤‰ãˆã¦ãã‚Œã‚‹ã‚‚ã®ãŒå¤šã€…ã‚ã‚Šã¾ã™ã€‚beam.apache.orgé€†ã«è¨€ã†ã¨ã“ã® ValueProvider ã§è³„ãˆãªã„ã‚ˆã†ãªæ€§è³ªã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯å®Ÿè¡Œæ™‚ã«æŒ‡å®šå¯èƒ½ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦æ‰±ãˆã¾ã›ã‚“ã€‚ã“ã‚Œã¯åˆ†ã‹ã‚Šã‚„ã™ã„éƒ¨åˆ†ã§è¨€ã†ã¨ Beam ã® SDK ã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹çš„ã« ValueProvider ã‚’å—ã‘å–ã£ã¦ãã‚Œãªã„ã‚ˆã†ãªéƒ¨åˆ†ã€ã‚‚ã£ã¨è¤‡é›‘ãªä¾‹ã§è¨€ã†ã¨å†…å®¹ã«ã‚ˆã£ã¦ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ã‚°ãƒ©ãƒ•ãŒå¤‰ã‚ã‚‹ã‚ˆã†ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯æ‰±ãˆã¾ã›ã‚“ï¼ˆã‚ã‚‹ã„ã¯æ‰±ã†ã®ãŒå›°é›£ï¼‰FlexTemplateFlexTemplate ã¯ã€ãŠãã‚‰ããªã®ã§ã™ãŒã€ä¸ãˆã‚‰ã‚Œã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«æŸ”è»Ÿæ€§ã‚’ä¸ãˆã‚‹ã‚‚ã®ã§ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã ã‘ã§ã¯æ­£ä½“ãŒå®šã‹ã«ã¯ãªã‚‰ãªã„ã§ã™ãŒã€ gcr.io/dataflow-templates-base/java11-template-launcher-base ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸ Docker image ã‚’ç”¨ã„ã¦ Dataflow ã‚¸ãƒ§ãƒ–ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¸ãƒ§ãƒ–ã®æ§‹ç¯‰æ‰‹é †ã¯ã€Œå¾“æ¥ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€ã«ä¼¼ã¦ãŠã‚Š FlexTemplate ã«ã‚ˆã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆã¨ã€å®Ÿè¡Œã® 2 ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºãŒã‚ã‚Šã¾ã™ã€‚å‰è€…ã§ã¯å‰è¿°ã® Docker image ã‚’ GCR ã« push ã—ã¦ã€ã‹ã¤ãã® Docker image ã§è§£é‡ˆå¯èƒ½ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç¤ºã—ãŸ metadata.json ã‚’ GCS ã« upload ã—ã¾ã™ã€‚ Docker image ã® build & push ã¯å¾“æ¥ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯å­˜åœ¨ã—ãªã‹ã£ãŸæ‰‹é †ã§ã™ã­ã€‚https://cloud.google.com/dataflow/docs/guides/templates/using-flex-templates#creating_a_flex_templateå¾Œè€…ã§ã¯å®Ÿéš›ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä¸ãˆã¦ã‚¸ãƒ§ãƒ–ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚cloud.google.comã“ã®ã‚¸ãƒ§ãƒ–ã®å®Ÿè¡Œæ™‚ã«èˆˆå‘³æ·±ã„ã“ã¨ã«ã€ã‚¸ãƒ§ãƒ–ã® launch ç”¨ã« GCE ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒé–‹å§‹ã•ã‚Œå…ˆç¨‹ä½œæˆã—ãŸ Docker image ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ãŒè¦‹ã¦å–ã‚Œã¾ã™ã€‚ã“ã® Docker ã‚³ãƒ³ãƒ†ãƒŠã®å‹•ä½œãŒã‚ˆãã‚ã‹ã‚‰ãªã„ã¨ã“ã‚ã§ã™ãŒã€å†…éƒ¨çš„ã«ã¯ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‹ã‚‰ Dataflow ã‚¸ãƒ§ãƒ–ã®ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã¨å®Ÿè¡Œã‚’é–‹å§‹ã—ã¦ãã‚Œã‚‹ã‚‚ã®ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚#cloud-configs...    ExecStart=/usr/bin/docker run -v /var/log/dataflow/template_launcher:/var/log/dataflow/template_launcher gcr.io/xxx/samples/dataflow/streaming-beam-sql --template-container-args='{\"consoleLogsLocation\":\"gs://xxx/staging/template_launches/xxx/console_logs\",\"environment\":{\"region\":\"us-central1\",\"serviceAccountEmail\":\"xxx\",\"stagingLocation\":\"gs://xxx/staging\",\"tempLocation\":\"gs://xxx/tmp\"},\"jobId\":\"xxx\",\"jobName\":\"streaming-beam-sql-20200512-004931\",\"jobObjectLocation\":\"gs://xxx/staging/template_launches/xxx/job_object\",\"operationResultLocation\":\"gs://xxx/staging/template_launches/xxx/operaton_result\",\"parameters\":{\"inputSubscription\":\"test\",\"outputTable\":\"foo:bar.baz\",\"stagingLocation\":\"gs://xxx/staging\",\"tempLocation\":\"gs://xxx/tmp\"},\"projectId\":\"xxx\"}'...ã•ã¦ã“ã® FlexTemplate ã§ä½•ãŒå¬‰ã—ã„ã®ã‹ã¨ã„ã†ã¨ã€å¤§ããªå·®ç•°ã¨ã—ã¦å®Ÿè¡Œæ™‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ ValueProvider ã§åŒ…ã‚€å¿…è¦ãŒç„¡ããªã£ãŸç‚¹ãŒã‚ã‚Šã¾ã™ã€‚FlexTemplate ã‚’åˆ©ç”¨ã—ãŸã‚¸ãƒ§ãƒ–ã®ã‚µãƒ³ãƒ—ãƒ«ãŒã„ãã¤ã‹å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã®å†…ã® PipelineOptions ã® getInputSubscription() ãªã©ã€å®Ÿè¡Œæ™‚ã«æŒ‡å®šå¯èƒ½ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚ã‚Šã¤ã¤ã‚‚ ValueProvider å‹ã§æ‰±ã‚ã‚Œã¦ã„ãªã„ã“ã¨ãŒè¦‹ã¦ã¨ã‚Œã¾ã™ã€‚github.comã“ã‚Œã«ã‚ˆã‚Šã€å¾“æ¥ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯èª²é¡Œã«ãªã£ã¦ã„ãŸ ValueProvider ã‚’å—ã‘å–ã£ã¦ãã‚Œãªã„ã‚ˆã†ãªå€¤ã‚’å®Ÿè¡Œæ™‚ã«å¤‰æ›´ã—ãŸã„ã ã¨ã‹ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ§‹é€ ãŒå¤‰ã‚ã‚‹ã‚ˆã†ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã—ãŸã„ã‚ˆã†ãªéƒ¨åˆ†ã«åŠ¹æœã‚’ç™ºæ®ã™ã‚‹ã‚‚ã®ã¨æ€ã‚ã‚Œã¾ã™ã€‚ã¨ã¯è¨€ã£ã¦ã‚‚ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚Šã€ã‚¸ãƒ§ãƒ–ãŒ Queue ã«å…¥ã£ã¦ã‹ã‚‰ Running ã®çŠ¶æ…‹ã«ãªã‚‹ã¾ã§æ•°åˆ†å¾…ãŸã•ã‚Œã‚‹ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒé…å»¶ã—ãŸã®ãªã‚‰å¦¥å½“ã«æ€ãˆã‚‹ãŒï¼‰ã ã¨ã‹ã€ä»Šã®ã¨ã“ã‚ Streaming Engine ã‚„ FlexRS ã®ã‚µãƒãƒ¼ãƒˆãŒãªã„ã¨ã‹èª²é¡ŒãŒå­˜åœ¨ã—ã¾ã™ã€‚çµ‚ã‚ã‚Šã«è»½ãè§¦ã‚Œã¦ã¿ãŸé™ã‚Š FlexTemplate ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªä»•çµ„ã¿ãªãŒã‚‰ Dataflow ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ç›¸å½“ãªæŸ”è»Ÿæ€§ã‚’æŒãŸã›ã‚‹ã“ã¨ãŒã§ããã†ã§ã™ã€‚FlexTemplate ã«ã©ã“ã¾ã§ã‚’æœŸå¾…ã—ã¦ã€ã©ã®ã‚ˆã†ã«å¾“æ¥ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨æ£²ã¿åˆ†ã‘ã™ã¹ãã‹ã®ã‹ï¼ˆä¸Šä½äº’æ›ã®ä½ç½®ä»˜ã‘ãªã®ã‹ï¼Ÿï¼‰ã€ä»Šå¾Œã®ã‚µãƒãƒ¼ãƒˆå…·åˆãªã©æ°—ã«ãªã‚‹ã¨ã“ã‚ã§ã™ã­ã€‚","link":"https://syucream.hatenablog.jp/entry/2020/05/12/010008","isoDate":"2020-05-11T16:00:08.000Z","dateMiliSeconds":1589212808000,"authorName":"syucream","authorId":"syucream"},{"title":"Schema Registry ã«ã¤ã„ã¦æ›¸ã„ã¦ã„ã: Confluent Schema Registry ã® Protocol Buffers & JSON Schema ã‚µãƒãƒ¼ãƒˆ","contentSnippet":"å…ˆæ—¥ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸ Confluent Platform 5.5 ã‚ˆã‚Š Protocol Buffers ã¨ JSON Schema ã®ã‚µãƒãƒ¼ãƒˆãŒå…¥ã£ãŸã‚ˆã†ã§ã™ã€‚www.confluent.ioä»¥å‰ 5.4 ã‚’å¯¾è±¡ã«ã€ Schema Registry ã‚’ä¸­å¿ƒã«è‰²ã€…è¨˜è¼‰ã—ã¦ã¿ã¾ã—ãŸãŒã€ä»Šå›ã¯ 5.5 ã§å…¥ã£ãŸã“ã®å·®åˆ†ã‚’è¿½è·¡ã—ã¦ã¿ã¾ã™ã€‚syucream.hatenablog.jpConfluent Control Center ä¸Šã§ã‚¹ã‚­ãƒ¼ãƒã‚’ç®¡ç†ã™ã‚‹å®šç•ªã® Confluent Control Center ã‚’ä½¿ã£ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ Schema Registry ã®è¨­å®šå‘¨ã‚Šã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚è©¦ã—ã« protobuf ã§ã‚¹ã‚­ãƒ¼ãƒã‚’ç™»éŒ²ã—ã¦ã¿ãŸçŠ¶æ…‹ãŒä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚protobuf ã«ãŠã„ã¦ .proto ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã—ã¦ã„ãã‚¹ã‚­ãƒ¼ãƒã‚’ç™»éŒ²ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚JSON Schema ã®å ´åˆã¯ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚äº’æ›æ€§ãƒã‚§ãƒƒã‚¯ã®æŒ™å‹•ã‚’è©¦ã—ã¦ã¿ã‚‹ã“ã‚Œã ã‘ã§ã¯é¢ç™½ããªã„ã®ã§ protobuf ã®ã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ã—ã¦ã„ã£ã¦ã¿ã¾ã™ã€‚ã¾ãš uint32 age = 3; ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ã‚’è¡Œã£ã¦ã¿ã¾ã™ã€‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ã¯ç‰¹ã«äº’æ›æ€§ã‚’å£Šã—ã¾ã›ã‚“ã€‚ã¨ã„ã†ã‚ã‘ã§ã‚¹ã‚­ãƒ¼ãƒã®æ›´æ–°ã‚‚ç„¡äº‹ã«è¡Œãªãˆã¾ã™ã€‚syntax = \"proto3\";message value_protobuf {  uint64 id = 1;  string name = 2;  uint32 age = 3;}ä»Šåº¦ã¯ field number ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã™ã€‚æ—©é€Ÿã•ãã»ã©è¿½åŠ ã—ãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’  uint32 age = 42; ã«æ›¸ãæ›ãˆã¦ã¿ã¾ã—ãŸã€‚ã“ã®å¤‰æ›´ã‚‚ãƒªã‚¹ã‚¯ã¯ã‚ã‚Šãã†ã§ã™ãŒã€ã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ã¯å—ã‘å…¥ã‚Œã‚‰ã‚Œã¾ã™ã€‚syntax = \"proto3\";message value_protobuf {  uint64 id = 1;  string name = 2;  uint32 age = 42;}ã•ã‚‰ã«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‰Šé™¤ã‚„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®å¤‰æ›´ã‚‚å—ã‘å…¥ã‚Œã‚‰ã‚Œã¾ã™ã€‚syntax = \"proto3\";message value_protobuf {  uint64 id = 1;  string fullname = 2;}ã“ã‚Œã‚‰ã®å¤‰æ›´ã¯äº’æ›æ€§ã‚’å£Šã™ã‚‚ã®ã§ã¯ãªã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ Confluent Schema Registry ã§ã® protobuf ã®äº’æ›æ€§ãƒã‚§ãƒƒã‚¯ã®ä»•æ§˜ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã£ã¦ã„ã¾ã™ã€‚docs.confluent.ioãŠãŠã‚€ã­ protobuf ã® wire format ã®è§£é‡ˆã«å½±éŸ¿ã‚’åŠã¼ã•ãšã€ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã¯ç„¡äº‹è¡Œãˆã‚‹ã‚ˆã†ãªå†…å®¹ã§ã‚ã‚Œã°äº’æ›æ€§ãŒç¶­æŒã•ã‚Œã‚‹ã¨è¦‹ã‚‹ã‚ˆã†ã§ã™ã€‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®å¤‰æ›´ã«å¯¾ã™ã‚‹è¨€åŠã¯æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ãŒã€ã“ã‚Œã‚‚ wire format ã®è§£é‡ˆã«å½±éŸ¿ã—ãªã„ã‹ã‚‰ã ã¨æ€ã‚ã‚Œã¾ã™ã€‚ãƒ»ãƒ»ãƒ»ãŸã å®Ÿéš›ã«ã¯ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã«ã¯æˆåŠŸã™ã‚‹ã¨ã—ã¦ã‚‚å¾Œç¶šã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãŒå½±éŸ¿ã‚’å—ã‘ãªã„ã‹ã©ã†ã‹ã¯ä¿è¨¼ã•ã‚Œãªã„ã§ã—ã‚‡ã†ã—æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¿½åŠ ã‚„å‰Šé™¤ã¯äºˆæœŸã›ã¬å€¤ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤åŒ–ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®ãƒªãƒãƒ¼ãƒ ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’æ„è­˜ã—ãŸå¾Œç¶šå‡¦ç†ã§å•é¡ŒãŒç™ºç”Ÿã™ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚ã“ã“ã‹ã‚‰æ˜ç¢ºã«äº’æ›æ€§ãŒç„¡ã„å¤‰æ›´ã‚‚è¡Œã£ã¦ã¿ã¾ã™ã€‚ã“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‹ uint32 ã‚’ string ã«ã—ã¦ã¿ã¾ã™ã€‚ã“ã®å ´åˆã¯äºˆæƒ³é€šã‚Šäº’æ›æ€§ãŒç„¡ã„ã¨ã•ã‚Œã¦ã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ãŒæ‹’å¦ã•ã‚Œã¾ã™ã€‚// ç­†è€…ã¯ã“ã®ä»–ã«ã‚‚ JSON Schema ã®ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã‚‚è©¦ã—ã¦ã¿ãŸã®ã§ã™ãŒã€äº’æ›æ€§ãƒã‚§ãƒƒã‚¯ã®æŒ™å‹•ãŒèª­ã‚ãšè«¦ã‚ã¦ã—ã¾ã„ã¾ã—ãŸã€‚protobuf ã®æ‰±ã„å‘¨ã‚Šã®å®Ÿè£…ã‚’èª­ã‚“ã§è¦‹ã‚‹5.5 ã§ã‚µãƒãƒ¼ãƒˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã¨å„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ‰±ã„ã¯ã©ã†ãªã£ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã€‚ã›ã£ã‹ããªã®ã§å‰ç¯€ã§è§¦ã‚ŒãŸ protobuf å‘¨ã‚Šã®å®Ÿè£…ã‚’è¿½ã£ã¦ã¿ã¾ã™ã€‚protobuf å¯¾å¿œã—ãŸ Serializer/Deserializerãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¯ã« Serializer, Deserializer ã®å®Ÿè£…ãŒç•°ãªã‚‹ã‚ˆã†ã§ã™ã€‚ã¾ãšã¯ã“ã“ã‚’ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¿ã¾ã™ã€‚docs.confluent.ioAvro ã¨åŒæ§˜ AbstractKafkaProtobufSerializer, AbstractKafkaProtobufDeserializer ã«ã€ protobuf ã®ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹ Message ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ»ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå‡¦ç†ã¨ schema registry ã¨ã®ã‚„ã‚Šå–ã‚Šã®å‡¦ç†ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã“ã§ protobuf ã®ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã¯å…¬å¼ã® Descriptor ã¨ã—ã¦ã§ã¯ãªããƒ©ãƒƒãƒ—ã•ã‚ŒãŸå‹ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚ã¾ãŸ protobuf ã¯ import æ–‡ã§ä»–ã® .proto ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã®ã§ã™ãŒã€ã“ã®ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚‚æŒã¡åˆã‚ã›ã¦ã„ã¾ã™ã€‚é¢ç™½ã„ç‚¹ã¨ã—ã¦ Serializer ã¯ protobuf ã®ã€ protoc ã§ç”Ÿæˆã•ã‚ŒãŸå…·ä½“çš„ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹ (Avro ã§ã„ã† SpecificRecord ã¿ãŸã„ãªã‚‚ã®)ã‚’æ‰±ã„ã€ Deserializer ã§ã¯ DynamicMessage (Avro ã§ã„ã† GenericRecord ã¿ãŸã„ãªã‚‚ã®) ã‚’æ‰±ã†ã“ã¨ã§ã™ã€‚producer ã¯ .proto ã®è¨˜è¿°ã«å¾“ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹ãŒä½¿ãˆã¾ã™ãŒã€ãã‚Œã‚’ consumer ãŒæŒã£ã¦ã„ã‚‹ä¿è¨¼ã¯ãªã„ãŸã‚å¦¥å½“ãªæ‰±ã„ã ã¨æ€ã‚ã‚Œã¾ã™ã€‚è¤‡æ•°ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã‚¹ã‚­ãƒ¼ãƒã®è¡¨ç¾5.4 ã§ã¯ Schema Registry ã¨ã—ã¦è€ƒæ…®ã—ã¦ã„ãŸã‚¹ã‚­ãƒ¼ãƒãŒ Avro ã—ã‹ã‚ã‚Šãˆãªã‹ã£ãŸã®ã§ã€ Schema Registry ã¨ã—ã¦ã¯ Avro ã® Schema ã‚¯ãƒ©ã‚¹ã‚’æ‰±ã†ã‚ˆã†ãªå®Ÿè£…ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚ŒãŒ 5.5 ã§ã¯ ParsedSchema ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã„ã†ä¸€æ®µæŠ½è±¡åŒ–ã•ã‚ŒãŸæ§‹é€ ã§æ‰±ã‚ã‚Œã¾ã™ã€‚protobuf ã®ã‚¹ã‚­ãƒ¼ãƒã‚’è¡¨ç¾ã™ã‚‹ ProtobufSchemaã€ Avro ã® AvroSchema, JSON Schema ã® JsonSchema ã¯ãã‚Œãã‚Œ ParsedSchema ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚å€‹ã€…ã® ParsedSchema å®Ÿè£…ã®ä¸­ã§ã‚¹ã‚­ãƒ¼ãƒå›ºæœ‰ã®å‡¦ç†ã€äº’æ›æ€§ãƒã‚§ãƒƒã‚¯ã‚„ protobuf ã§è¨€ã† descriptor ã®æ‰±ã„ãªã©ã‚’æ‹…ã„ã¾ã™ã€‚ãŠã‚ã‚Šã«ç°¡æ½”ã«è¿½ã£ãŸã ã‘ã§ã™ãŒã€å¦¥å½“ãªé€²åŒ–ã‚’é‚ã’ãŸã‚ˆã†ãª Confluent Platform 5.5 ã§ã—ãŸã€‚protobuf ã¯ã‚³ãƒ¼ãƒ‰äº‹å‰ç”Ÿæˆã‚’æƒ³å®šã—ãŸåˆ©ç”¨ã‚·ãƒ¼ãƒ³ãŒå¤šã„ã§ã™ãŒã€ Confluent Platform ã§ã®ã‚µãƒãƒ¼ãƒˆãªã©åˆ©ç”¨ã‚·ãƒ¼ãƒ³ãŒå¢—ãˆã¦ãã‚‹ã¨æ´»ç”¨ã§ãã‚‹æ©Ÿä¼šãŒã•ã‚‰ã«å¢—ãˆã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚ã¾ãŸä»Šå›è¤‡æ•°ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚µãƒãƒ¼ãƒˆãŒå…¥ã£ãŸä»¥å¤–ã«ã‚‚ ksqldb ã¨ã„ã† KSQL ã®é€²åŒ–ç³»ï¼Ÿã®ã‚ˆã†ãªæ©Ÿæ§‹ãŒå¢—ãˆã¦ Confluent Platform ã‚‚é€²åŒ–ã‚’ç¶šã‘ã¦ã„ã‚‹å°è±¡ã‚’å—ã‘ã¾ã™ã­ã€‚","link":"https://syucream.hatenablog.jp/entry/2020/05/03/013316","isoDate":"2020-05-02T16:33:16.000Z","dateMiliSeconds":1588437196000,"authorName":"syucream","authorId":"syucream"},{"title":"protobuf ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæ¸ˆã¿ãƒã‚¤ãƒŠãƒªã‚’ç„¡ç†ã‚„ã‚Šèª­ã‚€","contentSnippet":"Protocol Buffer wire format ã«ã¤ã„ã¦Protocol Buffer ã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚ŒãŸå¾Œã®ãƒã‚¤ãƒŠãƒªã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ä»•æ§˜ã¯ wire format ã®ä»•æ§˜ã¨ã„ã†å½¢ã§ç‹¬ç«‹ã—ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã® wire format ã®ä»•æ§˜ã¯è¦‹ã‚Œã°ã‚ã‹ã‚‹é€šã‚Šãã‚Œã»ã©è¨˜è¿°é‡ãŒå¤šããªãã€ãã‚Œã§ã„ã¦äº’æ›æ€§ã‚’æ°—ã«ã—ã¤ã¤ã€ã‹ã¤æ‹¡å¼µã®é‚ªé­”ã«ãªã‚‰ãªã„ã‚ˆã†ãªé…æ…®ãŒã•ã‚Œã¦ã„ã¾ã™ã€‚developers.google.comwire format ã¨ã—ã¦ç‰¹ã«é‡è¦ãªç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã ã¨å€‹äººçš„ã«ã¯è€ƒãˆã¾ã™ã€‚æ•´æ•°å‹ã«å¯¾ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºãŒãªã‚‹ã¹ãå°ã•ããªã‚‹ã‚ˆã†ãªå·¥å¤«ãŒã•ã‚Œã¦ã„ã‚‹è¤‡é›‘ãªå‹ã¯ãƒã‚¤ãƒˆé…åˆ—ã«æŠ¼ã—è¾¼ã‚ã‚‹ã€‚ï¼ˆå¤šãã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨åŒã˜ã‚ˆã†ã«ï¼‰é•·ã•ãŒæŒ‡å®šã•ã‚ŒãŸãƒã‚¤ãƒˆé…åˆ—ã¨ã—ã¦è¡¨ç¾ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®é †åºãŒä»»æ„ã«ã§ãã‚‹ã€‚ã®ã§ã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ã«ãŠã„ã¦é †åºã‚’æ„è­˜ã—ãªãã¦ã‚ˆããªã‚‹ã€‚wire format ã§ã¯å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç•ªå·ã¨ wire format ä¸Šã§ã®å‹ã§è­˜åˆ¥ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’å…ƒã«ã€ .proto ãƒ•ã‚¡ã‚¤ãƒ«ã§ã©ã†è¨˜è¿°ã•ã‚Œã¦ã„ãŸã®ã‹ã«å¯¾å¿œã—ã¦ã‚ˆã‚Šå…·ä½“çš„ãªå‹ã¨ã—ã¦è§£é‡ˆã—ãŸã‚Šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®åå‰ã‚’å–å¾—ã—ãŸã‚Šã§ãã‚‹ã‚ã‘ã§ã™ã€‚ä¾‹ãˆã° field number ãŒ 10 ã€ wire type ãŒ 2(ãƒã‚¤ãƒˆé…åˆ—) ã§ã‚ã£ãŸå ´åˆã«ã€ .proto ã§ã¯ string name = 10; ã¨ã„ã†å¯¾å¿œã™ã‚‹ field number ãŒã‚ã‚‹ãªã‚‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¯ name ã§ã‚ã‚Šãƒã‚¤ãƒˆé…åˆ—ã¯æ–‡å­—åˆ—ã¨ã—ã¦è§£é‡ˆã§ããã†ã ã¨åˆ¤æ–­ã§ãã¾ã™ã€‚ã¨ã¯ã„ãˆã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæ¸ˆã¿ãƒã‚¤ãƒŠãƒªã‚’é »ç¹ã«æ‰±ã£ã¦ãã‚‹ã¨ã€ã¾ã—ã¦ã‚„è¤‡æ•°ã®ã‚·ã‚¹ãƒ†ãƒ ã§ãƒ‡ãƒ¼ã‚¿äº¤æ›ã‚’ã—å‡ºã™ã¨æ™‚ã«ã¯ .proto ã‚„ descriptor ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã—ã«å†…å®¹ã‚’ç¢ºèªã—ãŸã„æ™‚ãŒã‚ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚ç‰¹ã«ãƒ‡ãƒ¼ã‚¿äº¤æ›ã‚’è¡Œã†å ´åˆã‚·ã‚¹ãƒ†ãƒ é–“ã§æŒã¤ã‚¹ã‚­ãƒ¼ãƒãŒç•°ãªã‚‹å ´åˆã«ã¯ã“ã®å¸Œæœ›ã¯å¤§ãããªã‚‹ã‹ã‚‚ã§ã™ã€‚ã¾ãŸãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã‚‹ç®‡æ‰€ã‚’çµã‚Šè¾¼ã¿ãŸã„ãªã©ã®è¦æœ›ã‹ã‚‰ã€ã‚¹ã‚­ãƒ¼ãƒã‚’ç”¨ã„ãŸå…·ä½“çš„ãªãƒ‡ãƒ¼ã‚¿ã®è§£é‡ˆã‚’ãªã‚‹ã¹ãé…ã‚‰ã›ãŸã„å ´åˆã«ã“ã®æˆ¦ç•¥ã¯æœ‰åŠ¹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚ãã‚“ãªã“ã¨ã‚’è€ƒãˆã€ Go ã§ç„¡ç†ã‚„ã‚Šã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæ¸ˆã¿ãƒã‚¤ãƒŠãƒªã‚’ã€ãã‚Œå˜ä½“ã®æŒã¤æƒ…å ±ã ã‘ã§è§£é‡ˆã—ã¦ã¿ã‚‹è©¦ã¿ã‚’ã—ã¾ã—ãŸã€‚Protocol Buffer without schemaã¨ã„ã†ã‚ã‘ã§ Go ã§ schema less ã§ protobuf ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç„¡ç†ã‚„ã‚Šè§£é‡ˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚github.comwire format ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è§£é‡ˆã¯ protowire ã¨ã„ã†æ—¢å­˜ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚Šã€è©³ç´°ãªéƒ¨åˆ†ã¯æ¦‚ã­ã“ã‚Œã§è¡Œãˆã¾ã™ã€‚wire format ã®è§£é‡ˆã®ä¸Šã§é¢å€’ãã•ã„ç‚¹ã¯å¯å¤‰é•·ã«ãªã‚Šã†ã‚‹ varint ã®å€¤ã‚„ ZigZag encoding ã•ã‚Œã†ã‚‹ signed integer ã‚ãŸã‚Šã§ã™ãŒã“ã®ã‚ãŸã‚Šã¯å®Ÿè£…ã•ã‚Œã¦ãã‚Œã¦ã„ã¾ã™ã€‚godoc.orgãƒã‚¤ãƒˆåˆ—ã®è©³ç´°ãªè§£é‡ˆã¯ descriptor ã®æƒ…å ±ãŒç„¡ã„ã¨æ­£ç¢ºãªå€¤ã¯å–ã‚Œã¾ã›ã‚“ã€‚ã“ã“ã§ã¯é›‘ã«ã€æ€ã„ã¤ãç¯„å›²ã®è§£é‡ˆã‚’å…¨éƒ¨è©¦ã—ã¦ wire format ã¨ã—ã¦ã¯ valid ãªå€¤ã‚’ã™ã¹ã¦è¿”ã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯æ–‡å­—åˆ—ã¨ãƒã‚¤ãƒˆåˆ—ã€ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€æ•´æ•°å‹ã® repeated ãªå€¤ãªã©ã§ã™ã€‚ãã®ã»ã‹ã«ã‚‚ Protocol Buffer ã¨ã—ã¦ã¯ãƒã‚¤ãƒˆåˆ—ã§ map å‹ãŒè¡¨ç¾ã§ãã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã«ã¤ã„ã¦ã¯ wire format ã‚„ãã®ä»–ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è©³ç´°ãªä»•æ§˜ãŒãªãï¼ˆã†ã¾ãè¦‹ã¤ã‘ã¦ãªãã¦ã©ã“ã‹ã«å­˜åœ¨ã™ã‚‹ã‹ã‚‚ï¼Ÿï¼‰ä¸€æ—¦è«¦ã‚ã¦ã„ã¾ã™ã€‚Go ã®å®Ÿè£…çš„ã«ã¯ãƒã‚¤ãƒˆåˆ—ã®ä¸­ã«æ›´ã«ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ä¼¼ã¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç•ªå·ã‚„ wire type ãŒæŒ‡å®šã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åˆ—ãŒå­˜åœ¨ã—ã¦ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç•ªå·ãŒ 1 ã§ã‚ã‚Œã° map ã® key ã€ 2 ã§ã‚ã‚Œã° value ã¨ãªã‚‹ã‚ˆã†ã§ã™ã€‚github.comã“ã‚Œã‚’ç”¨ã„ã¦ä»¥ä¸‹ã®ã‚ˆã†ãª .proto ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã“ã‚“ãªæ§˜ãªå€¤ã‚’è¨­å®šã—ã¦ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ãŸæ™‚ã®               msg := &protosl.Example{                    Uint64Val:  1,                    StringVal:  \"testing\",                    Fixed64Val: 11,                    Fixed32Val: 111,                    EnumVal:    protosl.Example_ONE,                    ChildVal: &protosl.Child{                        V: 1,                    },                    RUint64Val: []uint64{2, 3},                    RStringVal: []string{\"aaa\", \"bbb\"},                    // RFixed64Val: []uint64{22, 33}, TODO repeated fixed isn't supported                    // RFixed32Val: []uint32{222, 333}, TODO repeated fixed isn't supported                    REnumVal: []protosl.Example_Num{protosl.Example_ZERO, protosl.Example_ONE},                    RChildVal: []*protosl.Child{                        {                            V: 2,                        },                        {                            V: 3,                        },                    },                }ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå¾Œã®ãƒã‚¤ãƒŠãƒªã‚’é£Ÿã‚ã›ã‚‹ã¨ã€ã‹ãªã‚Šå†—é•·ã«ã¯ãªã‚Šã¾ã™ãŒä»¥ä¸‹ã®ã‚ˆã†ã«è§£é‡ˆã§ãã¾ã™ã€‚$ echo -n \"\\x08\\x01\\x12\\x07\\x74\\x65\\x73\\x74\\x69\\x6e\\x67\\x19\\x0b\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x25\\x6f\\x00\\x00\\x00\\x28\\x01\\x32\\x02\\x08\\x01\\xaa\\x06\\x02\\x02\\x03\\xb2\\x06\\x03\\x61\\x61\\x61\\xb2\\x06\\x03\\x62\\x62\\x62\\xca\\x06\\x02\\x00\\x01\\xd2\\x06\\x02\\x08\\x02\\xd2\\x06\\x02\\x08\\x03\" | protosl{\"1\":1,\"101\":{\"__bytes\":\"AgM=\",\"__packed\":[2,3],\"__string\":\"\\u0002\\u0003\"},\"102\":[{\"__bytes\":\"YWFh\",\"__packed\":[97,97,97],\"__string\":\"aaa\"},{\"__bytes\":\"YmJi\",\"__packed\":[98,98,98],\"__string\":\"bbb\"}],\"105\":{\"__bytes\":\"AAE=\",\"__packed\":[0,1],\"__string\":\"\\u0000\\u0001\"},\"106\":[{\"__bytes\":\"CAI=\",\"__message\":{\"1\":2},\"__packed\":[8,2],\"__string\":\"\\u0008\\u0002\"},{\"__bytes\":\"CAM=\",\"__message\":{\"1\":3},\"__packed\":[8,3],\"__string\":\"\\u0008\\u0003\"}],\"2\":{\"__bytes\":\"dGVzdGluZw==\",\"__packed\":[116,101,115,116,105,110,103],\"__string\":\"testing\"},\"3\":11,\"4\":111,\"5\":1,\"6\":{\"__bytes\":\"CAE=\",\"__message\":{\"1\":1},\"__packed\":[8,1],\"__string\":\"\\u0008\\u0001\"}}ãƒã‚¤ãƒŠãƒªã‚’ç›´æ¥ç¢ºèªã§ãã‚‹ã¨ä½•ã‹ã—ã‚‰ä¾¿åˆ©ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã®å¯¾å¿œä»˜ã‘ã¯å¾Œã§è¡Œã†ã®ã§ãƒ»ãƒ»ãƒ»ã¨ã„ã†æ™‚ã«å½¹ã®ã«ç«‹ã¤ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚","link":"https://syucream.hatenablog.jp/entry/2020/04/26/010710","isoDate":"2020-04-25T16:07:10.000Z","dateMiliSeconds":1587830830000,"authorName":"syucream","authorId":"syucream"},{"title":"åŸå‰‡ WFH å‹¤å‹™ãŒé–‹å§‹ã—ã¦äºŒãƒ¶æœˆãŒçµŒéã—ãŸ","contentSnippet":"ã‚¿ã‚¤ãƒˆãƒ«ã®é€šã‚Šã§å˜ãªã‚‹æ—¥è¨˜ãªã®ã§ã™ãŒã€ä»Šã®å¿ƒå¢ƒã‚’èµ¤è£¸ã€…ã«ç¶´ã£ã¦ãŠãã¨å¾Œã§æŒ¯ã‚Šè¿”ã‚Œã‚‹ã¨æ€ã„ã¤ã‚‰ã¤ã‚‰æ›¸ãã¾ã™ã€‚ãªãŠã“ã®ã‚¨ãƒ³ãƒˆãƒªã¯å€‹äººã®æ„è¦‹ã§ã™ã—ã€åŒã˜ä¼šç¤¾åŒã˜ãƒãƒ¼ãƒ ã§ã‚‚å—ã‘å–ã‚Šæ–¹ã‚„èª²é¡Œæ„Ÿã¯ã ã„ã¶å·®ç•°ãŒå‡ºã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªãƒ¼ã¨æ€ã£ã¦ã„ã¾ã™ã€‚äºŒãƒ¶æœˆå‰ã‹ã‚‰ã“ã‚Œã¾ã§ä»Šå¹´ 2 æœˆ 19 æ—¥ã«æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹è”“å»¶ã‚’å—ã‘ã¦ã€å‹¤ã‚å…ˆãŒä»¥ä¸‹ã®ã‚ˆã†ãªãƒ—ãƒ¬ã‚¹ã‚’å‡ºã—ã¾ã—ãŸã€‚about.mercari.comã“ã®æ®µéšã§å¤§è¦æ¨¡ã«ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã«è»¢æ›ã™ã‚‹ä¼æ¥­ã¯ãã†å¤šããªãã€ã“ã®ã¨ãã¯ä»£è¡¨ä¾‹ã¨ã—ã¦ã¯ GMO ã•ã‚“ã€ã¤ã„ã§ãƒ‰ãƒ¯ãƒ³ã‚´ã•ã‚“ã‚ãŸã‚ŠãŒåŸå‰‡ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã§æ¥­å‹™ã‚’ã™ã‚‹ã“ã¨ã‚’å®£è¨€ã—ã¦ã„ãŸè¨˜æ†¶ãŒã‚ã‚Šã¾ã™ã€‚æ±äº¬éƒ½å†…ã®ã“ã®æ™‚ã®çŠ¶æ³ã¨ã—ã¦ã¯ã€å°‘ãªã„ãªãŒã‚‰ã‚‚æ„ŸæŸ“äº‹ä¾‹ãŒæŒ™ã’ã‚‰ã‚Œã¤ã¤ã‚ã‚Šã€ä¼šç¤¾ã¨ã—ã¦ç‰¹ã«æ–¹é‡ãŒç„¡ãã¨ã‚‚ãƒãƒ¼ãƒ ã¨ã—ã¦æº€å“¡é›»è»Šã®é€šå‹¤ã‚’é¿ã‘ãŸã„ãªãªã©ã¨è©±ã—ã¦ã„ãŸã‚Šã—ã¾ã—ãŸã€‚ãã†ã„ã†æƒ…å‹¢ã ã£ãŸã®ã§ä¼šç¤¾ã¨ã—ã¦æ—©ã‚ã«æ–¹é‡ãŒæ‰“ã¡å‡ºã•ã‚ŒãŸã®ã¯ã„ã¡å¾“æ¥­å“¡ã¨ã—ã¦ã¯è¡Œå‹•æ–¹é‡ã‚’æ±ºã‚ã‚„ã™ãã‚‚ã‚ã‚Šã‚ã‚ŠãŒãŸã„ã‚‚ã®ã§ã—ãŸã€‚ãƒãƒ¼ãƒ çš„ã«ã¯ Slack ãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç››ã‚“ã«ã‚„ã£ã¦ãŠã‚Šã€ãƒªãƒ¢ãƒ¼ãƒˆå‹¤å‹™ã«å¿…è¦ãªè¨­å‚™ã‚‚ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ãŒãã‚Œã»ã©éšœå£ãªãè¡ŒãˆãŸã®ã¯å¹¸ã„ã§ã—ãŸã€‚WIAS ã¨ã„ã†å‹¤æ€ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ãŠä¸–è©±ã«ã‚‚ã“ã®é ƒã‹ã‚‰ãªã‚Šå§‹ã‚ã¾ã—ãŸã€‚tech.mercari.comã•ã¦åŸå‰‡ WFH ã¯ãã‚Œã»ã©èª²é¡Œãªãç¶™ç¶šã•ã‚Œã¦ã€ä¸€ãƒ¶æœˆãŒçµŒéã—ã¦ãŠèŠ±è¦‹ã‚·ãƒ¼ã‚ºãƒ³ã«ãªã‚‹é ƒã«ã¯ä¸–é–“çš„ã«ã‚‚ç·©ã¿ãŒå‡ºã¦ãã¦ã€ãƒãƒ¼ãƒ çš„ã«ã‚‚é€±ä¸€ãã‚‰ã„ã§å‡ºç¤¾ã—ã¦ç¤¾ä¼šå¾©å¸°ã—ã¦ã¿ã‚ˆã†ï¼ˆï¼Ÿï¼‰ã¨ã„ã†é›°å›²æ°—ãŒå‡ºã¦ãã¾ã—ãŸã€‚ãã®çŸ¢å…ˆã«æ°¸å¯¿ç·åˆç—…é™¢ã«ãŠã‘ã‚‹é™¢å†…æ„ŸæŸ“ãŒç™ºç”Ÿã—ã¦ï¼ˆé€šå‹¤çµŒè·¯ã‚„ç”Ÿæ´»åœçš„ã«ã“ã®ã‚ãŸã‚Šã§åƒ•ã¯ä½™è¨ˆã«å±æ©Ÿæ„Ÿã‚’è¦šãˆãŸã®ã§ã™ãŒï¼‰ã€ç·©ã¿å§‹ã‚ãŸãƒ ãƒ¼ãƒ‰ã¯ä¸€ç‚¹ã—ã¾ã™ã€‚ã‚ˆã‚Šå¼·ã WFH ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã€ä¸–é–“ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚‚ä»„æš—ã„ã‚‚ã®ã°ã‹ã‚Šã«ãªã£ã¦ãã¾ã™ã€‚ãã®å‚¾å‘ã¯ç·©ã‚€ã©ã“ã‚ã‹æ‚ªåŒ–ã™ã‚‹ã°ã‹ã‚Šã§ã€ã‚„ãŒã¦ç·Šæ€¥äº‹æ…‹å®£è¨€ã«è‡³ã‚Šã€æœ¬ç¨¿åŸ·ç­†æ™‚ã¯å¤šãã®é£²é£Ÿåº—ç­‰ãŒæ´»å‹•ã‚’ä¼‘æ­¢ã—ã¦è¡—ã¯ã™ã£ã‹ã‚Šæ¯ã‚’ã²ãã‚ã¦ã„ã¾ã™ã€‚WFH ã‚’ç¶šã‘ã¦ã¿ãŸæ‰€æ„Ÿãã‚“ãªå…·åˆã§ä¸–é–“çš„ã«ã¯æ¯”è¼ƒçš„æ—©ãåŸå‰‡ WFH ã®åƒãæ–¹ã«åˆ‡ã‚Šæ›¿ãˆã¦äºŒãƒ¶æœˆçµŒéã—ãŸè¨³ã§ã™ãŒã€‚WFH ã ã‹ã‚‰è¢«ã£ãŸè¢«å®³ã‚„ã‚„ã‚Šã«ãã•ã¨ã„ã†ã®ã¯ãã‚Œã»ã©ç„¡ã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ãŸã ã—ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒ¼ãƒ‰ãªã©ã‚’ä½¿ã£ã¦é›†å›£ã§ãƒ–ãƒ¬ã‚¹ãƒˆã—ãŸã‚Šã€ãµã‚‰ã£ã¨ç«‹ã¡è©±é¢¨ã«åŒåƒšã«å£°ã‹ã‘ã¦ç›¸è«‡ã™ã‚‹ã¨ã„ã†è¡Œå‹•ãŒã—ã«ãããªã£ãŸã®ã¯æå¤±ã§ã¯ã‚ã‚Šã¾ã™ã€‚ãŸã è‡´å‘½çš„ã§ã¯ãªã„ã¨ã‚‚ã€‚ã¾ãŸåƒ•ã®å ´åˆã¯éƒ¨å±‹ãŒç‹­ãï¼ˆè‡ªå®…ã®å¿«é©ã•ã‚ˆã‚Šé€šå‹¤ã®å¿«é©ã•ã«é‡ãã‚’ç½®ã„ã¦ã„ãŸï¼‰ã€åƒãã®ã«ã‚ã¾ã‚Šé©ã•ãªã„è‡ªå®…ç’°å¢ƒã ã£ãŸã®ã‚‚å¤§ããªèª²é¡Œã§ã—ãŸã€‚ä»Šå›ã®ä»¶ã§ä¸€ç•ªã®å•é¡Œã¯ WFH ã§å‹¤å‹™ã™ã‚‹ã“ã¨ãã‚Œè‡ªä½“ã§ãªãæ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹è”“å»¶ã®å…ˆè¡ŒããŒè¦‹ãˆãšã€æ™‚ã«ã¯å¤§ããçŠ¶æ³ãŒæ‚ªåŒ–ã™ã‚‹ã“ã¨ãŒã‚ã£ãŸéƒ¨åˆ†ã ã¨æ€ã„ã¾ã™ã€‚åƒãæ–¹ã¨ã„ã†ã‹åƒãã“ã¨ã¨ã„ã†ã‹ã€ãã‚Œä»¥å‰ã«ä¸–é–“ã‚’å–ã‚Šå·»ãçŠ¶æ³ãŒæ‚ªãã€ç²¾ç¥è¡›ç”Ÿã«è‰¯ããªã„ã®ãŒã‚‚ã£ã¨ã‚‚è¾›ã„ã€‚ã¨ã‚Šã‚ãˆãšã“ã®å…ˆç”Ÿãã®ã“ã‚‹ã«ã¯ç›´è¿‘è©¦ã—ã¦ã„ã‚‹ã®ã¯ã¨ã«ã‹ãä½œæ¥­ç’°å¢ƒã®æ”¹å–„ã§ã™ã€‚1K é™ç•Œä¸€äººæš®ã‚‰ã—éƒ¨å±‹ã¯ãã®ã¾ã¾ã§ã„ã‚‹ã¨æ¼ã‚Œãªãä»•äº‹å ´æ‰€ãŒãƒ™ãƒƒãƒ‰ãƒ«ãƒ¼ãƒ ã¨åŒä¸€å­˜åœ¨ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã«è€ãˆã‚‰ã‚Œã‚‹äººã¯è‰¯ã„ã®ã§ã—ã‚‡ã†ãŒã€åƒ•ã¯è€ãˆã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ã“ã®èª²é¡Œã«å¯¾ã—ã¦ç†æƒ³çš„ã«ã¯ã•ã£ã•ã¨å¼•ã£è¶Šã—ï¼ã—ãŸã„ã¨ã“ã‚ã§ã™ãŒã€ä¸è¦ä¸æ€¥ã®å¤–å‡ºã‚’è‡ªç²›ã™ã‚‹ã‚ˆã†æ±‚ã‚ã‚‰ã‚ŒãŸæˆ‘ã€…ã«ã§ãã‚‹ã“ã¨ã¯é™ç•ŒãŒã‚ã‚Šã¾ã™ã€‚ã¨ã„ã†ã‚ã‘ã§å¦¥å”æ¡ˆã¨ã—ã¦ã‚¯ãƒ­ãƒ¼ã‚¼ãƒƒãƒˆã®ä¸­ã®ã‚‚ã®ã‚’å¤–ã«è¿½ã„ã‚„ã‚‹ã‹æ€ã„åˆ‡ã£ã¦å‡¦åˆ†ã—ã¦ã‚¹ãƒšãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã—ã¦ã€ã‚¯ãƒ­ãƒ¼ã‚¼ãƒƒãƒˆå†…éƒ¨ã‚’ä½œæ¥­å ´æ‰€ã«ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚éƒ¨å±‹ãŒç‹­ãä½œæ¥­ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ã—ã«ãã„ã“ã¨ã«ã¤ã„ã‚«ãƒƒã¨ãªã£ã¦ã‚¯ãƒ­ãƒ¼ã‚¼ãƒƒãƒˆã‚’ç°¡æ˜“ä½œæ¥­ã‚¹ãƒšãƒ¼ã‚¹ã«ã—ã¦ã—ã¾ã£ãŸ pic.twitter.com/H5neupDO7tâ€” ã—ã‚…ãƒ¼ã€€ãã‚Šãƒ¼ã‚€ (@syu_cream) 2020å¹´4æœˆ8æ—¥  ã“ã®ã‚ˆã†ãªã‚¯ãƒ­ãƒ¼ã‚¼ãƒƒãƒˆã®æ´»ç”¨ã®ä»•æ–¹ã«ã¯ã€Œã‚¯ãƒ­ãƒƒãƒ•ã‚£ã‚¹ã€ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã‚ˆã†ã§ã™ï¼ˆã©ã‚Œãã‚‰ã„çŸ¥ååº¦ãŒã‚ã‚‹ã‹ã¯çŸ¥ã‚‰ã‚“ï¼‰weboo.linkä»Šã§ã¯ã‚«ãƒ¼ãƒ†ãƒ³ã§ç°¡æ˜“ä»•åˆ‡ã‚Šã‚’è¨­ã‘ãŸã‚Šé€ èŠ±ã§è‰ã‚’ç”Ÿã‚„ã—ãŸã‚Šæœ€é©åŒ–ã‚’é€²ã‚ã¦ã„ã¾ã™ã€‚ã‚¯ãƒ­ãƒ¼ã‚¼ãƒƒãƒˆã‚’æ½°ã—ã¦ä½œã£ãŸä½œæ¥­ã‚¹ãƒšãƒ¼ã‚¹ã€è¬ã®é€²åŒ–ã‚’ã—å§‹ã‚ã¦ã„ã‚‹ pic.twitter.com/ZPtbcKbfyMâ€” ã—ã‚…ãƒ¼ã€€ãã‚Šãƒ¼ã‚€ (@syu_cream) 2020å¹´4æœˆ20æ—¥  ãã—ã¦ç²¾ç¥è¡›ç”Ÿã«æ‚ªã„çŠ¶æ³ã§ã‚ã‚‹ã“ã¨ã¯ã€ã‚‚ã†ã—ã‚‡ã†ãŒãªã„ã€‚ã—ã°ã‚‰ãã¯ä»Šå›ã®é¨’å‹•ãŒèµ·ã“ã‚‹å‰ã¨åŒã˜ã‚ˆã†ã«ã¯åƒã‘ãªã„ã¨ã€è«¦ã‚ã‚‹ã“ã¨ã«ã—ã¦ã„ã¾ã™ã€‚é€†ã«ã“ã®çŠ¶æ³ã®å¤‰åŒ–ã§ç”Ÿç”£æ€§ãŒå‘ä¸Šã™ã‚‹ã®ãªã‚‰ãã‚Œã¯ã¨ã¦ã‚‚ã™ã”ã„ã“ã¨ã€‚ã ã‘ã©ãã†ãã†èµ·ã“ã‚‰ãªã„ã“ã¨ã€‚ã¤ã‘åŠ ãˆã‚‹ãªã‚‰ã€ãƒ¡ãƒ³ã‚¿ãƒ«ãŒå¼±ã£ãŸè‡ªè¦šãŒå‡ºã¦ã‚‹ã†ã¡ã«ã•ã£ã•ã¨æœ‰çµ¦ã‚’å–ã‚‹ãªã‚Šã—ã¦ä¼‘ã‚“ã§ã—ã¾ã†ã®ãŒè‰¯ã„ã¨ã‚‚æ€ã£ã¦ã„ã¾ã™ã€‚ã­ã¦ã‚Œã°ãªãŠã‚‹ã€ã—ã‚‰ã‚“ã‘ã©ã€‚","link":"https://syucream.hatenablog.jp/entry/2020/04/20/232546","isoDate":"2020-04-20T14:25:46.000Z","dateMiliSeconds":1587392746000,"authorName":"syucream","authorId":"syucream"},{"title":"BigQuery SQL UDF ã®æŒ™å‹•ã‚’è‰²ã€…ç¢ºèªã™ã‚‹","contentSnippet":"BigQuery ã§ã¯ãƒ¦ãƒ¼ã‚¶å®šç¾©é–¢æ•°(UDF) ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã“ã‚Œã‚’ä½¿ã£ã¦ã€ã‚ˆãä½¿ã‚ã‚Œã‚‹å¼ã‚„é–¢æ•°å‘¼ã³å‡ºã—ã®çµ„ã¿åˆã‚ã›ã‚’åå‰ä»˜ã‘ã—ã¦å†åˆ©ç”¨ã§ãã‚‹ã€‚cloud.google.comUDF ã¯ SQL ã¨ JavaScript ã®äºŒç¨®é¡ã®è¨€èªã«ã‚ˆã‚‹è¨˜è¿°ãŒå¯èƒ½ã§ã€å¾Œè€…ã¯è‰²ã€…ãªãƒˆãƒªãƒƒã‚­ãƒ¼ãªåˆ©ç”¨ä¾‹ã‚‚ä¸–ã«å‡ºã¦ã„ã‚‹ã®ã§çŸ¥ã£ã¦ã„ã‚‹äººã‚‚å¤šã„ã‹ã‚‚çŸ¥ã‚Œãªã„ã€‚ä¾‹ãˆã° WebAssembly ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‹ã§ã‚ã‚‹ã€‚medium.comæœ¬è¨˜äº‹ã§ã¯ åœ°å‘³ãªæ–¹ ç´ ç›´ãª SQL ã§ã®è¨˜è¿°ã«ã‚ˆã‚‹ UDF ã«ã¤ã„ã¦è‰²ã€…æŒ™å‹•ã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã€‚æˆ»ã‚Šå€¤ã®å‹ã‚’æ¨è«–ã—ã¦ãã‚Œã‚‹UDF ã¯ä¾‹ãˆã°ã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®ã ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã§ãã‚‹ã€‚CREATE TEMP FUNCTION  zero()  RETURNS INT64 AS (0);SELECT  zero()ã“ã“ã§æˆ»ã‚Šå€¤ã®å‹ã¯çœç•¥ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ï¼ˆå‹æ‰‹ã«è§£æ±ºã—ã¦ãã‚Œã‚‹ï¼‰CREATE TEMP FUNCTION  zero()  AS (0);SELECT  zero()STRUCT å‹ã®æˆ»ã‚Šå€¤ã‚‚æ¨è«–ã—ã¦ãã‚Œã‚‹ã€‚ãŒã€ã‚‚ã¡ã‚ã‚“å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®æƒ…å ±ã¯ãªã„ã®ã§ãƒ€ãƒŸãƒ¼ã®å€¤ãŒè£œå®Œã•ã‚Œã¦ã—ã¾ã†ã€‚CREATE TEMP FUNCTION  user()  AS ((1, \"taro\"));SELECT  user()[  {    \"f0_\": {      \"_field_1\": \"1\",      \"_field_2\": \"taro\"    }  }]RETURNS ã§å‹ã‚’æ˜ç¤ºã™ã‚‹ã¨ãã“ã«è¨˜è¿°ã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’æ‹¾ã£ã¦ãã‚Œã‚‹ã€‚CREATE TEMP FUNCTION  user()  RETURNS STRUCT<id INT64, name STRING>  AS ((1, \"taro\"));SELECT  user()[  {    \"f0_\": {      \"id\": \"1\",      \"name\": \"taro\"    }  }]UDF ã‹ã‚‰ UDF ã‚’å‘¼ã¶éš›ã¯ã™ã§ã«å®šç¾©æ¸ˆã¿ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹UDF ã‹ã‚‰åˆ¥ã® UDF ã‚’å‘¼ã³å‡ºã™ã“ã¨ã‚‚ã§ãã‚‹ã€‚CREATE TEMP FUNCTION  callee() AS (42);CREATE TEMP FUNCTION  caller() AS (callee());SELECT  caller()ã“ã®å®šç¾©é †åºã‚’é€†ã«ã™ã‚‹ã¨ã‚¯ã‚¨ãƒªã®å®Ÿè¡ŒãŒé€šã‚‰ãªããªã‚‹ã€‚ Function not found: callee; failed to parse CREATE [TEMP] FUNCTION statement at [5:16] ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã†ã€‚CREATE TEMP FUNCTION  caller() AS (callee());  -- <- Function not found :(CREATE TEMP FUNCTION  callee() AS (42);SELECT  caller()UDF ã®å†å¸°å‘¼ã³å‡ºã—ã‚’ã™ã‚‹ã“ã¨ã‚‚ã§ããªã„ã€‚ã“ã®ä¾‹ã§ã¯ Function not found: fib; failed to parse CREATE [TEMP] FUNCTION statement at [10:7] ã¨æ€’ã‚‰ã‚Œã¦ã—ã¾ã†ã€‚CREATE TEMP FUNCTION  fib(n INT64) AS (  IF    ( n > 2,      fib(n - 1) + fib(n - 2),      1 ) );SELECT  fib(2)ã ã£ãŸã‚‰ä¸€åº¦ãƒ€ãƒŸãƒ¼ã® UDF ã‚’å®šç¾©ã—ã¦ã¿ã‚ˆã†ï¼ã¨ã„ã†ã“ã¨ã§ä¸€æ™‚ UDF ã˜ã‚ƒãªãæ°¸ç¶š UDF ã‚’ã€ä¸€åº¦ãƒ€ãƒŸãƒ¼ã®ã‚‚ã®ã‚’å®šç¾©ã—ãŸã‚ã¨ REPLACE ã—ã¦ã¿ã‚‹ã€‚ã“ã®ã‚¯ã‚¨ãƒªã¯ãã‚Œè‡ªä½“ã¯ valid ã¨è¨€ã‚ã‚Œå®Ÿè¡Œå¯èƒ½ã§ã‚ã‚‹ã€‚-- dummyCREATE OR REPLACE FUNCTION  udfs.fib(n INT64) AS (1); CREATE OR REPLACE FUNCTION  udfs.fib(n INT64) AS (  IF    ( n > 2,      udfs.fib(n - 1) + udfs.fib(n - 2),      1 ) );SELECT  udfs.fib(2)ãŒã€ã“ã‚Œã¯å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨ Query error: Too many nested views/persistent user-defined functions or possible circular reference of views/persistent user-defined functions referenced in query. Only 16 levels of nested views/persistent user-defined functions are allowed. at [11:1] ã¨æ€’ã‚‰ã‚Œã¦ã—ã¾ã†ã€‚ UDF ã§ã¯ 16 ãƒã‚§ãƒ¼ãƒ³ã¾ã§ã—ã‹ UDF å‘¼ã³å‡ºã—ã‚’ã§ããªã„åˆ¶é™ãŒã‚ã‚Šãã‚Œã«å¼•ã£ã‹ã‹ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚ã‚‹ã€‚ã“ã®ä¾‹ã§ã¯ udfs.fib(2) ã‚’å‘¼ã³å‡ºã—ã¦ã‚‚ãã‚‚ãã‚‚å†å¸°å‘¼ã³å‡ºã—ã•ã‚Œãªã„æ°—ãŒã™ã‚‹ãŒãƒ»ãƒ»ãƒ»ã€‚cloud.google.comé ‘å¼µã‚Œã°ãƒ«ãƒ¼ãƒ—å‡¦ç†ã‚’æ›¸ã‘ã‚‹UDF ã§ã¯å‰è¿°ã®é€šã‚Šå†å¸°å‘¼ã³å‡ºã—ã§ããšã€ãƒ«ãƒ¼ãƒ—ã™ã‚‹ã‚ˆã†ãªåˆ¶å¾¡æ§‹æ–‡ã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ã€‚ãŒã€ ARRAY å‹ã®å€¤ã¨ ARRAY å‹é–¢é€£é–¢æ•°ã‚’ä½¿ã†ã¨ãƒ«ãƒ¼ãƒ—ã€ãƒªã‚¹ãƒˆã®å„è¦ç´ ã«å¯¾ã™ã‚‹ç¹°ã‚Šè¿”ã—å‡¦ç†çš„ãªã“ã¨ãŒã§ãã‚‹ã€‚ãƒŸã‚½ã¨ãªã‚‹ã®ãŒã¿ã‚“ãªå¤§å¥½ã UNNEST() ã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ‰‹ã«ã„ã‚Œã‚‹ã“ã¨ãŒã§ãã‚‹ã“ã¨ã¨ã€ ARRAY() ã®å¼•æ•°ã¯ã‚µãƒ–ã‚¯ã‚¨ãƒªã‚’å–ã‚Œã‚‹è¾ºã‚Šã«ã‚ã‚‹ï¼CREATE TEMP FUNCTION  array_twice(n INT64) AS (ARRAY(    SELECT      AS STRUCT (      SELECT        ARRAY_AGG(vv)      FROM (        SELECT          v * 2  -- <- like a map function        FROM          UNNEST(GENERATE_ARRAY(1, n)) AS v) AS vv)));SELECT  array_twice(100)ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ä¸Šè¨˜ã‚ˆã‚Š SELECT æ–‡ãŒæ‰“ã¦ã‚‹ã“ã¨ã‚’ç¢ºèªã§ããŸã®ã§ FROM å¥ã«å®Ÿãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ¸¡ã—ã¦ã¿ã‚‹ã€‚ã“ã®ã‚¯ã‚¨ãƒªã‚‚åˆæ³•ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ï¼CREATE TEMP FUNCTION  do() AS (ARRAY(    SELECT      AS STRUCT (      SELECT        ARRAY_AGG(vv)      FROM (        SELECT          LENGTH(repo_name)  -- <- like a map function        FROM          `bigquery-public-data.github_repos.licenses` -- <- refer to a table        LIMIT          10) AS vv)));SELECT  do()ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ãƒ†ãƒ¼ãƒ–ãƒ«å‚ç…§ã«é–¢ã™ã‚‹è¨˜è¿°ãŒã‚ã‚‹ã®ã§ã€ã“ã®æŒ™å‹•ã¯ä¸€å¿œæƒ³å®šã•ã‚ŒãŸã‚‚ã®ã®ã¯ãšã€‚ï¼ˆã‚‚ã—ã‹ã—ãŸã‚‰ä»–ã®ã¾ã£ã¨ã†ãªå‚ç…§æ–¹æ³•ãŒã‚ã‚‹ã®ã‹ã‚‚ï¼‰ä¸€æ„ã® UDF ã¨ãƒ†ãƒ¼ãƒ–ãƒ«å‚ç…§ã‚’åˆã‚ã›ãŸã‚¯ã‚¨ãƒªã‚ãŸã‚Šã®æœ€å¤§æ•° - 1,000ã€‚å®Œå…¨ãªå±•é–‹å¾Œã«ã€UDF ã”ã¨ã«ä¸€æ„ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ UDF ã‚’åˆã‚ã›ã¦ 1,000 å€‹ã¾ã§å‚ç…§ã§ãã¾ã™ã€‚cloud.google.com","link":"https://syucream.hatenablog.jp/entry/2020/03/08/024100","isoDate":"2020-03-07T17:41:00.000Z","dateMiliSeconds":1583602860000,"authorName":"syucream","authorId":"syucream"},{"title":"Apache Parquet ã® Logical Types ã«é–¢ã™ã‚‹ãƒ¡ãƒ¢","contentSnippet":"å»å¹´æœ«ã«ãªã‚Šã¾ã™ãŒã€ embulk-output-s3_parquet ã¨ã„ã† Embulk Plugin ã«ã¦ Logical Type ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®ãƒ‘ãƒƒãƒã‚’æ›¸ãã€ãƒãƒ¼ã‚¸ã—ã¦ã„ãŸã ãã¾ã—ãŸã€‚github.comå€‹äººçš„ãªä¸»ãªç›®çš„ã¯ timestamp å‹ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã§ã—ãŸã€‚ Athena ã‚„ BigQuery ã‹ã‚‰å‚ç…§ã™ã‚‹ã«ã‚ãŸã‚Š timestamp å‹ã¨ã—ã¦æ‰±ãˆã‚‹ã‹å¦ã‹ã§ä½¿ã„å‹æ‰‹ã¯å¤§ããå¤‰ã‚ã‚Šã¾ã™ã€‚Logical Type ã¨ã—ã¦ã®æ‰±ã„ã‚’æœŸå¾…ã™ã‚‹ã‹ã‚’è¨­å®šã«æ›¸ãå¿…è¦ã¯ã‚ã‚‹ã‚‚ã®ã®ã€å‰²ã¨ç°¡ç´ ãªè¨­å®šã§ timestamp å‹å¯¾å¿œãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚ã•ã¦ã“ã® Logical Type ã§ã™ãŒã€ 2020 å¹´ 2 æœˆç¾åœ¨ 2 ç¨®é¡ã®ä»•æ§˜ãŒæ··åœ¨ã—ã¦ã‹ã¤å¤ã„ä»•æ§˜ãŒäº‹å®Ÿä¸Šã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã«ãªã£ã¦ã„ã‚‹çŠ¶æ…‹ã§ã™ã€‚è‡ªåˆ†ã¯æœ€åˆæ··ä¹±ã—ãŸã®ã§ã™ãŒã€ã“ã®ä¸å¹¸ã®é€£é–ã‚’æ­¢ã‚ãŸã„ã®ã§ã€æœ¬è¨˜äº‹ã«è‡ªåˆ†ãŒæŠŠæ¡ã—ãŸçŠ¶æ…‹ã‚’è¨˜éŒ²ã—ã¦ãŠãã¾ã™ã€‚å¤ã„ä»•æ§˜ \"Converted Types\"ã“ã“ã¾ã§ä¸€å£ã« \"Logical Types\" ã¨ã„ã£ã¦ã—ã¾ã£ãŸã®ã§ã™ãŒã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸Šã¯å¤ã„ä»•æ§˜ã¯ Converted Types, æ–°ã—ã„ä»•æ§˜ãŒ Logical Types ã¨åŒºåˆ¥ã•ã‚Œã¾ã™ã€‚ãã—ã¦ç¾åœ¨ä½¿ã‚ã‚Œã‚‹ Logical Types ã¨ã—ã¦ã¯ã“ã® Converted Types ãŒä¸€èˆ¬çš„ã§ã—ã‚‡ã†ã€‚github.comå‰æã¨ã—ã¦ã€ Parquet ãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹å‹ ã¯ä»¥ä¸‹ã®ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚BOOLEANINT32INT64INT96FLOATDOUBLEBYTE_ARRAYConverted Types ã§ã¯ã“ã‚Œã‚‰ã®å‹ã«åˆ¥è§£é‡ˆã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯ OriginalType ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚ï¼ˆã“ã®ã‚¯ãƒ©ã‚¹åã‹ã‚‰ã‹ã€ JIRA ã‚„ GitHub ä¸Šã®ã‚„ã‚Šå–ã‚Šã‚’è¦‹ã‚‹ã¨ Converted Types ã®ã“ã¨ã‚’ Original Types ã¨å‘¼ã¶ã“ã¨ã‚‚ã‚ã‚‹ã£ã½ã„ï¼Ÿã‚ˆã†ã§ã™ã€‚ Java å®Ÿè£…ã«é™ã£ãŸè©±ã‹ã‚‚ï¼‰MAP,LIST,UTF8,MAP_KEY_VALUE,ENUM,DECIMAL,DATE,TIME_MILLIS,TIME_MICROS,TIMESTAMP_MILLIS,TIMESTAMP_MICROS,UINT_8,UINT_16,UINT_32,UINT_64,INT_8,INT_16,INT_32,INT_64,JSON,BSON,INTERVALembulk-output-s3_parquet ã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹ timestamp å‹ã¯ã“ã“ã«ç¾ã‚Œã‚‹ TIMESTAMP_MILLIS, TIMESTAMP_MICROS ã«ãªã‚Šã¾ã™ï¼ã¾ãŸ Parquet ã§ã¯æ–‡å­—åˆ—å‹ãŒã“ã® Converted Types ã® UTF8 OriginalType ã‚’ä½¿ã£ã¦è¡¨ç¾ã•ã‚Œã¾ã™ã€‚ãã®ãŸã‚ã€Parquet ã® Converted Types ã¯ä¾‹ãˆã° Avro ã«ãŠã‘ã‚‹ Logical Types ã‚ˆã‚Šã¯å¤šãã®ãƒ¦ãƒ¼ã‚¶ãŒè§¦ã‚Œã‚‹æ©Ÿä¼šãŒã‚ã‚‹æ¦‚å¿µã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚æ–°ã—ã„ä»•æ§˜ \"Logical Types\"æ–°ã—ã„ Logical Types ã¯ UUID ã‚„ãƒŠãƒç§’ç²¾åº¦ timestamp ãªã©ã•ã‚‰ã«ãƒªãƒƒãƒãªå‹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãŸã‚Šã€ Builder ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã®ã‚¹ã‚­ãƒ¼ãƒæ§‹ç¯‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãŸã‚Šã¨æ§˜ã€…ãªæ›´æ–°ã‚’å«ã¿ã¾ã™ã€‚Converted Types ã¨ã®äº’æ›æ€§ã‚‚è€ƒæ…®ã•ã‚Œã¦ãŠã‚Šã€äº’æ›ãŒã‚ã‚‹è¡¨ç¾ã®å ´åˆã¯å¤‰æ›ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚æä¾›ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ Parquet 1.11.0 ã‹ã‚‰ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€ maven central repository ã«ä¸ŠãŒã£ãŸã®ãŒ 2019 å¹´ 11 æœˆã§ã‚ã‚Šã¾ã æ­´å²ãŒæµ…ã„æ©Ÿèƒ½ã¨ã„ãˆã¾ã™ã€‚ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®å¯¾å¿œã¨ã—ã¦ã‚‚ã€ Hive ã§ã‚µãƒãƒ¼ãƒˆé–‹å§‹ãŒã•ã‚Œå§‹ã‚ãŸ ã‚ˆã†ã§ã™ãŒ Spark ã¯ã¾ã  ã ã£ãŸã‚Šæ™®åŠã™ã‚‹ã®ã«ã¯ã¾ã æ™‚é–“ã‚’è¦ã—ãã†ã§ã™ã€‚BigQuery ãªã©ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«ãŠã„ã¦ã‚‚ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯å®šã‹ã§ã¯ãªã„ã§ã™ãŒã€ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã«ã—ã¦ã‚‚ã‚‚ã†ã—ã°ã‚‰ãæ™‚é–“ãŒå¿…è¦ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚ãã‚“ãªè¨³ã§ 2020 å¹´ 2 æœˆç¾åœ¨ã€ã¾ã å¤šãã®å ´åˆã¯ Converted Types ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã«ãªã‚‹ã¨æ€ã†ã®ã§ã™ãŒã€å°†æ¥çš„ã« Logical Types ã«ç½®ãæ›ãˆã‚‹ã“ã¨ã‚„å¤‰æ›ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚‹ã“ã¨ã‚’çŸ¥ã£ã¦ãŠãã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚ã¾ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯æ–°ã—ã„ Logical Types ã«é–¢ã™ã‚‹è¨˜è¿°ã®æ–¹ãŒå¢—ãˆã¦ã„ãã¨æ€ã‚ã‚Œã€ç¾è¡Œï¼’ã¤ã®ä»•æ§˜ãŒã‚ã‚Šãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¨˜è¿°ã¨è‡ªåˆ†ãŒå¿…è¦ã¨ã—ã¦ã„ä»•æ§˜ãŒã©ã¡ã‚‰ã®ã‚‚ã®ã‹æ„è­˜ã™ã‚‹ã“ã¨ãŒã—ã°ã‚‰ãå¿…è¦ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚","link":"https://syucream.hatenablog.jp/entry/2020/02/24/030836","isoDate":"2020-02-23T18:08:36.000Z","dateMiliSeconds":1582481316000,"authorName":"syucream","authorId":"syucream"},{"title":"Schema Registry ã«ã¤ã„ã¦æ›¸ã„ã¦ã„ã ãã®1: Confluent Schema Registry","contentSnippet":"åˆ†æ•£ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚„ãƒ­ã‚°åé›†åŸºç›¤ã«ãŠã„ã¦ã€ã—ã°ã—ã°ã‚¹ã‚­ãƒ¼ãƒã®æ‰±ã„ã¯ä¾¿åˆ©ã§ã‚ã‚‹åé¢é ­ã‚’æ‚©ã¾ã›ã‚‹ç¨®ã«ãªã‚Šã¾ã™ã€‚ã‚¹ã‚­ãƒ¼ãƒã‚’å³å¯†ã«å®šç¾©ã—ã¦ã€ Protocol Buffers ã‚„ Avro ãªã©ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚µã‚¤ã‚ºã®æ¸›å°‘ã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ‰±ã„ã®å®‰å…¨æ€§ã‚’å®Ÿè¡Œæ™‚ã‚ˆã‚Šæ—©ãæ¤œå‡ºã§ãã‚‹æ©Ÿä¼šãŒå¢—ãˆã¾ã™ã€‚ã—ã‹ã—ã‚¹ã‚­ãƒ¼ãƒã®äº’æ›æ€§ã«æ°—ã‚’ã¤ã‘ãŸã‚Šã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ»ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–“ã§ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’ã©ã†å…±æœ‰ã™ã‚‹ã‹ã®èª²é¡Œã‚‚ç™ºç”Ÿã—ã¾ã™ã€‚ã“ã®èª²é¡Œã¯ã€æ˜¨å¹´ç™ºå£²ã•ã‚ŒãŸ \"ãƒ‡ãƒ¼ã‚¿æŒ‡å‘ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³\" ã§ã‚‚ \"4.1.4.3 ãã‚‚ãã‚‚ãƒ©ã‚¤ã‚¿ãƒ¼ã®ã‚¹ã‚­ãƒ¼ãƒã¨ã¯ä½•ãªã®ã‹ï¼Ÿ\" ãªã©ã§è§¦ã‚Œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ä¸–ã®ä¸­ã«ã¯ã“ã®èª²é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã® \"ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒª\" ã¨å‘¼ã°ã‚Œã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã€ã‚µãƒ¼ãƒ“ã‚¹ãŒã„ãã¤ã‹å­˜åœ¨ã—ã¾ã™ã€‚æ®‹å¿µãªãŒã‚‰æ—¥æœ¬èªã®è³‡æ–™ãŒã‚ã¾ã‚Šç„¡ã„ã‚ˆã†ã«ã‚‚æ„Ÿã˜ã¾ã™ã—ã€ç­†è€…ã®æ°—ãŒæ¸ˆã‚€ã‹é£½ãã‚‹ã¾ã§æ§˜ã€…ãªã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚’æ¢ç´¢ã—ã¦ã¿ã‚ˆã†ã‹ã¨æ€ã„ã¾ã™ã€‚ç¬¬ä¸€å›ã¯ Confluent Schema Registry ã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ã¾ã™ã€‚ï¼ˆæ®‹å¿µãªãŒã‚‰ç­†è€…ã¯ Confluent Schema Registry ã‚’å®Ÿå‹™ã§è§¦ã‚ŒãŸçµŒé¨“ãŒãªãã€ãªã«ã‹å†…å®¹ã«èª¤ã‚ŠãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼‰Confluent Schema Registry ã¨ã¯Confluent Schema Registry ã¯ã€ãƒãƒãƒ¼ã‚¸ãƒ‰ãª Apache Kafka ã‚’æä¾›ã™ã‚‹ Confluent ç¤¾ ãŒé–‹ç™ºã—ãŸã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã§ã™ã€‚docs.confluent.ioä»¥ä¸‹ã®ã‚ˆã†ãªæ©Ÿèƒ½ã‚’æŒã£ã¦ã„ã¾ã™ã€‚Apache Kafka ã«çµ„ã¿è¾¼ã‚€æƒ³å®šã§ã€ Apache Avro ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ç®¡ç†Subject åã¨ã„ã†ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªç”¨ã®ã‚¹ã‚­ãƒ¼ãƒè§£æ±ºã®ç‚ºã®ã‚­ãƒ¼æƒ…å ±ã‚’æŒã¤Kafka ã®å°‚ç”¨ topic ã«ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’æ ¼ç´ã™ã‚‹äº’æ›æ€§ãƒã‚§ãƒƒã‚¯ã®æ©Ÿæ§‹ã‚’æŒã¤REST API ã‚’æä¾›ã™ã‚‹ç®¡ç†ç”¨ã® WebUI ã§ã‚¹ã‚­ãƒ¼ãƒç®¡ç†ã‚’è¡Œãˆã‚‹Apache Avro ã«ã¤ã„ã¦ã¯ä»¥å‰æœ¬ãƒ–ãƒ­ã‚°ã§è§¦ã‚Œã¾ã—ãŸã—ä¸–ã®ä¸­ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå¤šæ•°å­˜åœ¨ã™ã‚‹ã®ã§ã“ã“ã§ã¯åˆ¥æ®µè§¦ã‚Œã¾ã›ã‚“ã€‚ã‚¹ã‚­ãƒ¼ãƒã¯ Subject ã¨ã„ã†è­˜åˆ¥ã«ç”¨ã„ã‚‹åå‰ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã§ç®¡ç†ã•ã‚Œã¾ã™ã€‚Subject ã‚’ã©ã†æ±ºã‚ã‚‹ã‹ã¯ã„ãã¤ã‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ topic åã«ãªã£ã¦ã„ã¾ã™ã€‚topic åã‚’ç”¨ã„ã‚‹å ´åˆã¯ã‚ã‚‹ topic ã«æµã‚Œã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã‚¹ã‚­ãƒ¼ãƒã¯ä¸€ã¤ã«é™å®šã•ã‚Œã€è¤‡æ•°ã®ç•°ãªã‚‹ã‚¹ã‚­ãƒ¼ãƒã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æµã™ã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚ã“ã‚Œã‚’è¡Œã„ãŸã„å ´åˆã¯ä»–ã«ãƒ¬ã‚³ãƒ¼ãƒ‰åã‚‚ã—ãã¯ topic åã¨ãƒ¬ã‚³ãƒ¼ãƒ‰åã®çµ„ã¿åˆã‚ã›ã‚’ Subject ã¨ã—ã¦ç”¨ã„ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã®æ ¼ç´å…ˆãŒãã‚Œã‚‚ã¾ãŸ Kafka ã§ã‚ã‚‹ã®ã¯ã¡ã‚‡ã£ã¨ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªç‚¹ã¨è¨€ãˆãã†ã§ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã‚·ãƒ³ã‚°ãƒ«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã® _schemas topic ã«ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’æ ¼ç´ã™ã‚‹ã‚ˆã†ã§ã™ã€‚docs.confluent.ioã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã¨ã„ã†æ©Ÿæ§‹ã®æ‚©ã¾ã—ã„ç‚¹ã¨ã—ã¦ã€ãã‚Œè‡ªä½“ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒã‚¹ã¨åŒç­‰ãã‚‰ã„ã®å¯ç”¨æ€§ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã“ã¨ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒã‚¹ãŒç”Ÿãã¦ã„ã¦ã‚‚ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªãŒæ­»ã‚“ã§ã„ã‚‹ãªã‚‰ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹æ™‚ã«ç”¨ã„ãŸã‚¹ã‚­ãƒ¼ãƒã‚’ä½•å‡¦ã«ã‚‚æ ¼ç´ã§ããšã€ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹å´ã®ã‚·ã‚¹ãƒ†ãƒ ã«ä¼ãˆã‚‹è¡“ã‚‚å¤±ã†ãŸã‚ã§ã™ã€‚Confluent Schema Registry ã§ã¯ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã® REST API ã‚’æä¾›ã™ã‚‹ HTTP ã‚µãƒ¼ãƒã®å¯ç”¨æ€§ã®æ‡¸å¿µã¯æ®‹ã‚Šã¾ã™ãŒã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¯ Kafka ãã‚Œè‡ªä½“ã¨é‹å‘½å…±åŒä½“ã«ãªã‚‹ãŸã‚è€ƒãˆã‚‹èª²é¡ŒãŒä¸€ã¤æ¸›ã‚Šãã†ã§ã™ã€‚Confluent Schema Registry ã¯æ›´ã«ã‚¹ã‚­ãƒ¼ãƒã®æ›´æ–°å•é¡Œã«ã‚‚è§£æ±ºç­–ã‚’ã‚‚ã‚‰ãŸã—ã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¨¼åƒã•ã›ã¦ã„ãã†ã¡ã«ã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ã—ãŸããªã‚‹ã‚·ãƒ¼ãƒ³ãŒç™»å ´ã™ã‚‹ã®ã¯è‡ªç„¶ãªã“ã¨ã§ã—ã‚‡ã†ã€‚ã“ã®éš›ã« Confluent Schema Registry ã¯ Kafka ã® Producer ãŒä½œæˆã—ãŸ Avro ã®ã‚¹ã‚­ãƒ¼ãƒã¯è§£æ±ºã—ã¦ãã‚Œã¾ã™ãŒã€ Consumer å´ã«ã‚‚é…æ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã° Consumer ãŒå¿…è¦ã¨ã—ã¦ã„ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚‹æ—¥ Producer ãŒé€ä¿¡ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ç„¡æ–­ã§å‰Šé™¤ã•ã‚ŒãŸãªã‚‰ã€ Consumer å´ã§ä½•ã‚‰ã‹ã®å•é¡ŒãŒå‡ºã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã®å•é¡Œã«é…æ…®ã™ã‚‹ãŸã‚ã€ Confluent Schema Registry ã§ã¯ã‚¹ã‚­ãƒ¼ãƒã®äº’æ›æ€§ãƒã‚§ãƒƒã‚¯ã®æ©Ÿæ§‹ã‚’è¨­ã‘ã¦ã„ã¾ã™ã€‚äº’æ›æ€§ã«ã¯å‰æ–¹äº’æ›æ€§ã€å¾Œæ–¹äº’æ›æ€§ã€å®Œå…¨äº’æ›æ€§ã® 3 ã‚¿ã‚¤ãƒ—ãŒè¨­ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚docs.confluent.ioå‰æ–¹äº’æ›æ€§ã¯ Producer ãŒ Consumer ã‚ˆã‚Šå…ˆã«ã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§æ±‚ã‚ã‚‰ã‚Œã‚‹äº’æ›æ€§ã§ã™ã€‚ã“ã®å ´åˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¿½åŠ ã‚‚ã—ãã¯ optional ã€ã™ãªã‚ã¡ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’æŒã¤ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‰Šé™¤ãŒè¨±ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®å¤‰æ›´ãŒè¡Œã‚ã‚Œã¦ã‚‚ Consumer ã¯ã€è‡ªåˆ†ãŒçŸ¥ã‚‰ãªã„è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ç„¡è¦–ã™ã‚‹ã€å‰Šé™¤ã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§åŸ‹ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å¾Œæ–¹äº’æ›æ€§ã¯ Consumer ãŒ Producer ã‚ˆã‚Šå…ˆã«ã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§æ±‚ã‚ã‚‰ã‚Œã‚‹äº’æ›æ€§ã§ã™ã€‚ã“ã®å ´åˆã¯å‰è¿°ã®é€†ã§ã€ optional ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¿½åŠ ã¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‰Šé™¤ãŒè¨±ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®äº’æ›æ€§ã‚¿ã‚¤ãƒ—ãŒ Confluent Schema Registry ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®äº’æ›æ€§ãƒ¢ãƒ¼ãƒ‰ã§ã‚ã‚Šã€ç¾å®Ÿä¸–ç•Œã§æ°—ã‚’ä½¿ã‚ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã‚‚ã®ã§ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚å®Œå…¨äº’æ›æ€§ã¯ Producer ã¨ Consumer ã©ã¡ã‚‰ãŒå…ˆã«ã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ã—ã¦ã‚‚è‰¯ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã§æ±‚ã‚ã‚‰ã‚Œã‚‹äº’æ›æ€§ã§ã™ã€‚ã“ã®å ´åˆã¯åˆ¶ç´„ãŒæœ€ã‚‚å¼±ã„ã‚ˆã†ãªã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ã€ã¤ã¾ã‚Š optional ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¿½åŠ ãƒ»å‰Šé™¤ãŒè¨±ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã®äº’æ›æ€§ã‚¿ã‚¤ãƒ—ã¯åˆ¶ç´„ãŒå¼±ã„ãŸã‚æ‰±ã„ã«ã‚‚å›°ã‚‹ã‚±ãƒ¼ã‚¹ãŒå‡ºã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ãŒã€ Confluent ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä»¥å¤–ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚„ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹ãŒå­˜åœ¨ã—ãŸã‚Šå‡¦ç†ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã®é †åºãŒä¿è¨¼ã•ã‚Œãªã‹ã£ãŸã‚Šã™ã‚‹ã‚±ãƒ¼ã‚¹ã«ã€äº’æ›æ€§ã®å•é¡Œã§ Consumer å´ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã‚±ãƒ¼ã‚¹ã‚’ä½æ¸›ã§ããã†ã§ã™ã€‚Confluent Schema Registry ã¯ã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ã—ã‚ˆã†ã¨ã™ã‚‹éš›ã«ã€æ±‚ã‚ã‚‰ã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã«å¾“ã£ã¦äº’æ›æ€§ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚REST API ã¯å®Ÿéš›ã« Confluent Schema Registry ã«å¯¾å¿œã—ãŸ SerDe ã§ã‚¹ã‚­ãƒ¼ãƒæ“ä½œã‚’è¡Œã†éš›ã«ä½¿ã‚ã‚Œã‚‹ API ã«ã‚‚ãªã‚Šã¾ã™ã€‚æ‰‹å‹•ã§ REST API ã‚’å©ã„ã¦ã‚¹ã‚­ãƒ¼ãƒç™»éŒ²ã‚’è¡Œã†ãªã©ã‚’ã—ã¦ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚ã“ã® API ã®ä»•æ§˜ã¯ä»¥ä¸‹ã«ã¾ã¨ã¾ã£ã¦ã„ã¾ã™ã€‚docs.confluent.ioç®¡ç†ç”¨ã® WebUI ã«ã¤ã„ã¦ã¯å®Ÿéš›ã«è§¦ã‚Œã¦ã¿ãŸæ–¹ãŒè©±ãŒæ—©ãã†ã§ã™ã€‚æ¬¡ã«è§¦ã‚Œã¦ã¿ã¾ã—ã‚‡ã†ã€‚Confluent Schema Registry ã«å®Ÿéš›ã«è§¦ã‚Œã¦ã¿ã‚‹ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆå…¬å¼ã§ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ docker-compose yml ãƒ•ã‚¡ã‚¤ãƒ«ãŒæä¾›ã•ã‚Œã¦ãŠã‚Šã€ã¨ã‚Šã‚ãˆãšå‹•ã‹ã™æ•·å±…ãŒä½ã‚ã«ãªã£ã¦ã„ã¾ã™ã€‚docs.confluent.ioã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ²¿ã£ã¦ Docker ã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã—ãŸå¾Œã«ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ http://localhost:9021/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¾ã™ã€‚ä¸Šæ‰‹ãå‹•ã„ã¦ã„ã‚Œã°ä»¥ä¸‹ã®ã‚ˆã†ãªç®¡ç†ç”»é¢ã‚’é–²è¦§ã§ãã‚‹ã¯ãšã§ã™ã€‚Avro ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ç™»éŒ²ã—ã¦ã¿ã‚‹ã“ã“ã§ã¯å®Ÿé¨“ç”¨ã« hello topic ã‚’ä½œæˆã—ã¦ã€ã“ã® topic ã«æµã™ãƒ¬ã‚³ãƒ¼ãƒ‰ã® value ã®ã‚¹ã‚­ãƒ¼ãƒã‚’è¨­å®šã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚ã“ã“ã§ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1 ã®ã‚¹ã‚­ãƒ¼ãƒã¨ã—ã¦ä»¥ä¸‹ã‚’ä¸ãˆã¦ã¿ã¾ã™ã€‚{  \"name\": \"Hello\",  \"type\": \"record\",  \"fields\": [    {      \"name\": \"id\",      \"type\": \"long\"    },    {      \"name\": \"name\",      \"type\": \"string\"    }  ]}ç™»éŒ²ã—ãŸã‚¹ã‚­ãƒ¼ãƒã‚’ WebUI ä¸Šã§ç¢ºèªã§ãã¾ã™ã€‚ä¸€åº¦ã‚¹ã‚­ãƒ¼ãƒã‚’ç™»éŒ²ã™ã‚‹ã¨äº’æ›æ€§ãƒ¢ãƒ¼ãƒ‰ã‚’é¸ã¹ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ä¸€ã¤å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¹ã‚­ãƒ¼ãƒã¨å¾Œæ–¹äº’æ›æ€§ã‚’ä¿ã¤ãƒ¢ãƒ¼ãƒ‰ã§ã‚ã‚‹ Backward ã«è¨­å®šã—ã¦ãŠãã¾ã™ã€‚Avro ã®ã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ã—ã¦ã¿ã‚‹; äº’æ›æ€§ãŒã‚ã‚‹å ´åˆå…ˆç¨‹ç™»éŒ²ã—ãŸã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚ã“ã“ã§ã¯å¹´é½¢ã‚’æŒ‡å®šã™ã‚‹æƒ³å®šã§ {\"name\": \"age\", \"type\": [\"null\", \"long\"], \"default\": null} ã¨ã„ã† nullable ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã™ã€‚{  \"name\": \"Hello\",  \"type\": \"record\",  \"fields\": [    {      \"name\": \"id\",      \"type\": \"long\"    },    {      \"name\": \"name\",      \"type\": \"string\"    },    {      \"name\": \"age\",      \"type\": [\"null\", \"long\"],      \"default\": null    }  ]}ã“ã®ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã¯ optional ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ã«ç›¸å½“ã—ã¦å¾Œæ–¹äº’æ›æ€§ãƒã‚§ãƒƒã‚¯ã‚’ãƒ‘ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ç„¡äº‹ WebUI ã‹ã‚‰ã‚‚æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¹ã‚­ãƒ¼ãƒã‚’é–²è¦§ã™ã‚‹ã“ã¨ãŒã§ãã¦ã„ã¾ã™ã€‚diff è¡¨ç¤ºã‚‚å‡ºæ¥ã¦ã„ã„æ„Ÿã˜ã§ã™ã€‚Avro ã®ã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ã—ã¦ã¿ã‚‹; äº’æ›æ€§ãŒãªã„å ´åˆã“ã“ã‹ã‚‰å¾Œæ–¹äº’æ›æ€§ãŒç„¡ã„å¤‰æ›´ã‚’ã—ã¦ã¿ã¾ã™ã€‚ã‚ˆãè€ƒãˆãŸã‚‰ã“ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸Šã§ä½œæˆã—ãŸæ™‚åˆ»ã® timestamp å€¤ã‚’ä¿æŒã—ãŸããªã£ã¦ãã¾ã—ãŸã€‚ã¨ã„ã†ã“ã¨ã§ optional ã§ãªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ {\"name\": \"created_at\", \"type\": \"long\", \"logicalType\": \"timestamp-millis\"} ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã™ã€‚{  \"name\": \"Hello\",  \"type\": \"record\",  \"fields\": [    {      \"name\": \"id\",      \"type\": \"long\"    },    {      \"name\": \"name\",      \"type\": \"string\"    },    {      \"name\": \"age\",      \"type\": [\"null\", \"long\"],      \"default\": null    },    {      \"name\": \"created_at\",      \"type\": \"long\",      \"logicalType\": \"timestamp-millis\"    }  ]}ã—ã‹ã—ãªãŒã‚‰å…ˆè¿°ã®é€šã‚Šå¾Œæ–¹äº’æ›æ€§ã‚’ä¿ã¤ã«ã¯ optional ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ã¯è¨±ã•ã‚Œã¾ã›ã‚“ã€‚ã“ã®å ´åˆ Confluent Schema Registry ãŒäº’æ›æ€§ãŒä¿ã¦ãªã„æ—¨ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã—ã¦ã‚¹ã‚­ãƒ¼ãƒã®æ›´æ–°ãŒæ‹’å¦ã•ã‚Œã¾ã™ã€‚ã“ã®ã‚ˆã†ã« Confluent Schema Registry ã§ã¯ã€ã‚¹ã‚­ãƒ¼ãƒã®ç®¡ç†ã¨å…±ã«ã€æ±‚ã‚ã‚‰ã‚Œã‚‹äº’æ›æ€§ã®ã‚¿ã‚¤ãƒ—ã«å¾“ã£ã¦ãã‚Œã‚’ç¶­æŒã™ã‚‹ã‚ˆã†ãƒã‚§ãƒƒã‚¯ã‚’ã‹ã‘ã¦ãã‚Œã¾ã™ã€‚æœ¬å½“ã¯ã‚¹ã‚­ãƒ¼ãƒç®¡ç†ã‚’ .avsc ãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã§ä¿å­˜ã—ã¦ CI ã§äº’æ›æ€§ãƒã‚§ãƒƒã‚¯ã—ã€ãƒ‘ã‚¹ã™ã‚Œã°ã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ã™ã‚‹ãªã©äººé–“ã«ã‚ˆã‚‹ç›´æ¥ã®æ›´æ–°ã‚’é¿ã‘ã‚‹ã®ãŒæœ›ã¾ã—ã„ã‹ã‚‚ã§ã™ãŒã€ã“ã® WebUI ã¨äº’æ›æ€§ãƒã‚§ãƒƒã‚¯æ©Ÿæ§‹ã§äººé–“ã«ã‚ˆã‚‹ç›´æ¥ç®¡ç†ã‚‚ã‚ã‚‹ç¨‹åº¦é‹ç”¨ã«è€ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä½™è«‡; _schemas topicWebUI ä¸Šã§ã¯ _schemas topic ã®æ§˜å­ã‚‚ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚log.cleanup.policy ãŒ delete ã§ã¯ãªã compact ãŒè¨­å®šã•ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã«ã‚ˆã‚Šæ™‚é–“çµŒéç­‰ã«ã‚ˆã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤ã‚’æŠ‘åˆ¶ã—ã¦ã„ã¾ã™ã€‚Confluent Schema Registry ã®å®Ÿè£…ã‚’è¦—ã„ã¦ã¿ã‚‹Confluent Schema Registry ã®ã‚³ãƒ¼ãƒ‰ã¯GitHub ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚æŠ˜è§’ãªã®ã§ã©ã‚“ãªå®Ÿè£…ã«ãªã£ã¦ã„ã‚‹ã‹å°‘ã—è¦—ã„ã¦ã¿ã¾ã™ã€‚ã¡ãªã¿ã«ã“ã“ã§ã¯ç¶²ç¾…æ€§ãªã©ã¯å…¨ãè€ƒæ…®ã—ã¦ã„ã¾ã›ã‚“ã€‚ç­†è€…ãŒæ°—ã«ãªã‚‹ãƒã‚¤ãƒ³ãƒˆã‚’å‹æ‰‹ã«ã‹ã„ã¤ã¾ã‚“ã§ã„ã¾ã™ã€‚github.comã“ã“ã§ç´¹ä»‹ã™ã‚‹å†…å®¹ã¯ v5.4.0 æ™‚ç‚¹ã®ã‚‚ã®ã¨ãªã‚Šã¾ã™ã€‚avro-serializer: Schema Registry ã¨é€šä¿¡ã—ãŸçµæœã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ»ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’è¡Œã†ã“ã® module ã«å­˜åœ¨ã™ã‚‹ã®ãŒã€å®Ÿéš›ã« producer, consumer ã‚’å®Ÿè£…ã™ã‚‹éš›ã« properties ã«æŒ‡å®šã™ã‚‹ serializer, deserializer ã«ãªã‚Šã¾ã™ã€‚ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®ã‚³ã‚¢ã®å®Ÿè£…ãŒ AbstractKafkaAvroSerializer ã® serializeImpl() ã«å­˜åœ¨ã—ã¾ã™ã€‚è‡ªå‹•ç™»éŒ²ã™ã‚‹è¨­å®šã«ãªã£ã¦ã„ã‚‹ãªã‚‰ Avro ã‚¹ã‚­ãƒ¼ãƒã‚’ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«ç™»éŒ²ã—ã€ãã®å¾Œ Kafka ã® topic ã«é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ã¾ã™ã€‚ã“ã®æ™‚ã®ãƒã‚¤ãƒŠãƒªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãªã®ã§ã™ãŒã€ ã“ã® Serializer å®Ÿè£…ç‰¹æœ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãªã£ã¦ãŠã‚Š Avro ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®æ‰‹å‰ã« 8 ãƒã‚¤ãƒˆã®ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã¨ã‚¹ã‚­ãƒ¼ãƒã® ID ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã¦ã„ã¾ã™ã€‚Avro ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ãƒã‚¤ãƒŠãƒªã¯ãŠãªã˜ã¿ SpecificDatumWriter, ReflectDatumWriter, ã‚ã‚‹ã„ã¯ GenericDatumWriter ã§æ›¸ãå‡ºã—ã¾ã™ã€‚docs.confluent.ioã“ã‚Œã«å¯¾å¿œã—ã¦ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå´ã®å®Ÿè£…ã¯ AbstractKafkaAvroDeserializer ã‚¯ãƒ©ã‚¹ã«å¤šãã®ãƒ­ã‚¸ãƒƒã‚¯ãŒæŒãŸã‚Œã¦ã„ã¾ã™ã€‚ã¾ãšã¯ deserialize() ã§ã™ãŒãƒªãƒ¼ãƒ€å´ã®ã‚¹ã‚­ãƒ¼ãƒãŒæ¸¡ã›ã‚‹ã‚ˆã†ã«ãªã£ã¦ãŠã‚Šã€ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®çµæœã‚’ãƒ©ã‚¤ã‚¿ãƒ¼å´ã¨ã¯ç•°ãªã‚‹ï¼ˆã—ã‹ã—äº’æ›æ€§ã¯ã‚ã‚‹ï¼‰å‹ã«å±•é–‹ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ãƒ©ã‚¤ã‚¿ãƒ¼å´ã®ã‚¹ã‚­ãƒ¼ãƒã¯å‹¿è«–ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªçµŒç”±ã§è§£æ±ºã§ãã¾ã™ã€‚ã“ã®è¾ºã‚Šã®å®Ÿè£…ã¯  AbstractKafkaAvroDeserializer ã®å†…éƒ¨ã‚¯ãƒ©ã‚¹ã® DeserializationContext ã‚¯ãƒ©ã‚¹ã§è¡Œã‚ã‚Œã¾ã™ã€‚ã“ã®ã‚¯ãƒ©ã‚¹ã«æ¸¡ã•ã‚ŒãŸã€ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå¯¾è±¡ã®ãƒã‚¤ãƒŠãƒªã¯ã€å…ˆé ­ 8 ãƒã‚¤ãƒˆã«ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã¨ã‚¹ã‚­ãƒ¼ãƒ ID ãŒå­˜åœ¨ã™ã‚‹ã¯ã™ã§ã™ã€‚ã¾ãšãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã£ãŸå¾Œã«ã‚¹ã‚­ãƒ¼ãƒ ID ã‚’å–ã‚Šå‡ºã—ã€ã“ã® ID ã‚’ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«å•ã„åˆã‚ã›ã¦ Avro ã®ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚ãã®å¾Œã¯ã‚„ã¯ã‚ŠãŠãªã˜ã¿ SpecificDatumReader, ReflectDatumReader, GenericDatumReader ã§ Java ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦èª­ã¿å‡ºã—ã¾ã™ã€‚ã“ã‚Œã§æ¦‚ã­ Avro ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã¨ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®æµã‚ŒãŒæ´ã‚ã¾ã™ãŒã€ã‚¹ã‚­ãƒ¼ãƒã®ç™»éŒ²ã¨å–å¾—ãŒã©ã®ã‚ˆã†ã«æˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚å…ˆè¿°ã® Serializer, Deserializer ã®å…±é€šã®è¦ªã‚¯ãƒ©ã‚¹ã¨ã—ã¦ AbstractKafkaAvroSerDe ãŒã‚ã‚Šã€ã“ã®ã‚¯ãƒ©ã‚¹ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ CachedSchemaRegistryClient ã¨ã„ã†ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«å¯¾ã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä¿æŒã—ã¦ã„ã¾ã™ã€‚ã“ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å®Ÿè£…ãŒã©ã†ãªã£ã¦ã„ã‚‹ã®ã‹ã€æ¬¡ã¯ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã¨ã®é€šä¿¡ã‚’è¡Œã£ã¦ã„ã‚‹ client module ã‚‚è¦—ã„ã¦ã¿ã¾ã™ã€‚client: Schema Registry ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆSchemaRegistryClient ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ãŸã‚¯ãƒ©ã‚¹ãŒå®Ÿéš›ã« Schema Registry ã¨é€šä¿¡ã—ã¦ã„ã¾ã™ã€‚å…ˆè¿°ã® CachedSchemaRegistryClient ã¯ãã® 1 å®Ÿè£…ã§ã‚ã‚Šã€ã‚¹ã‚­ãƒ¼ãƒã‚„ ID, ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ RestService ã¨ã„ã†ã‚¯ãƒ©ã‚¹ã®ãƒ¡ãƒ³ãƒã‚’æŒã¡ã¾ã™ã€‚ãã—ã¦ RestService ãŒå®Ÿéš›ã« HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã® REST API ã«é€ä¿¡ã™ã‚‹ã€ä¾‹ãˆã°ã‚¹ã‚­ãƒ¼ãƒã®ç™»éŒ²æ™‚ã« /subjects/:subject/versions ã« POST ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹ã€ã¨ã„ã†ã‚ˆã†ãªæ ¼å¥½ã«ãªã‚Šã¾ã™ã€‚core: Schema Registry ã®ã‚³ã‚¢å®Ÿè£…ã‚‚ã†ã²ã¨ã¤ã€ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã® REST API ã‚µãƒ¼ãƒã‚’æä¾›ã™ã‚‹ core ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚‚æ°—ã«ãªã‚‹å­˜åœ¨ã§ã™ã€‚REST API ã®å®Ÿè£…ã‚„ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ãªã©ã®æ°¸ç¶šåŒ–ã‚’ã©ã®ã‚ˆã†ã«è¡Œã£ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã® REST API ã‚µãƒ¼ãƒã¯ Jetty + Jersey ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚API ã®å„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ JAX-RS ã® Resource ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€ä¾‹ãˆã° /subjects/{subject}/versions ã§ã‚ã‚Œã° SubjectVersionsResource ãŒç›¸å½“ã™ã‚‹ã€ãªã©ã®æ§‹æˆã«ãªã£ã¦ã„ã¾ã™ã€‚ã‚¹ã‚­ãƒ¼ãƒãªã©ã®æƒ…å ±ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ¬ã‚¤ãƒ¤ã¯ KafkaStore ã‚¯ãƒ©ã‚¹ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚¹ã‚­ãƒ¼ãƒã®ç™»éŒ²ã®ãŸã‚ put() ãŒå‘¼ã°ã‚Œã‚‹ã¨ã€ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‚’ ProducerRecord ã«åŒ…ã‚“ã§ _schemas topic ã« é€ã‚Šã¾ã™ã€‚ä»–æ–¹ã€ã‚¹ã‚­ãƒ¼ãƒã®æƒ…å ±å–å¾—ã¯ã¨ã„ã†ã¨ KafkaStore è‡ªä½“ã§ã¯ç›´æ¥ã¯ _schemas topic ã‚’ consume ã›ãšã€åˆ¥ã‚¹ãƒ¬ãƒƒãƒ‰ã§å‹•ä½œã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ã‚­ãƒ¼ãƒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°ã™ã‚‹ KafkaStoreReaderThread ãŒæ›´æ–°ã—ãŸ InMemoryCache ã‹ã‚‰å–å¾—ã™ã‚‹æ ¼å¥½ã«ãªã‚Šã¾ã™ã€‚ã“ã®å‹•ä½œã«ã¤ã„ã¦ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã¾ã™ã€‚docs.confluent.ioãŠã‚ã‚Šã«Confluent Schema Registry ã«ã¤ã„ã¦ç­†è€…ã®æ€ã†ã¾ã¾æ°—ã«ãªã‚‹ã¨ã“ã‚ã‚’ã–ã£ãã‚Šç´¹ä»‹ã—ã¾ã—ãŸã€‚ã„ã‹ãŒã§ã—ãŸã§ã—ã‚‡ã†ã‹ã€‚æ¬¡å›ã¯ Apache Pulsar ã®æŒã¤ Schema Registry æ©Ÿèƒ½ã«ã¤ã„ã¦èª¿ã¹ã¦è¡Œã“ã†ã‹ãªã¨æ€ã„ã¾ã™ã€‚ãªã‚“ã¨ã“ã¡ã‚‰ã®ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã¯ Avro ã¯å‹¿è«– Protocol Buffers ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ï¼Protocol Buffers ã¯å„è¨€èªå‘ã‘ã®è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã€ Avro ã§è¨€ã† SpecificRecord ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã«è¿‘ã„æ€§è³ªã‚’æŒã¤è¡¨ç¾ã§æ‰±ã‚ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã‚ã‚Œã¾ã™ãŒã€ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚’ã©ã®ã‚ˆã†ã«æä¾›ã—ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚pulsar.apache.orgä½™è«‡ã§ã™ãŒæœ¬è¨˜äº‹åŸ·ç­†ä¸­ã« Confluent Schema Registry ã§ã‚‚ Protocol Buffers ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹æ°—é…ã®ã‚ã‚‹ pull request ã‚’ç™ºè¦‹ã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚è¿‘ã„å°†æ¥ Avro ä»¥å¤–ã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ãŸãƒ¬ã‚³ãƒ¼ãƒ‰ãŒè‰²ã‚“ãªãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ã‚‰ãã‚‰ãã«æ‰±ãˆã‚‹æ—¥ãŒæ¥ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã­ã€‚github.com","link":"https://syucream.hatenablog.jp/entry/2020/01/31/012133","isoDate":"2020-01-30T16:21:33.000Z","dateMiliSeconds":1580401293000,"authorName":"syucream","authorId":"syucream"},{"title":"Apache Avro ã«ã¤ã„ã¦çŸ¥ã£ã¦ã„ã‚‹ã“ã¨ã‚’æ›¸ã„ã¦ã„ãã€€ãã®2","contentSnippet":"Apache Avro ã«ã¤ã„ã¦æ›¸ãä¸‹ã—ã¦ã„ãè¨˜äº‹ãã® 2 ã§ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ Avro ã§è¡¨ç¾ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªä¸Šã®è¡¨ç¾ã€ç‰¹ã« Java ã‚’æƒ³å®šã—ã¦ SpecificData ã¨ GenericData ã«ã¤ã„ã¦è§¦ã‚Œã¦ã„ãã¾ã™ã€‚Avro ã®ãƒ‡ãƒ¼ã‚¿å‹ã¨ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå‰å›ã®è¨˜äº‹ã§è§¦ã‚ŒãŸé€šã‚Šã€ Avro ã§ã¯æ§˜ã€…ãªãƒªãƒƒãƒãªãƒ‡ãƒ¼ã‚¿å‹ã‚’è¡¨ç¾ã§ãã¾ã™ã€‚å¤šãã®å ´åˆä¸€ç•ªå¤–å´ã®ã‚¹ã‚³ãƒ¼ãƒ—ã§ã¯ record type ã‚’ä½¿ã£ã¦æ§‹é€ ä½“ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã«ãªã‚‹ã‹ãªã¨æ€ã„ã¾ã™ã€‚Avro ã‚¹ã‚­ãƒ¼ãƒã¯ä»¥ä¸‹ã®ã‚ˆã†ã«äº‹å‰ã« JSON æ–‡å­—åˆ—ã‚’åŸ‹ã‚è¾¼ã‚€ã‹ .avsc ãƒ•ã‚¡ã‚¤ãƒ«ã§ä¿å­˜ã—ã¦ãŠãã®ã‚‚ã‚¢ãƒªã§ã™ãŒã€å®Ÿè¡Œæ™‚ã«å‹•çš„ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚{  \"name\": \"Hello\",  \"type\": \"record\",  \"fields\": [    {      \"name\": \"id\",      \"type\": \"long\"    },    {      \"name\": \"name\",      \"type\": \"string\"    }  ]}ã“ã“ã§å®šç¾©ã—ãŸãƒ‡ãƒ¼ã‚¿å‹ã‚’å®Ÿéš›ã«ã©ã†æ‰±ã„ã¾ã—ã‚‡ã†ã‹ï¼Ÿä¾‹ãˆã° Protocol Buffers ã§ã¯ã¡ã‚‡ã†ã© Avro ã§ .avsc ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã™ã‚‹ã‚ˆã†ã«ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãŠãŠã‚€ã­ .proto ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹ã‚’å®šç¾©ã—ã¦ã„ãã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚syntax = \"proto3\";package com.syucream.example;message Hello {  uint64 id = 1;  string name = 2;}ãã®å¾Œå…¸å‹çš„ã«ã¯ protoc ã¨å„è¨€èªã«å¯¾å¿œã™ã‚‹ protoc plugin ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€å®šç¾©ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹ã«å¾“ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚$ protoc --java_out=./ hello.proto// Generated by the protocol buffer compiler.  DO NOT EDIT!// source: hello.protopackage com.syucream.example;public final class HelloOuterClass {  private HelloOuterClass() {}  public static void registerAllExtensions(      com.google.protobuf.ExtensionRegistryLite registry) {  }  public static void registerAllExtensions(      com.google.protobuf.ExtensionRegistry registry) {    registerAllExtensions(        (com.google.protobuf.ExtensionRegistryLite) registry);  }  public interface HelloOrBuilder extends      // @@protoc_insertion_point(interface_extends:com.syucream.example.Hello)      com.google.protobuf.MessageOrBuilder {    /**     * <code>uint64 id = 1;</code>     */    long getId();    /**     * <code>string name = 2;</code>     */    java.lang.String getName();   ...ã¤ã¾ã‚Šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ„ã¿è¾¼ã‚“ã§ç”¨ã„ã‚‹éš›ã«äº‹å‰ã«ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚Avro ã§ã¯ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚äº‹å‰ã«ç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ç”¨ã„ã‚‹ã“ã¨ã‚‚ã€ãã†ã§ãªã„é¸æŠè‚¢ã‚’å–ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚åŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿å‹è¡¨ç¾ã‚»ãƒƒãƒˆ GenericDataorg.apache.avro.generic.GenericData ã¯ Avro ã®ãƒ‡ãƒ¼ã‚¿å‹ã® Java ã§ã®è¡¨ç¾ã®åŸºç¤ã¨ãªã‚‹ã‚¯ãƒ©ã‚¹ãªã©ãŒè©°ã¾ã£ãŸãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã™ã€‚GenericData ä»¥ä¸‹ã«å…·ä½“çš„ãªå‹ã«å¯¾å¿œã—ãŸã‚¯ãƒ©ã‚¹ãŒå­˜åœ¨ã—ã¾ã™ã€‚ä¾‹ãˆã° record ãªã‚‰ org.apache.avro.generic.GenericData.Record ã¨ã„ã£ãŸå…·åˆã§ã™ã€‚ä»¥ä¸‹ã§ã¯ç‰¹ã«ã“ã® GenericData.Record ã‚’æ˜ã‚Šä¸‹ã’ã¾ã—ã‚‡ã†ã€‚ã¾ãšã“ã®ã‚¯ãƒ©ã‚¹ã¯ org.apache.avro.generic.GenericRecord interface ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã§ã€ã¾ãåå‰ã®é€šã‚Šãªã®ã§ã™ãŒã¤ã¾ã‚Šå€¤ã‚’ get ã—ãŸã‚Š put ã—ãŸã‚Šã§ãã¾ã™ã€‚ä¸€è¦‹ã‚ã¾ã‚Šæƒ…å ±é‡ãŒç„¡ã•ãã†ãªã“ã® interface ã¯ã€çµæ§‹è‰²ã€…ãª Java è£½ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§é »å‡ºã—ã¾ã™ã€‚ã¾ãŸã“ã® get() ã®æˆ»ã‚Šå€¤ã¯ Object å‹ã§ã‚ã‚Šã€å®Ÿéš›ã©ã‚“ãªå‹ãªã®ã‹æ„è­˜ã™ã‚‹ã®ã¯ get() ã‚’å‘¼ã³å‡ºã™ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãäººã®è²¬å‹™ã«ãªã‚Šã¾ã™ã€‚GenericData.Record ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ã«ã¯ã€ Schema ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ new ã—ã¾ã™ã€‚Schema ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ Schema.Parser ã‚’ä½¿ã£ã¦äº‹å‰å®šç¾©ã—ãŸ JSON æ–‡å­—åˆ—ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦å¾—ã‚‹ã®ã‚‚ã‚ˆã—ã€å‹•çš„ã« Schema.createRecord() ãªã©ã‹ã‚‰ç”Ÿæˆã—ã¦ã‚‚ã‚ˆã—ã€ã§ã™ã€‚ã“ã® GenericData.Record ã§ã™ãŒã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å…·ä½“çš„ãªå€¤ã¯ Object[] å‹ã®ãƒ¡ãƒ³ãƒã¨ã—ã¦æŒã¡ã€ get/put ãªã©ã‚’ã™ã‚‹æ™‚ã¯ Schema ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æƒ…å ±ã‹ã‚‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å¾—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚ã“ã‚Œã¯ã¡ã‚‡ã†ã©ã€ Avro ã®ä»•æ§˜ã¨ã—ã¦ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ãŸå¾Œã®ãƒã‚¤ãƒŠãƒªã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒã©ã†ãªã£ã¦ã„ã‚‹ã‹ãŒã‚¹ã‚­ãƒ¼ãƒã«ã‚ˆã£ã¦æ±ºå®šã¥ã‘ã‚‰ã‚Œã‚‹ï¼ˆä»–ã«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæƒ…å ±ã‚’æŒãŸãšã‚¹ã‚­ãƒ¼ãƒã‚’ä¿¡ã˜ã‚‹ï¼‰ã®ã«å¯¾å¿œã—ãã†ã§ã™ã€‚GenericData ã‚’èª­ã¿æ›¸ãã™ã‚‹ GenericDatumReader/GenericDatumWriterorg.apache.avro.generic.GenericDatumReader ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚ŒãŸçŠ¶æ…‹ã®ãƒã‚¤ãƒŠãƒªã‹ã‚‰ GenericData ä»¥ä¸‹ã® Java ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€ä¾‹ãˆã° record å‹ã®å€¤ã‚’å‚ç…§ã™ã‚‹ã ã‘ã§ã„ã„ãªã‚‰å‰è¿°ã® GenericRecord ã‚’æŒ‡å®šã™ã‚‹ã®ã§è‰¯ã„ã§ã—ã‚‡ã†ã€‚é€†ã« Java ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ãŸã„éš›ã¯ org.apache.avro.generic.GenericDatumWriter ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚ˆã‚Šå…·ä½“çš„ãªä½¿ã„æ–¹ã¯å…¬å¼ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã¨å‚è€ƒã«ãªã‚Šã¾ã™ã€‚github.comAvro ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæ–¹æ³•ã¨ãƒã‚¤ãƒŠãƒªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ±ºã‚ã¦ã„ã‚‹ã®ã¯ã‚¹ã‚­ãƒ¼ãƒã§ã™ã€‚ã¨ã„ã†ã‚ã‘ã§ã‚‚ã¡ã‚ã‚“ã€GenericDatumReader / GenericDatumWriter ã‚’ç”¨ã„ã‚‹éš›ã«ã¯ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚ã•ã¦å®Ÿã¯ GenericDatumReader ã«ã¯äºŒç¨®é¡ã®ã‚¹ã‚­ãƒ¼ãƒã€å¼•æ•°åã§ã„ã†ã¨ reader ã¨ writer ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚åå‰ã®é€šã‚Š writer ã¯ GenericDatumWriter ã‚’ä½¿ã£ã¦ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹å´ã§ç”¨ã„ã‚‰ã‚ŒãŸå´ã®ã‚¹ã‚­ãƒ¼ãƒã€ reader ã¯ GenericDatumReader ã§èª­ã¿å‡ºã™å´ã®ã‚¹ã‚­ãƒ¼ãƒã§ã™ã€‚å…·ä½“çš„ã§å®Ÿç”¨ã—ãã†ãªã‚·ãƒŠãƒªã‚ªã¨ã—ã¦ã¯ã€ writer ãŒå¤ã„ã‚¹ã‚­ãƒ¼ãƒã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ç’°å¢ƒä¸‹ã§ reader ã¨ã—ã¦ã¯æ–°ã—ã„ã‚¹ã‚­ãƒ¼ãƒï¼ˆå¤ã„ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ã®å¾Œæ–¹äº’æ›æ€§ãŒã‚ã‚‹ï¼‰ã«å¾“ã†å‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æ‰±ã„ãŸã„éš›ã«äºŒç¨®é¡ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä¸ãˆã‚‹å ´åˆãŒã‚ã‚Šãã†ã§ã™ã€‚ã‚ˆã‚Šå®‰å…¨ã§é«˜é€Ÿãªè¡¨ç¾ã‚»ãƒƒãƒˆ SpecificDataã•ã¦ã“ã® GenericData é–¢é€£ã®ãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€å€¤ã®å–ã‚Šå›ã—ã¯ Object å‹ã§ã™ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§é€ä¸€ã‚­ãƒ£ã‚¹ãƒˆã—ãªã‘ã‚Œã°ãªã‚‰ãšã€å®‰å…¨ãªå®Ÿè£…ã‚’ã§ãã‚‹ã‹ã‚„ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹ã‚³ã‚¹ãƒˆãŒç™ºç”Ÿã™ã‚‹ç‚¹ãŒæ°—ã«ãªã‚Šã¾ã™ã€‚æ‚ªã„è¨€ã„æ–¹ã‚’ã™ã‚Œã°ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ»ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®æ“ä½œã‚’å«ã‚ã¦ã‚¹ã‚­ãƒ¼ãƒã«é•åã—ã¦ã„ãªã„ã“ã¨ã‚’ã¯ä¿è¨¼ã•ã‚ŒãŸå€¤ã§ã—ã‹ãªãã€ Java ã®ã‚³ãƒ¼ãƒ‰ä¸Šã¯ä¾‹ãˆã° record å‹ãªã‚‰å˜ãªã‚‹ Map<String, Object> å‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨è¨€ãˆãã†ã§ã™ã€‚å¹¸ã„ãªã“ã¨ã« Avro ã§ã¯ GenericData ã‚’ä½¿ã†ã®ã¨ã¯åˆ¥ã« SpecificData ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã‚’ä½¿ã†é“ã‚‚å­˜åœ¨ã—ã¾ã™ã€‚org.apache.avro.specific.SpecificData ã¯ GenericData ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã§ã™ã€‚ã¨è¨€ã£ã¦ã‚‚ã“ã®ã‚¯ãƒ©ã‚¹è‡ªä½“ã«ã¯ã•ã»ã©æ©Ÿèƒ½ã¯è¿½åŠ ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚é‡è¦ãªã®ã¯ã“ã‚Œã‚’ç¶™æ‰¿ã—ãŸã€è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ schema specific ãªã‚¯ãƒ©ã‚¹ã§ã™ã€‚SpecificData ãªã‚¯ãƒ©ã‚¹ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæœ€åˆã«è¿°ã¹ãŸé€šã‚Š Avro ã«ã¯äº‹å‰ã« .java ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦ãŠãé“ã‚‚ã‚ã‚Šã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã¯ avro-tools ã‚’é€šã—ã¦è¡Œãˆã¾ã™ã€‚è©¦ã—ã«ã“ã®è¨˜äº‹ã®å†’é ­ã«å‡ºã¦ããŸ .avsc ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã—ã¦ã¿ã¾ã™ã€‚$ java -jar ~/tools/avro-tools-1.8.2.jar compile schema hello.avsc ./Input files to compile:  hello.avsclog4j:WARN No appenders could be found for logger (AvroVelocityLogChute).log4j:WARN Please initialize the log4j system properly.log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.å¾—ã‚‰ã‚Œã‚‹ Java ã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼ˆä¸€éƒ¨æŠœç²‹ï¼‰/** * Autogenerated by Avro * * DO NOT EDIT DIRECTLY */import org.apache.avro.specific.SpecificData;import org.apache.avro.message.BinaryMessageEncoder;import org.apache.avro.message.BinaryMessageDecoder;import org.apache.avro.message.SchemaStore;@SuppressWarnings(\"all\")@org.apache.avro.specific.AvroGeneratedpublic class Hello extends org.apache.avro.specific.SpecificRecordBase implements org.apache.avro.specific.SpecificRecord {  private static final long serialVersionUID = -8266440640401408575L;  public static final org.apache.avro.Schema SCHEMA$ = new org.apache.avro.Schema.Parser().parse(\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"Hello\\\",\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"type\\\":\\\"long\\\"},{\\\"name\\\":\\\"name\\\",\\\"type\\\":\\\"string\\\"}]}\");  public static org.apache.avro.Schema getClassSchema() { return SCHEMA$; }  ...  @Deprecated public long id;  @Deprecated public java.lang.CharSequence name;  /**   * Default constructor.  Note that this does not initialize fields   * to their default values from the schema.  If that is desired then   * one should use <code>newBuilder()</code>.   */  public Hello() {}  ...  /**   * Gets the value of the 'id' field.   * @return The value of the 'id' field.   */  public java.lang.Long getId() {    return id;  }  /**   * Sets the value of the 'id' field.   * @param value the value to set.   */  public void setId(java.lang.Long value) {    this.id = value;  }  /**   * Gets the value of the 'name' field.   * @return The value of the 'name' field.   */  public java.lang.CharSequence getName() {    return name;  }  /**   * Sets the value of the 'name' field.   * @param value the value to set.   */  public void setName(java.lang.CharSequence value) {    this.name = value;  }  ...å¬‰ã—ã„ã“ã¨ã«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‹ã«å¯¾å¿œã—ãŸ getter/setter ãŒæ‰‹ã«å…¥ã‚Šã¾ã™ï¼GenericRecord interface ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã‚ˆã‚Šã“ã¡ã‚‰ã®æ–¹ãŒå®‰å…¨ã§è‹¥å¹²é«˜é€Ÿã«ãªã‚‹ã¯ãšã§ã™ã€‚è¦‹ã¦ããŸé€šã‚Š SpecificData ç³»ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã¯ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã™ã‚‹éƒ½åˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã‚¹ã‚­ãƒ¼ãƒãŒæ±ºã¾ã£ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã‚¹ã‚­ãƒ¼ãƒå®šç¾©ãŒé »ç¹ã«å¤‰æ›´ã•ã‚Œã€ãã®åº¦ã«ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã—ç›´ã—ã¾ãã‚‹ã®ã‚‚ã‚„ã‚„ç…©é›‘ã‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚ã‚ã¾ã‚Šå¤‰ã‚ã‚‰ãªã„ãƒ»å¤‰ãˆãŸããªã„ãƒ‡ãƒ¼ã‚¿å‹ã‚’å®šç¾©ã™ã‚‹æ™‚ã¯ SpecificData ã‹ã‚‰ãªã‚‹ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã€å‹•çš„ã«ãƒ»é »ç¹ã«å¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãƒ‡ãƒ¼ã‚¿å‹ã¯ GenericData ã¨ã—ã¦æ‰±ã†ã®ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚Java æ„å¤–ã®è¨€èªã§ã¯ã©ã†ãªã‚‹ï¼ŸJava ã®ä¾‹ã‚’è¦‹ã¦ããŸé€šã‚Š Specific ãªãƒ†ãƒ¼ã‚¿è¡¨ç¾ã¯ Generic ãªã‚‚ã®ã®ã‚µãƒ–ã‚»ãƒƒãƒˆã¨ãªã£ã¦ã„ã¾ã™ã€‚ãã‚“ãªè¨³ã§å¤šãã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã¯ Generic ãªãƒ‡ãƒ¼ã‚¿è¡¨ç¾ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚ãŒã€ Specific ã«ã‚ˆã£ã¦ã¯ã‚µãƒãƒ¼ãƒˆçŠ¶æ³ãŒã¾ã¡ã¾ã¡ãªã‚ˆã†ã§ã™ã€‚ç­†è€…ãŒèªè­˜ã—ãŸé™ã‚Šã§ã¯ã€ C++ ã§ experimental ã§ã‚µãƒãƒ¼ãƒˆ? ã•ã‚Œã¦ã„ãŸã‚Šã€ Go ã§ã¯ gogen-avro ã‚’ä½œã£ã¦ã„ã‚‹äººãŒã„ã¾ã™ã€‚é£½ãã¦ããŸã®ã§æœ¬è¨˜äº‹ã¯ã“ã®ã‚ãŸã‚Šã§çµ‚ã‚ã‚Šã¾ã™ã€‚ã‚ã¨ã¯ç­†è€…ãŒã‚ˆããƒãƒã‚‹ã€è¤‡é›‘ãªã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã—ã¦ã¿ã‚‹è©±ã‚„ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚ŒãŸå¾Œã®ãƒã‚¤ãƒŠãƒªã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®è©±ã¨ã‹åˆ¥è¨˜äº‹ã§æ›¸ãã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚","link":"https://syucream.hatenablog.jp/entry/2019/10/15/233158","isoDate":"2019-10-15T14:31:58.000Z","dateMiliSeconds":1571149918000,"authorName":"syucream","authorId":"syucream"},{"title":"Apache Avro ã«ã¤ã„ã¦çŸ¥ã£ã¦ã„ã‚‹ã“ã¨ã‚’æ›¸ã„ã¦ã„ãã€€ãã®1","contentSnippet":"Apache Avro ã«ãªã«ã‹ã¨ç¸ãŒã‚ã‚Šã€ã‹ã¤æ™®åŠã—ã¦ã„ã‚‹ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã®å‰²ã«æ—¥æœ¬èªã®æƒ…å ±ãŒãã‚“ãªã«ãªã„ï¼ˆå€‹äººã®æ„è¦‹ã§ã™ã€æ„å¤–ã¨ã‚ã‚‹ã‹ã‚‚ï¼‰ã®ã§ã¤ã‚‰ã¤ã‚‰æ›¸ã„ã¦ã¿ã¾ã™ã€‚æ•´ç†ã¯ã•ã‚Œã¦ãŠã‚‰ãšã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ã«è¦ç´ ã‚’ä¸¦ã¹ã¦ã„ã¾ã™ã€‚å®Ÿè£…ã«ã¤ã„ã¦ã¨ãã«è¨€åŠãŒã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã€ Java ã® 1.8.2 ã«ã¤ã„ã¦è§¦ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚Apache Avro ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®ã²ã¨ã¤Apache Avro ã¯ Apache ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã²ã¨ã¤ã§ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ãã®å‘¨è¾ºã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚æ¯”è¼ƒã•ã‚Œã‚‹æŠ€è¡“ã¨ã—ã¦ Protocol Buffers ã‚„ Message Pack ãŒæŒ™ã’ã‚‰ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚Apache Avro ã¯ãã‚Œã‚‰ã®ä¸­ã§ã‚‚ä¸»ã« Hadoop ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ãªã©ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿çµ¡ã¿ã®æ–‡è„ˆã§ã‚ˆãç™»å ´ã™ã‚‹ã‚ˆã†ã«æ€ãˆã¾ã™ã€‚ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã®é€šã‚Šã€å…¬å¼ã§ã„ãã¤ã‹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚github.comç­†è€…ã¯ã»ã¨ã‚“ã© Java ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã—ã‹ä½¿ã‚ãšæ­£ç¢ºãªæ¯”è¼ƒã‚‚è¡Œã£ã¦ãªã„ã®ã§ã™ãŒã€ãŠãã‚‰ã Java å‘ã‘ã®æ©Ÿèƒ½ãŒã‚µãƒãƒ¼ãƒˆåšã‚ã ã¨æ€ã‚ã‚Œã¾ã™ã€‚avro-tools ãŒ Java ã§æ›¸ã‹ã‚Œã¦ãŸã‚Š avro-protobuf ã¨ã„ã† Protocol Buffers ã¨ã®å¤‰æ›ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã•ã‚Œã¦ã„ãŸã‚Šã™ã‚‹ã®ã§ã€‚ã¾ãŸéå…¬å¼ã§ã™ãŒä»¥ä¸‹ã®ã‚ˆã†ãªä»–è¨€èªå‘ã‘ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ã‚ã£ãŸã‚Šã—ã¾ã™ã€‚github.comAvro ã¯ã‚¹ã‚­ãƒ¼ãƒã®è¡¨ç¾åŠ›ãŒå¼·ã„Avro ã¯ã‚¹ã‚­ãƒ¼ãƒã«å¾“ã„ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã™ã‚‹ã‚ã‘ã§ã™ãŒã€ã“ã®ã‚¹ã‚­ãƒ¼ãƒã®è¡¨ç¾åŠ›ãŒå‰²ã¨å¼·ã„ã§ã™ã€‚é›‘ã«åˆ—æŒ™ã™ã‚‹ã¨ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚record å‹(æ§‹é€ ä½“)ã®ã‚µãƒãƒ¼ãƒˆã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚„ doc ã€ namespace ã®å®£è¨€ã‚‚ã§ãã‚‹(ã‚ªãƒ—ã‚·ãƒ§ãƒ³)array å‹(é…åˆ—)ã®ã‚µãƒãƒ¼ãƒˆunion å‹(å…±ç”¨ä½“)ã®ã‚µãƒãƒ¼ãƒˆnull å‹ã¨ã® union ã‚’å–ã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ null ã«ã™ã‚‹ã“ã¨ã§ nullable ãªå‹ã‚’è¡¨ç¾ã§ãã‚‹map å‹ã®ã‚µãƒãƒ¼ãƒˆenum å‹ã®ã‚µãƒãƒ¼ãƒˆfixed å‹ã¨ã„ã†å›ºå®šé•·ãƒã‚¤ãƒˆé…åˆ—ã®ã‚µãƒãƒ¼ãƒˆï¼ˆä½¿ã£ãŸã“ã¨ç„¡ã„ã®ã§ã‚ˆãã‚ã‹ã‚‰ã‚“ï¼‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒè¨­å®šã§ãã‚‹logical types ã‚’ä½¿ã†ã“ã¨ã§å‹ã«åˆ¥ã®è§£é‡ˆã‚’ã‚‚ãŸã›ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ¡ã‚¸ãƒ£ãƒ¼ãªä½¿ã„æ–¹ã¨ã—ã¦ long å‹ã« timestamp-millis logical type ã‚’ã‚‚ãŸã›ã‚‹ãªã©timestamp ã®åˆ¶åº¦ã¯ micros ã‚‚é¸ã¹ã‚‹ã“ã‚Œã‚‰ã«ã‚ˆã‚Šã€ã‹ãªã‚Šãƒªãƒƒãƒãªã‚¹ã‚­ãƒ¼ãƒã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¯ãšã§ã™ã€‚Avro ã®ã‚¹ã‚­ãƒ¼ãƒã‚’è¨˜è¿°ã™ã‚‹ã®ãŒã¤ã‚‰ã„è¡¨ç¾åŠ›ãŒé«˜ã„ã“ã¨ã‚‚ã‚ã‚‹ã®ã§ã™ãŒã€åŸºæœ¬çš„ã«ã‚¹ã‚­ãƒ¼ãƒã¯ JSON ã§è¨˜è¿°ã™ã‚‹ã“ã¨ã«ãªã‚‹ä¸Šã‹çµæ§‹å†—é•·ã§ã‹ã¤äººé–“ã«ã¨ã£ã¦èª­ã¿ã«ãã„å†…å®¹ã«ãªã‚ŠãŒã¡ã§ã™ã€‚å…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã«ç°¡å˜ãªä¾‹ãŒã‚ã‚‹ã®ã§ã™ãŒã€ç°¡å˜ãªã‚‚ã®ã§ã‚‚ã‚ã‚‹ç¨‹åº¦äº‹å‰çŸ¥è­˜ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚ã•ã‚‰ã«å‹ã‚’ãƒã‚¹ãƒˆã—å§‹ã‚ãŸã‚‰åœ°ç„ã§ã™ã€‚ç­†è€…ã¯ç‰¹æ®Šãªè¨“ç·´ã‚’ç¹°ã‚Šè¿”ã™ã“ã¨ã«ã‚ˆã‚Šæœ€è¿‘æ‰‹ã§ã‚¹ã‚­ãƒ¼ãƒã‚’æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ã¦ããŸæ°—ãŒã—ã¾ã™ãŒã€ã“ã®ã‚¹ã‚­ãƒ¼ãƒã®è¨˜è¼‰ã‚’åŒåƒšã«æ±‚ã‚ã‚‹ã®ã¯é…·ãªã‚‚ã®ã§ã™ã€‚github.comã“ã®å•é¡Œã¯ã‹ãªã‚ŠèªçŸ¥ã•ã‚Œã¦ã„ã‚‹ã®ã‹ã€å…¬å¼ãŒ IDL ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ä¸€è¦‹ Protocol Buffers ã‚’å½·å½¿ã¨ã•ã›ã‚‹æ°—ãŒã™ã‚‹ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã§ã™ã­ã€‚avro.apache.orgã¾ãŸã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰å‹•çš„ã«ã‚¹ã‚­ãƒ¼ãƒã‚’è¨˜è¿°ã€ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚Java ã§ã‚ã‚Œã° Schema.createRecord() ã—ã¦ List<Schema.Field> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’åŸ‹ã‚ã¦ãƒ»ãƒ»ãƒ»ã¨ã„ã£ãŸæµã‚Œã§å®Ÿç¾ã§ãã¾ã™ã€‚Avro è‡ªä½“ã®åœ§ç¸®åŠ¹ç‡ã¯ãã‚“ãªé«˜ããªã„ï¼Ÿint, long ã¯ zigzag encoding ã—ã¦ãã‚Œã¾ã™ãŒã€ bytes, string ã¯ length + ãƒã‚¤ãƒŠãƒªãªã©ã‹ãªã‚Šã‚·ãƒ³ãƒ—ãƒ«ãªã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ã—ã¾ã™ã€‚çµæœã¨ã—ã¦ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚ŒãŸã‚ã¨ã®ãƒã‚¤ãƒŠãƒªã®ã‚µã‚¤ã‚ºã¯ Protocol Buffers ã‚„ Message Pack ã¨æ¯”è¼ƒã—ã¦ãã‚“ãªã«æ½°ã‚Œãªã„ã¨æ€ã„ã¾ã™ã€‚ï¼ˆå®Ÿæ¸¬ã—ãŸè¨³ã§ãªãã€å˜ã«ã“ã‚Œã¾ã§ã®çµŒé¨“å‰‡ç¨‹åº¦ã®è©±ã§ã™ï¼‰ãŸã  Object Container Files ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å–ã‚‹ã¨ãƒ–ãƒ­ãƒƒã‚¯å˜ä½ã«åœ§ç¸®ã‚’ã‹ã‘ã¦ãã‚ŒãŸã‚Šã—ã¾ã™ã€‚Object Container Files ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ä¾¿åˆ©ã•ã‚ãªãŸãŒãƒ‡ãƒ¼ã‚¿ã‚¢ãƒŠãƒªã‚¹ãƒˆã‚„ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆãªã©ã®ãƒã‚¸ã‚·ãƒ§ãƒ³ã§åƒã„ã¦ã„ã‚‹ãªã‚‰ã€ã“ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ Avro ã¨å¯¾é¢ã™ã‚‹ã“ã¨ãŒå¤šã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚.avro æ‹¡å¼µå­ã‚’ã‚ˆãå–ã‚‹ã€ Object Container Files ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¾“ã†ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å–ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚å®Ÿä½“ã¯ well-known ãª Avro ã‚¹ã‚­ãƒ¼ãƒã«å¾“ã£ã¦ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã«ãªã‚Šã¾ã™ã€‚ãã®ã‚¹ã‚­ãƒ¼ãƒã®ä¸­ã«ã¯ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã‚¹ã‚­ãƒ¼ãƒã¨ã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ã€ãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒ—ãƒªãƒ³ãƒˆæƒ…å ±ãªã©ãŒå«ã¾ã‚Œã¾ã™ã€ã“ã“ã®ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã«ã‚ˆã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚€ã“ã¨ã§ä¸­ã®ãƒã‚¤ãƒŠãƒªãŒã©ã‚“ãªã‚¹ã‚­ãƒ¼ãƒã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚ŒãŸã‹ã‚ã‹ã‚‹ã®ã§å‹•çš„ã«ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶ã‚’ç”Ÿæˆã—ã¦èª­ã‚ã‚‹çŠ¶æ…‹ã«ãªã£ã¦ã‚‹ã‚ã‘ã§ã™ã­ï¼ã™ãã‚Œã‚‚ã®ï¼ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ BigQuery ã‚„ Redshift ã§ã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã€ Hadoop ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ã¾ã‚Šé–¢ã‚ã‚‰ãšã¨ã‚‚ Avro ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«æ›¸ãå‡ºã—ã¦ãŠã‘ã°ã€ã‚ã¨ã§ DHW ã«çµ±åˆã—ã¦å®‰å…¨ä¾¿åˆ©ã«ã‚¯ã‚¨ãƒªã‚’æŠ•ã’ã‚‰ã‚Œã‚‹ã‚ã‘ã§ã™ã­ï¼ã™ãã‚Œã‚‚ã®ï¼avro-tools ãŒé–‹ç™ºé‹ç”¨ã«ä¾¿åˆ©ã‚ã¾ã‚Šè¨€åŠã•ã‚Œã¦ãªã„æ°—ãŒã—ã¾ã™ãŒã€ avro-tools ã¨ã„ã† Java è£½ã®ãƒ„ãƒ¼ãƒ«ãŒä¾¿åˆ©ã§ã™ã€‚äº‹å‰å®šç¾©ã—ãŸ Avro ã®ã‚¹ã‚­ãƒ¼ãƒã‚’è¨˜è¼‰ã—ãŸ.avsc ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ Specific ã‚¯ãƒ©ã‚¹ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã®ã¯ã‚‚ã¡ã‚ã‚“ã€ Object Container Files ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ schema ã‚’èª­ã‚“ã§åã„ã¦ãã‚ŒãŸã‚Šãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ json ã«å¤‰æ›ã—ã¦å‡ºåŠ›ã—ã¦ãã‚ŒãŸã‚Šã—ã¾ã™ã€‚ç‰¹ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ json ã§å‡ºåŠ›ã—ã¦ãã‚Œã‚‹ã¨ã€ jq ãªã©ã¨çµ„ã¿åˆã‚ã›ã¦ãƒ•ã‚£ãƒ«ã‚¿ã—ãŸã‚Šå†…å®¹ç¢ºèªã§ããŸã‚Šã—ã¦ä¾¿åˆ©ã§ã™ã­ã€‚mvnrepository.comé£½ãã¦ããŸã®ã§æœ¬è¨˜äº‹ã§ã¯ã“ã‚Œãã‚‰ã„ã«ã—ã¦ãŠãã¾ã™ã€‚æ°—åŠ›ãŒã‚ã£ãŸã‚Šæ¬¡å›æ›¸ããŸã„ã“ã¨ãŒã¾ã¨ã¾ã£ã¦ããŸã‚‰ã¾ãŸæ›¸ãã¾ã™ã€‚","link":"https://syucream.hatenablog.jp/entry/2019/10/09/012545","isoDate":"2019-10-08T16:25:45.000Z","dateMiliSeconds":1570551945000,"authorName":"syucream","authorId":"syucream"},{"title":"ã€Œãƒ‡ãƒ¼ã‚¿ã¨MLå‘¨è¾ºã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚’è€ƒãˆã‚‹ä¼šã€ã¨ã„ã†å‹‰å¼·ä¼šã®ç¬¬äºŒå›ã‚’é–‹å‚¬ã—ã¾ã—ãŸ","contentSnippet":"TL;DR2019/07/19(é‡‘)ã«ã€ãƒ¤ãƒ•ãƒ¼æ ªå¼ä¼šç¤¾æ§˜ã‚³ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚¹ãƒšãƒ¼ã‚¹ã® LODGE ã«ãŠã„ã¦ã€ã€Œãƒ‡ãƒ¼ã‚¿ã¨MLå‘¨è¾ºã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚’è€ƒãˆã‚‹ä¼šã€ã¨ã„ã†å‹‰å¼·ä¼šã®ç¬¬äºŒå›ç›®ã‚’é–‹å‚¬ã—ã¾ã—ãŸã€‚data-engineering.connpass.comãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã¨ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã€ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã«ã–ã£ãã‚Šè¢«ã‚‹ã‚ˆã†ãªå°‘ã—åºƒãæ›–æ˜§ãªãƒ‰ãƒ¡ã‚¤ãƒ³ã§é–‹å§‹ã—ãŸå‹‰å¼·ä¼šã§ã™ã€‚ä»Šå›ã¯å‰å›ã‚ˆã‚Šå°‘ã€…å¤šã‚ã§ã€ 40 äººå¼·ã®å‚åŠ è€…ãŒå‚åŠ ã—ã¦ãã‚Œã¾ã—ãŸã€‚ç™ºè¡¨ã€ LT ã«åˆã‚ã›ã¦æ‡‡è¦ªä¼šã‚‚è­°è«–ãŒå¼¾ã¿ã€ä¸»å‚¬ã®ã²ã¨ã‚Šã¨ã—ã¦ã¯å®Ÿç¾ã—ãŸã‹ã£ãŸã“ã¨ãŒã‚ã‚‹ç¨‹åº¦ã§ããŸã®ã§ã¯ãªã„ã‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ã¤ã‚‰ã¤ã‚‰ç™ºè¡¨å†…å®¹ã›ã£ã‹ããªã®ã§è¦šãˆã¦ã„ã‚‹ã†ã¡ã«ç™ºè¡¨è³‡æ–™ã®ãƒªãƒ³ã‚¯è¨˜è¼‰ã¨è¶…å€‹äººçš„ãªæ„Ÿæƒ³è¼‰ã›ã¦ã¿ã¾ã™ã€‚15 åˆ†æ GCPã§Streamãªãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é‹ç”¨ã—ã¯ã˜ã‚ãŸ by @shoe116ãƒ¡ãƒ«ã‚«ãƒªã§ã®ãƒ­ã‚°åé›†ã®ãŸã‚ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ§‹ç¯‰ã®è©±ã§ã™ã€‚ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¸ã®ç§»è¡Œã‚„ãƒ“ã‚¸ãƒã‚¹ãƒ»çµ„ç¹”ã®ã‚¹ã‚±ãƒ¼ãƒ«ã«åˆã‚ã›ãŸè©¦è¡ŒéŒ¯èª¤ã®è·¡ãŒä¼ºãˆã¾ã™ã€‚ã¨ã„ã†ã‹ã‚ãŸã—ã‚‚æ¥­å‹™ã§å‚åŠ ã—ã¦ã‚‹ã‚„ã¤ã§ã™ã€‚å®Ÿéš›ä¸Šè¨˜ã®è©¦è¡ŒéŒ¯èª¤ã‚’ã—ã¦ã„ã¾ã™ã€‚speakerdeck.comè¡Œå‹•ãƒ­ã‚°å‡¦ç†åŸºç›¤ã®æ§‹ç¯‰ by @hirosassaã‚µãƒ¼ãƒ“ã‚¹ã«ãŠã‘ã‚‹è¡Œå‹•ãƒ­ã‚°ã®åé›†åŸºç›¤ã®åˆ·æ–°ã®è©±ã§ã™ã€‚ç¾è¡Œã‚·ã‚¹ãƒ†ãƒ ãŒ pull å‹ã§åŸºç›¤å´ãŒã‚µãƒ¼ãƒ“ã‚¹ã®å†…æƒ…ã‚’çŸ¥ã£ã¦ã—ã¾ã†å•é¡Œã‚’ã€ push å‹ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã—ãŸã‚ãŸã‚ŠãŒä»Šå¾Œã®æŠ•è³‡ã«ãªã‚Šã†ã‚‹ãŠã‚‚ã—ã‚ã„ç‚¹ãªã®ã§ã¯ã¨æ€ã„ã¾ã™ã€‚ï¼ˆåŸºç›¤ã‚·ã‚¹ãƒ†ãƒ ã£ã¦ã©ã“ã¾ã§ã‚µãƒ¼ãƒ“ã‚¹ã®ã“ã¨ã‚’çŸ¥ã‚‹ã‹ã€è²¬ä»»åˆ†ç•Œã‚’ã©ã“ã§ã™ã‚‹ã‹ã—ã°ã—ã°æ‚©ã¾ã—ããªã‚Šã¾ã™ã‚ˆã­ï¼‰speakerdeck.comLT æ Google Cloud ML Engineã«æµ¸ã‹ã£ã¦ã¿ã‚‹ by @yudeayaseGCP ã® ML Engine ã®è©±ã§ã™ã€‚ML Engine, ä¾¿åˆ©ãã†ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã“ã®ä»•çµ„ã¿ã«ç‰¹åŒ–ã—ã¦ã—ã¾ã†ã®ã¯è‰¯ã„ã®ã‹ï¼Ÿãªã©ã¨è€ƒãˆã•ã›ã‚‰ã‚Œã¾ã—ãŸã€‚cloud.google.comï¼ˆè³‡æ–™ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãªã—ï¼Ÿã‚ã¨ã§èª¿ã¹ã‚‹PoCæ¡ˆä»¶ãŒå¤šã™ãã¦ã¤ã‚‰ã„ã®ã§ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ä½¿ã„ã¾ã‚ã™ãƒ„ãƒ¼ãƒ«ã‚’å…¥ã‚ŒãŸã€‚ by @mori_kaz0429ç¹°ã‚Šè¿”ã—ç™ºç”Ÿã™ã‚‹ PoC æ¡ˆä»¶ã§ã€ä¼¼ãŸã‚ˆã†ãªã‚¯ã‚¨ãƒªã‚’æŠ•ã’ãŸã‚Šã™ã‚‹ã“ã¨ãŒå¤šã„å‡¦ç†ã‚’å…±é€šåŒ–ã€å†åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹è©±ã§ã™ã€‚æœ€å¾Œã®æ–¹ã«ã¯ Apache Airflow ãªã©ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä»Šå¾Œä½¿ã£ã¦ã¿ãŸã„è©±ã‚‚ã€‚ï¼ˆè³‡æ–™ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãªã—ï¼Ÿã‚ã¨ã§èª¿ã¹ã‚‹Cloud Composer & Cloud Dataflow ã«ã‚ˆã‚‹ãƒãƒƒãƒETLã®å†æ§‹ç¯‰ by @yuzutas0Cloud Composer (Apache Airflow ã®ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹) ã‚’ä½¿ã£ã¦å£Šã‚Œã‹ã‘ã®ãƒ‡ãƒ¼ã‚¿åŒæœŸã®ä»•çµ„ã¿ã‚’ç«‹ã¦ç›´ã™è©±ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒŠãƒªã‚¹ãƒˆã€ä¸¡æ–¹ã«å¯¾ã—ã¦ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚’ã‹ã‘ã¤ã¤ç¾çŠ¶ã‚’é‘‘ã¿ã¦è‰¯ã„ãƒãƒ©ãƒ³ã‚¹ã®ã¨ã“ã‚ã‚’æ”»ã‚ã‚‹ã¨ã„ã†ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã«è¿‘ã„å´é¢ã‚‚ã‚ã‚Œã°ã€ Cloud Dataflow ã«ã‚ˆã‚‹ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°å‡¦ç†ã«è§¦ã‚ŒãŸã‚Šã™ã‚‹è©±ã‚‚ã‚ã‚Šç››ã‚Šã ãã•ã‚“ã§ã—ãŸã€‚speakerdeck.comDigdagã§ETLå‡¦ç†ã‚’ã™ã‚‹ by @nakano_shotaä»Šåº¦ã¯ Digdag ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’çµ„ã‚“ã è©±ã§ã™ã€‚s3_touch ã¨ã„ã†ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’é–‹ç™ºã—ã¦ã€ s3_wait ã¨çµ„ã¿åˆã‚ã›ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“ä¾å­˜é–¢ä¿‚ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¦è‰¯ã„ã€‚ã‚ã¾ã‚Šæ·±ãè§¦ã‚Œã‚‰ã‚Œãªã‹ã£ãŸã‘ã©ãƒªãƒˆãƒ©ã‚¤å‡¦ç†ã‚„å†ªç­‰æ€§æ‹…ä¿å¤§äº‹ã§ã™ã‚ˆã­ã€‚ã‚‚ã£ã¨ãŠè©±èã„ã¦ã¿ãŸã„æ°—ãŒã—ã¾ã™ã€‚speakerdeck.comComet.ml ã§ AutoML ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–‹ç™ºï¼ˆä»®ï¼‰ by @Y_oHr_NComet.ml ã€åˆã‚ã¦çŸ¥ã£ãŸã®ã§ã™ãŒã‹ãªã‚Šè‰¯ã•ãã†ï¼codecov ã§ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å¯è¦–åŒ–ã™ã‚‹ã®ã¨åŒã˜ã‚ˆã†ã«ãƒ¢ãƒ‡ãƒ«ã®å¯è¦–åŒ–ã‚’ã§ãã‚‹ã®ã¯å¥½æ„Ÿè§¦ï¼speakerdeck.comãƒ‡ãƒ¼ã‚¿æ´»ç”¨ã®éš›ã«ãƒãƒã£ã¦ã—ã¾ã£ãŸãƒ­ã‚°ãƒ»ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ by @yu-ya4ã“ã®æ‰‹ã®è‹¦åŠ´è©±ã€ã“ã‚Œã“ãã“ã†ã„ã†å‹‰å¼·ä¼šã§è©±ã—åˆã„ãŸã‹ã£ãŸã“ã¨ãªæ°—ãŒã—ã¾ã™ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ—¥ä»˜ãŒä½•ã®æ™‚é–“ã‚’è¡¨ã™ã‹å•é¡Œã€ã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ã«ã©ã†ç«‹ã¡å‘ã‹ã†ã‹ã€ STRING å‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã« JSON çªã£è¾¼ã‚€ã®ã©ã†ãªã‚“ã è©±ã€ null ã®æ‰±ã„ã¨çµæ§‹ã‚ã‚‹ã‚ã‚‹è©±ãªæ°—ãŒã™ã‚‹ãŒãƒ»ãƒ»ãƒ»ã€‚äºŒç•ªç›®ã®è©±é¡Œã¯å€‹äººçš„ã«ã‚‚åˆºã•ã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã—ãŸã€‚ç°¡æ˜“ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒ­ã‚°ã‚’å‡ºåŠ›ã—ã¦ã€èª­ã¿å‡ºã™æ™‚ã«è‹¦åŠ´ã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒã‚ªãƒ³ãƒªãƒ¼ãƒ‰ã®æˆ¦ç•¥è‡ªä½“ã¯é–“é•ã£ã¦ã¯ã„ãªã„ã¯ãšã ã—ãƒ»ãƒ»ãƒ»ã€‚è§¦ã‚Œã‚‰ã‚Œã¦ã„ãªã‹ã£ãŸåˆ¥ã®ç‚¹ã¨ã—ã¦ã€ BigQuery ã¯ã‚«ãƒ©ãƒ ãƒŠã§ãƒ‡ãƒ¼ã‚¿ã‚’æŒã£ã¦ãã‚Œã¦ã„ã‚‹ã¯ãšãªã®ã§ã™ãŒã€ JSON ã‚’çªã£è¾¼ã‚“ã§èª­ã‚€æ™‚ã«ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã§ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè½ã¡ã‚‹ï¼ˆèª²é‡‘ãŒå¢—ãˆã‚‹ï¼Ÿï¼‰ã‹ã‚‚ã—ã‚Œãªã„ãªã¨æ€ã„ã¾ã—ãŸã€‚speakerdeck.comä»Šå¾Œã«å‘ã‘ã¦å¹¸ã„ãªã“ã¨ã«å‚åŠ è€…ã®æ–¹ã€…ã‹ã‚‰ã‚‚ãã‚Œãªã‚Šã«å¥½è©•ã‚’å¾—ã‚‰ã‚ŒãŸã‚ˆã†ã ã—ã€è‡ªåˆ†ã¨ã—ã¦ã‚‚çŸ¥è¦‹ã‚’å¾—ãŸã„æ°—æŒã¡ã‚‚ã‚ã‚‹ãŸã‚ã€ä¸»å‚¬ãƒ¡ãƒ³ãƒãƒ¼ã§è©±ã—åˆã„ã¤ã¤ç¬¬ä¸‰å›ã‚’ä¼ç”»ã—ã¦ã„ããŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ã‚¸ãƒ£ã‚¹ãƒˆã‚¢ã‚¤ãƒ‡ã‚¢ã§ã™ãŒã€åˆå¿ƒè€…æ ï¼Ÿã¨ã„ã†ã‹ã“ã‚Œã‹ã‚‰ãƒ‡ãƒ¼ã‚¿åŸºç›¤ã‚’ä½œã£ã¦ã„ã“ã†ã¨ã™ã‚‹äººãŸã¡ãŒç™ºè¡¨ã—ã‚„ã™ã„æ ã‚’è¨­ã‘ã‚‹ã¨ã‹ã‚‚ã‚ã‚‹ã¨ã‚¤ãƒ™ãƒ³ãƒˆã®é›°å›²æ°—å¤‰ã‚ã‚‹ã‹ãªã¨ã‹ã€‚ãã®æ™‚ãŒæ¥ãŸã‚‰ã¾ãŸã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã—ã¾ã™ã®ã§ã€ã”èˆˆå‘³ã‚ã‚‹æ–¹ã€…ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã—ãŸã‚‰ãœã²ãœã²ï¼ï¼","link":"https://syucream.hatenablog.jp/entry/2019/07/24/024314","isoDate":"2019-07-23T17:43:14.000Z","dateMiliSeconds":1563903794000,"authorName":"syucream","authorId":"syucream"},{"title":"æŠ€è¡“æ›¸å…¸5ã§é…å¸ƒã—ãŸåŒäººèªŒã®åŸç¨¿ãƒ‡ãƒ¼ã‚¿ã‚’ GitHub ã§å…¬é–‹ã—ã¾ã—ãŸ","contentSnippet":"ã“ã¡ã‚‰ã§ç´¹ä»‹ã—ãŸã€åƒ•ãŒä¸»å‚¬ã™ã‚‹ã‚µãƒ¼ã‚¯ãƒ«ã§æŠ€è¡“æ›¸å…¸5ã§é…å¸ƒã—ãŸåŒäººèªŒã®åŸç¨¿ãƒ‡ãƒ¼ã‚¿ã‚’å…¬é–‹ã—ã¾ã—ãŸã€‚syucream.hatenablog.jpãƒªãƒã‚¸ãƒˆãƒªã¯ã“ã¡ã‚‰ã«ãªã‚Šã¾ã™ã€‚github.comå‰å›ã¨åŒæ§˜ã€ Re:VIEW ã‚’ä½¿ã£ã¦è¨˜è¿°ã—ã¦ã„ã¾ã™ã€‚epub / pdf ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ¬²ã—ã„æ–¹ã¯ã„ã„æ„Ÿã˜ã«ãƒ“ãƒ«ãƒ‰ã—ã¦ãã ã•ã„ã€‚ã‚‚ã—å¤šå°‘ã§ã‚‚æ°—ã«å…¥ã£ãŸæ–¹ãŒã„ã‚‰ã£ã—ã‚ƒã‚Œã°ã€ Kindle ç‰ˆã‚’è³¼å…¥ã—ã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ï¼åƒ•ã®ã‚¸ãƒ¥ãƒ¼ã‚¹ä»£ã®è¶³ã—ãã‚‰ã„ã«ã¯ãªã‚Šã¾ã™ã€‚www.amazon.co.jp","link":"https://syucream.hatenablog.jp/entry/2018/12/21/002509","isoDate":"2018-12-20T15:25:09.000Z","dateMiliSeconds":1545319509000,"authorName":"syucream","authorId":"syucream"},{"title":"Kubernetes ã¨ CSI(Container Storage Interface) ã«ã¤ã„ã¦","contentSnippet":"ã“ã®è¨˜äº‹ã¯ Kubernetes2 Advent Calendar 4 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚æœ¬è¨˜äº‹ã¯ CSI(Container Storage Interface) ã¨ Kubernetes ã§ã® CSI ã®ã‚µãƒãƒ¼ãƒˆã«ã¤ã„ã¦è§¦ã‚Œã¾ã™ã€‚åŸ·ç­†ã«æ™‚é–“ãŒã‚ã¾ã‚Šå‰²ã‘ãªã‹ã£ãŸç‚ºã€å¾Œã§ã‚‚ã†å°‘ã—åŠ ç­†ã™ã‚‹ã€ã‚ã‚‹ã„ã¯åˆ¥é€”ç¶šãã®è¨˜äº‹ã‚’æ›¸ãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚CSI(Container Storage Interface) ã¨ã¯CSI(Container Storage Interface, ä»¥ä¸‹ CSI) ã¯ Kubernetes ãªã©è¤‡æ•°ã® Container Orchestration (CO) ã‹ã‚‰å…±é€šã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ SP (Storage Provider) ã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹ãŸã‚ã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ä»•æ§˜ã§ã™ã€‚ã‚ˆã‚Šå…·ä½“çš„ã«ã¯ã€ CO ã‹ã‚‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’æŠ½è±¡åŒ–ã—ãŸ Volume ã‚’ã‚¢ã‚¿ãƒƒãƒãƒ»ãƒ‡ã‚¿ãƒƒãƒã—ãŸã‚Šã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’å–ã£ãŸã‚Šã™ã‚‹æ©Ÿèƒ½ã®ãŸã‚ã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚CSI ã¯ Kubernetes ã¨ã¯ç‹¬ç«‹ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§é€²è¡Œã—ã¦ãŠã‚Šã¾ã™ã€‚github.comã¾ãŸ Kubernetes ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä»¥ä¸‹ã§ã€ Kubernetes ã‹ã‚‰ SP ãŒæä¾›ã™ã‚‹ CSI ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¸é€šä¿¡ã™ã‚‹ãŸã‚ã® CSIDriver ã¨é–¢é€£å®Ÿè£…ã‚’ä»¥ä¸‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§é€²è¡Œã—ã¦ã„ã¾ã™ã€‚github.comKubertenes ã¨ã—ã¦ã¯ CSI ã¯ 1.9 ã§ Alpha ã€ 1.10 ã§ Beta ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã«ãªã£ã¦ã„ã¾ã™ã¾ãŸ Kubernetes ã§ã® CSI åˆ©ç”¨ã«ã¤ã„ã¦ã¯ä»–ã«æ—¢ã«è©¦ã•ã‚Œã¦ã„ã‚‹æ–¹ã‚‚ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã¡ã‚‰ã®è¨˜äº‹ã¯è©³ç´°ã«è¸ã¿è¾¼ã‚“ã æ§‹æˆèª¬æ˜ãªã©ã‚‚ã•ã‚Œã¦ãŠã‚Šã€ã‚ªã‚¹ã‚¹ãƒ¡ã§ãã‚‹å†…å®¹ã«ãªã£ã¦ã„ã¾ã™ã€‚qiita.comCSI ã®ä»•æ§˜CSI ã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ä»•æ§˜ã¯ Protocol Buffer ã§å®šç¾©ã•ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã“ã®ãƒªãƒã‚¸ãƒˆãƒªå†…ã® lib/go/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ .proto ãƒ•ã‚¡ã‚¤ãƒ«ã®å®šç¾©ã«å¾“ã£ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã® Go å®Ÿè£…ãŒé…ç½®ã•ã‚Œã¦ã„ã¾ã™ã€‚github.comCSI ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ Controller plugin, Node plugin ã®äºŒç¨®é¡ãŒæƒ³å®šã•ã‚Œã¦ãŠã‚Šã¾ã™ã€‚ã¾ãŸ CO ã¨ã“ã‚Œã‚‰ CSI ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–“ã¯ gRPC ã§é€šä¿¡ã™ã‚‹ã“ã¨ãŒæƒ³å®šã•ã‚Œã¦ã„ã¾ã™ã€‚CSI ã®ã‚µãƒ¼ãƒ“ã‚¹CSI ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ä»¥ä¸‹ä¸‰ç¨®é¡ãŒæƒ³å®šã•ã‚Œã¦ã„ã¾ã™ã€‚æ§‹æˆã«ã‚ˆã£ã¦ã¯å®Ÿè£…ã—ãªãã¦ã‚‚è‰¯ã„ã‚µãƒ¼ãƒ“ã‚¹ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã¾ã™ãŒã€å°‘ãªãã¨ã‚‚ Node Service ã® NodePublishVolume, NodeUnpublishVolume ã¯å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ï¼ˆã§ãªã„ã¨ Node ã‹ã‚‰ Volume ã‚’å‚ç…§ã§ããªã„ã¯ãšï¼‰Identity ServiceCO ã‹ã‚‰ Plugin ã®ã‚±ãƒ¼ãƒ‘ãƒ“ãƒªãƒ†ã‚£ (å¾Œè¿°) ã‚„ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å‚ç…§ã‚’å¯èƒ½ã«ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹Controller ServiceNode ã‚’ã¾ãŸã„ã§ Volume ã®æ§‹æˆã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ã‚µãƒ¼ãƒ“ã‚¹Volume ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆæ“ä½œã‚‚ã‚µãƒãƒ¼ãƒˆã™ã‚‹Node Serviceå„ Node ã‹ã‚‰ Volume ã®æ“ä½œã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã®ã‚µãƒ¼ãƒ“ã‚¹CSI ã«ãŠã‘ã‚‹ Volume ã®çŠ¶æ…‹é·ç§»CSI ã§ Node ã‹ã‚‰ Volume ã‚’åˆ©ç”¨ã•ã‚Œã‚‹ã¾ã§ã«ã€ Volume ã¯åŸºæœ¬çš„ã«ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ…‹é·ç§»ã‚’ã—ã¦ã„ãã¾ã™ã€‚å¹¾ã¤ã‹ã®çŠ¶æ…‹ã¯ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒç¤ºã™å¾Œè¿°ã® CSI ã‚±ãƒ¼ãƒ‘ãƒ“ãƒªãƒ†ã‚£ã«ã‚ˆã£ã¦å­˜åœ¨ã—ãªã‹ã£ãŸã‚Šã—ã¾ã™ã€‚   CreateVolume +------------+ DeleteVolume +------------->|  CREATED   +--------------+ |              +---+----+---+              | |       Controller |    | Controller       v+++         Publish |    | Unpublish       +++|X|          Volume |    | Volume          | |+-+             +---v----+---+             +-+                | NODE_READY |                +---+----^---+               Node |    | Node              Stage |    | Unstage             Volume |    | Volume                +---v----+---+                |  VOL_READY |                +------------+               Node |    | Node            Publish |    | Unpublish             Volume |    | Volume                +---v----+---+                | PUBLISHED  |                +------------+ref. https://github.com/container-storage-interface/spec/blob/master/spec.md#volume-lifecycleCSI ã®ã‚±ãƒ¼ãƒ‘ãƒ“ãƒªãƒ†ã‚£CSI ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã©ã®ã‚ˆã†ãªæ“ä½œã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‹ã®æƒ…å ±ã§ã™ã€‚CSI ã®ä»•æ§˜ã¨ã—ã¦ã¯ä»¥ä¸‹ 4 ç¨®é¡ã®ã‚±ãƒ¼ãƒ‘ãƒ“ãƒªãƒ†ã‚£ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚PluginCapabilityCSI ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å…¨ä½“ã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹æ©Ÿèƒ½Controller Service ã‚’æä¾›ã™ã‚‹ã‹ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒœãƒªãƒ¥ãƒ¼ãƒ æ‹¡å¼µã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‹ãªã©ã®æƒ…å ±ã‚’å«ã‚€CO ã¯ GetPluginCapabilities ãƒ¡ã‚½ãƒƒãƒ‰ã§å–å¾—å¯èƒ½VolumeCapabilityVolume ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¿ã‚¤ãƒ—ã‚„ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆãƒªãƒ¼ãƒ‰ã‚ªãƒ³ãƒªãƒ¼ãªã®ã‹ãªã©ï¼‰ã€å®¹é‡ãªã©ã®æƒ…å ±ã‚’å«ã‚€CO ã¯ CreateVolume, ControllerPublishVolume ãªã©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§æŒ‡å®šã‚„å€¤ã®æ¤œè¨¼ãŒå¯èƒ½ControllerServiceCapabilityCreate/Delete , Publish/Unpublish ãªã©ã®æ“ä½œã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‹ã®æƒ…å ±ã‚’å«ã‚€CO ã¯ ControllerGetCapabilities ãƒ¡ã‚½ãƒƒãƒ‰ã§å–å¾—å¯èƒ½NodeServiceCapabilityStage/Unstage ãªã©ã®æ“ä½œã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‹ã®æƒ…å ±ã‚’å«ã‚€CO ã¯ NodeGetCapabilities ãƒ¡ã‚½ãƒƒãƒ‰ã§å–å¾—å¯èƒ½CSI ã®åˆ©ç”¨ç”¨é€”CSI ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦ã¯ã™ã§ã«ã€ NFS ã‚„ iSCSI ãªã©ã®å…¬å¼ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å«ã‚ã€ AWS ã‚„ GCP ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã‚’å¯èƒ½ã¨ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå­˜åœ¨ã—ã¾ã™ã€‚ä»¥ä¸‹ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ—¢ã«å­˜åœ¨ã™ã‚‹ CSI ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«é–¢ã™ã‚‹è¨˜è¿°ãŒã‚ã‚Šã¾ã™ã€‚kubernetes-csi.github.ioç°¡å˜ãª CSI Plugin ã®å®Ÿè£…ã‚’è¿½ã£ã¦ã¿ã‚‹ä»¥ä¸Šã ã‘ã ã¨ CSI ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å‹•ä½œãŒæŠŠæ¡ã—é›£ã„ã®ã§ã€ kubernetes-csi ã® drivers ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚‹ HostPath plugin ã®å‹•ä½œã‚’è¿½ã£ã¦ã¿ã¾ã™ã€‚ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ãƒªãƒã‚¸ãƒˆãƒªã« kubernetes ã¸ã® deploy ç”¨ yaml ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚åŒæ¢±ã•ã‚Œã¦ãŠã‚Šå‹•ä½œã‚’è¿½ã†ã®ã«ä¾¿åˆ©ã§ã™ã€‚HostPath plugin ã§ã¯ CSI ã® Identity, Controller, Node ä¸‰ç¨®é¡ã® gRPC ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚ãã®å®Ÿè£…ã¯ github.com/kubernetes-csi/drivers/tree/master/pkg/hostpath ã«å­˜åœ¨ã—ã¾ã™ã€‚Identity Server ã¯ç‰¹ã«ç‰¹æ®Šãªå®Ÿè£…ã‚’ã—ã¦ã„ã¾ã›ã‚“ã€‚github.com/kubernetes-csi/drivers/blob/master/pkg/csi-common ã«å­˜åœ¨ã™ã‚‹ã€ä»–ã® Driver ã¨å…±é€šã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…ã‚’ãã®ã¾ã¾ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚Controller Server ã§ã¯ CreateVolume, DeleteVolume , CreateSnapshot, DeleteSnapshot, ListSnapshots ã‚’å®Ÿè£…ã—ã¾ã™ã€‚CreateVolume, DeleteVolume ã§ã¯è¤‡é›‘ãªã“ã¨ã‚’ã—ã¦ãŠã‚‰ãšã€ UUID ä»˜ãã®åå‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ˜ã£ã¦ Volume ã«è¦‹ç«‹ã¦ã€ map ã§ Volume ã®ç®¡ç†ã‚’è¡Œã„ã¾ã™ã€‚CreateSnapshot, DeleteSnapshot ã¯ãã‚Œã«ä¼¼ã¦ã€ Volume ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ tar czf ã§å›ºã‚ã¦åŒã˜ã UUID ä»˜ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ãƒ»ç®¡ç†ã—ã¾ã™ã€‚Node Server ã§ã¯ NodePublishVolume, NodeUnpublishVolume, NodeStageVolume , NodeUnstageVolume ã‚’å®Ÿè£…ã—ã¾ã™ã€‚NodePublishVolume, NodeUnpublishVolume ã¯ä½œæˆã•ã‚ŒãŸ Volume ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ k8s.io/kubernetes/pkg/util/mount ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä»‹ã—ã¦ mount/unmount ã—ã¾ã™ã€‚NodeStageVolume , NodeUnstageVolume ã¯å˜ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸­ã® Volume ã‚„ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ‘ã‚¹ãŒç©ºã§ãªã„ã“ã¨ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ã ã‘ã«ãªã‚Šã¾ã™ã€‚HostPath ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã¯ä»–ã«è¤‡é›‘ãªãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚‹å¿…è¦ãŒç„¡ã„ãŸã‚ã“ã†ãªã£ã¦ã„ã‚‹ã®ã§ã¯ã¨æ€ã‚ã‚Œã¾ã™ã€‚kubernetes ä¸Šã§æƒ³å®šã•ã‚Œã‚‹æ§‹æˆã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚Controller Server ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å‚ç…§CreateVolume ãªã© Volume ã®ä½œæˆãƒ»å‰Šé™¤ã¯ https://github.com/kubernetes-csi/external-provisioner ã‚³ãƒ³ãƒ†ãƒŠã‚’åˆ©ç”¨ControllerPublishVolume ãªã© Volume ã® Publish æ“ä½œã¯ https://github.com/kubernetes-csi/external-attacher ã‚’åˆ©ç”¨CreateSnapshot ãªã©ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã®æ“ä½œã¯ https://github.com/kubernetes-csi/external-snapshotter ã‚’åˆ©ç”¨Node Server ã®ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§https://github.com/kubernetes-csi/driver-registrar ã‚’ä½¿ã£ã¦ CSIDriver ã‚’ kubelet ã‹ã‚‰å‚ç…§å¯èƒ½ã«ã™ã‚‹kubelet ã‹ã‚‰ CSIDriver ã‚’ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã¨ã„ã†æ ¼å¥½ã§èª­ã¿å‡ºã—å‚ç…§ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã¯ Kubernetes æœ¬ä½“ãƒªãƒã‚¸ãƒˆãƒªã® kubelet ã¨é–¢é€£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å­˜åœ¨ãŠã‚ã‚Šã«ä»¥ä¸Šã€ CSI ã¨ãã® Kubernetes ã¸ã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢ã™ã‚‹è¨˜äº‹ã§ã—ãŸã€‚CSI ã¯å¯æ¬æ€§ã‚’æ‹…ä¿ã—ã¤ã¤ Kubernetes ã§ã®åˆ©ç”¨ã‚’é‡è¦è¦–ã•ã‚Œã¦ä½œã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ãŒã€ CSI ã®ä»•æ§˜å«ã‚ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚‚ã¾ã æ¯ã‚Œã¦ã„ã‚‹ã¨ã¯è¨€ãˆãšã€æ©Ÿèƒ½ã‚‚å¤šãã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Kubernetes ç”¨ã®å˜ãªã‚‹ã‚µãƒ³ãƒ—ãƒ«ã¨ã¯ã„ãˆ HostPath ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ tar ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ä½œæˆã—ãŸã‚Šãªã©ã€ã‚‚ã†å°‘ã—æŠ½è±¡åŒ–ã•ã‚Œã¦ã»ã—ã„ç®‡æ‰€ã‚‚ã¾ã å­˜åœ¨ã—ã¾ã™ã€‚ã—ã‹ã—ãªãŒã‚‰å€‹äººçš„ã«ã¯ Kubernetes ã§ã®æŸ”è»Ÿãªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸åˆ©ç”¨ã«ã¯ã€ä»¥å‰ã®è¨˜äº‹ã§æŒ™ã’ãŸé€šã‚Šã¾ã ã¾ã èª²é¡ŒãŒã‚ã‚‹ã¨æ€ã£ã¦ãŠã‚Šã€ä»Šå¾Œã®ç™ºå±•ã‚’æœŸå¾…ã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚syucream.hatenablog.jp","link":"https://syucream.hatenablog.jp/entry/2018/12/04/004539","isoDate":"2018-12-03T15:45:39.000Z","dateMiliSeconds":1543851939000,"authorName":"syucream","authorId":"syucream"},{"title":"Kubernetes ä¸Šã§å‹•ä½œã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰å®‰å…¨ã« FUSE ã‚’åˆ©ç”¨ã—ãŸã‹ã£ãŸ","contentSnippet":"æœ¬é¡Œã®é€šã‚Šã®æ°—æŒã¡ãŒã‚ã£ãŸã®ã§ã™ãŒã€çµè«–ã¨ã—ã¦ã¯æ‰‹è»½ã«ã§ãã‚‹è‰¯ã„æ–¹æ³•ã¯ç„¡ã„ã‚ˆã†ã§ã—ãŸã€‚å‚™å¿˜éŒ²çš„ã«æŒ‘æˆ¦ã—ãŸäº‹ã‚’è¨˜éŒ²ã—ã¦ãŠãã¾ã™ã€‚èƒŒæ™¯: FUSE åˆ©ç”¨ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³è¨€ã†ã¾ã§ã‚‚ãªããƒ•ã‚¡ã‚¤ãƒ« I/O ã¯ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã«ãŠã„ã¦ã‚ˆãä½¿ã‚ã‚Œã‚‹æ©Ÿæ§‹ã§ã‚ã‚Šã€å¤šãã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«ãŠã„ã¦æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¾ãŸã¯ãã‚Œã«é¡ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ãƒ•ã‚¡ã‚¤ãƒ« I/O ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚ã•ã¦ Kubernetes ä¸Šã§ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè£…ã—ã¦ã„ãäº‹ãŒå¤šã€…ã‚ã‚‹ã“ã®ã”æ™‚ä¸–ã€å„ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã§å®Ÿè£…è¨€èªéä¾å­˜ã§ä½¿ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿æ›¸ãã®ãƒ­ã‚¸ãƒƒã‚¯ãŒã‚ã‚‹ã¨ã€ä¾‹ãˆã°ä½•ã‚‰ã‹ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å‹•çš„å—ã‘æ¸¡ã—ã‚„ãƒ­ã‚®ãƒ³ã‚°ã«ãŠã„ã¦ä¾¿åˆ©ãªå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã«ä¼¼ãŸèª²é¡Œã‚’æŠ±ãˆã¦è§£æ±ºã«å‘ã‹ã£ãŸãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨ã—ã¦ Envoy Proxy ãŒã‚ã‚‹ã‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚ã“ã‚Œã¯å…ƒã€…ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚„ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã®èª²é¡Œãªã©ã‚’å„è¨€èªã”ã¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å¯¾å¿œã—ã¦ã„ãŸã‚‚ã®ã®ã¤ã‚‰ããªã‚Šã€ HTTP ã‚„ gRPC ã‚’è§£é‡ˆã™ã‚‹ãƒ—ãƒ­ã‚­ã‚·ã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ç·©å’Œã«æˆåŠŸã—ã¦ã„ã¾ã™ã€‚å‰è¿°ã®é€šã‚Šãƒ•ã‚¡ã‚¤ãƒ« I/O ã¯ HTTP ã‚„ gRPC ã‚’ã—ã‚ƒã¹ã‚‹ã‚ˆã‚Šæ›´ã«ãƒªãƒ¼ã‚ºãƒŠãƒ–ãƒ«ãªå…±é€šãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã‚‚ã—ãã†ã§ã™ã€‚ã•ã‚‰ã« FUSE ã‚’ä½¿ãˆã°ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã¦ã€ã‹ã¤è£å´ã§è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’å‹•ã‹ã™ã“ã¨ã‚‚ã§ãã‚‹ã‚ˆã†ã«è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ãã‚“ãªã‚ã‘ã§ã€ Kubernetes ä¸Šã§å‹•ä½œã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã„ã„æ„Ÿã˜ã« FUSE ã§å®Ÿè£…ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒã‚¦ãƒ³ãƒˆã—ã¦åˆ©ç”¨ã§ãã‚‹ã¨è‰¯ã„ã‹ã‚‚ã¨ç€æƒ³ã—ãŸæ¬¡ç¬¬ã§ã™ã€‚FUSE åˆ©ç”¨ã®é™ç•ŒåŒã˜ã‚ˆã†ãªæ€è€ƒã‚’ã—ãŸã‚Šã€ã‚ã‚‹ã„ã¯æ—¢å­˜ FUSE è³‡ç”£ã‚’åˆ©ç”¨ã—ãŸã„äººãŸã¡ãŒå¤šã€…å±…ãŸã‚ˆã†ã§ã€ Kubernetes å…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã® Issue ã§ã‚‚è­°è«–ãŒã•ã‚Œã¦ã„ãŸã‚Šã—ã¾ã™ã€‚github.comæ®‹å¿µãªãŒã‚‰ã“ã® 2015 å¹´ã« open ã—ãŸ issue ã¯ 2018 å¹´ã‚‚çµ‚ã‚ã‚Šã‚’è¿ãˆã‚‹ä»Šæ—¥ã«ãŠã„ã¦ã‚‚ close ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã©ã†ã„ã†ç‚¹ãŒãƒãƒƒã‚¯ã«ãªã‚‹ã‹ã¨ã„ã†ã¨/dev/fuse ã‚’ open ã™ã‚‹ã®ã«ç‰¹æ¨©ãŒå¿…è¦mount, umount ã™ã‚‹ã®ã« SYS_ADMIN ã‚±ãƒ¼ãƒ‘ãƒ“ãƒªãƒ†ã‚£ãŒå¿…è¦ãŒæŒ™ã’ã‚‰ã‚Œã€ä¸€å¿œåˆ©ç”¨ã§ããªãã¯ç„¡ã„ã‚‚ã®ã®åˆ©ç”¨æ¡ä»¶ã‚’æº€ãŸã™ãŸã‚ç¾çŠ¶ã¯ privileged mode ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã™ç¾½ç›®ã«ãªã‚Šã€ã‚„ã‚„å®‰å…¨é¢ã§ãƒªã‚¹ã‚¯ãŒã‚ã‚‹ã‚ˆã†ã«æ€ãˆã¾ã™ã€‚FUSE åˆ©ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã„ãã¤ã‹å‰è¿°ã® Issue ã®ä¸­ã§å¹¾ã¤ã‹ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚‚æç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚å°‘ã—ã“ã‚Œã‚‰ã‚’å®Ÿéš›ã«è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚å¤šå°‘ã“ã®ãƒªã‚¹ã‚¯ã‚’ç·©å’Œã™ã‚‹ãŸã‚ã€å¤§ããåˆ†ã‘ã¦ä»¥ä¸‹ã®æ–¹é‡ãŒã‚ã‚Šãã†ã§ã™ã€‚ã‚³ãƒ³ãƒ†ãƒŠå¤–ã§ãªã‚“ã¨ã‹ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ç‰¹æ¨©ã‚’æŒã¤ã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ä½œã•ã›ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã¨åˆ†é›¢ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³å‰è€…ã¯å ´åˆã«ã‚ˆã£ã¦ã¯å¯æ¬æ€§ã‚’æãªã†ã‹å°å…¥ãŒéå¸¸ã«å›°é›£ã«ãªã‚‹æã‚ŒãŒã‚ã‚Šã€ã¾ãŸå¾Œè€…ã§ã‚ã‚Œã°ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ä¸–ç•Œã§å®Œçµã•ã›ã‚‹ã“ã¨ãŒã§ããã†ã§ã™ã€‚å¾“ã£ã¦ã¾ãšã¯å¾Œè€…ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã«æ¤œè¨¼ç”¨ã«ç”¨æ„ã—ãŸ Dockerfile ã‚„è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ã¾ã—ãŸã€‚FUSE ã§ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã®ã¯ libfuse ã«å«ã¾ã‚Œã‚‹ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ read ã™ã‚‹ã¨ \"Hello, World!\" ã‚’è¿”ã™ hello.c ã‚’åˆ©ç”¨ã—ã¦ãŠãã¾ã™ã€‚github.comã“ã¡ã‚‰ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã¯ initContainers ã§ mount ã™ã‚‹ã®ã¨ã€ postStart , preStop ã§ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠã§ mount/umount ã™ã‚‹æ¡ˆã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚ãŒã€çµå±€ãƒã‚¦ãƒ³ãƒˆå…ˆã‚’å‚ç…§ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã¯ãƒã‚¦ãƒ³ãƒˆã—ãŸå…ˆã¯å‚ç…§ã§ããªããªã‚Šã¾ã™ã€‚çµå±€ã“ã®ä¾‹ã ã¨ç‰¹æ¨©ã‚’æ¸¡ã•ã–ã‚‹ã‚’å¾—ã¾ã›ã‚“ã§ã—ãŸã€‚æ¬¡ã®ä¸€æ‰‹ã®ã‚¢ã‚¤ãƒ‡ã‚¢ä»Šå›ç‰¹æ¨©ã‚’è¦æ±‚ã•ã‚ŒãŸã®ãŒã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã‹ã‚‰ /dev/fuse ãŒ open ã§ããªã„ç‚¹ãªã®ã§ã€ã“ã®ç‚¹ã‚’ä½•ã¨ã‹ã§ãã‚Œã° å¤šå°‘èª²é¡Œã¯ç·©å’Œã•ã‚Œã‚‹ã‹ã‚‚ã§ã™ã€‚Kubernetes ã¯ Device Plugin ã¨ã„ã†æ©Ÿæ§‹ã‚’æœ€è¿‘ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‚ˆã†ã§ã€ã“ã‚Œã§ä½•ã¨ã‹ã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‚ˆã†ãªå…¨ãç„¡ã„ã‚ˆã†ãªæ°—ãŒã—ã¦ã„ã¾ã™ã€‚ã¾ãŸ Kubernetes v1.10 ã‹ã‚‰ãƒ™ãƒ¼ã‚¿ã«ãªã£ãŸã¨ã„ã†ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ¥ç¶šã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ CSI ã¯å°†æ¥ã‚‚è¦‹æ®ãˆã¦ã“ã®å•é¡Œã«å–ã‚Šçµ„ã‚€ã®ã«ã€ã‚‚ã—ã‹ã—ãŸã‚‰è‰¯ã„æ©Ÿæ§‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã„ãšã‚Œã«ã›ã‚ˆ Kubernetes è‡ªä½“ã®èª¿æŸ»ã‚’ã»ã¨ã‚“ã©ã‚„ã£ã¦ã„ãªã„ã®ã§æ¬¡ã®ä¸€æ‰‹ã¯ã“ã‚Œã‚‰å‘¨è¾ºæŠ€è¡“ã®èª¿æŸ»ã‹ã‚‰ã‹ã¨è€ƒãˆã¦ãŠã‚Šã¾ã™ã€‚","link":"https://syucream.hatenablog.jp/entry/2018/11/05/011908","isoDate":"2018-11-04T16:19:08.000Z","dateMiliSeconds":1541348348000,"authorName":"syucream","authorId":"syucream"},{"title":"ISUCON8 ã«å‚åŠ ã—ã¦æœ€çµ‚æˆç¸¾ãŒæœ¬æˆ¦3ä½ã ã£ãŸ","contentSnippet":"ã‚¿ã‚¤ãƒˆãƒ«ã®ã¨ãŠã‚Šã§ã™ã€‚ä½•ã‚„ã‹ã‚“ã‚„ã‚ã‚Š ISUCON8 ã®äºˆé¸ã‚’ç„¡äº‹çªç ´ã—ãŸå¾Œã« 10/20(åœŸ) LINE ã•ã‚“ã®ã‚ªãƒ•ã‚£ã‚¹ã«ã¦æœ¬æˆ¦ã«å‚åŠ ã—ã¦ã€æœ€çµ‚æˆç¸¾ 3 ä½ã«åã¾ã‚Šã¾ã—ãŸã€‚3 ä½ã ã¨ç‰¹ã«è¡¨å½°ã•ã‚Œã‚‹ã‚ã‘ã§ã‚‚ãªãæ°—æŒã¡ã®ã¿ãªã®ã§ã™ãŒã€‚ãƒãƒ¼ãƒ æ§‹æˆã¨å½¹å‰²åˆ†æ‹…ã«ã¤ã„ã¦è·å ´ã®ã‚ˆã—ã¿ã§ cubicdaiya ã•ã‚“ã€  catatsuy ã•ã‚“ã¨ä½•ã‚‰ã‹ SRE ãƒãƒ¼ãƒ ã‚‰ã—ãé›°å›²æ°—ã‚’é†¸ã—å‡ºã—ãªãŒã‚‰å‚æˆ¦ã—ã¾ã—ãŸã€‚å¤§æ ã¨ã—ã¦ã¯ä»¥ä¸‹ã®å½¹å‰²åˆ†æ‹…ã‚’çµ„ã‚“ã§ã„ã¾ã—ãŸã€‚ã‚¤ãƒ³ãƒ•ãƒ©æ‹…å½“cubicdaiyaã‚¢ãƒ—ãƒªæ‹…å½“catatsuysyucreamå…¨ä½“ãƒãƒ¼ãƒ æ§‹æˆã‚„ãƒ„ãƒ¼ãƒ«ãƒ»ç’°å¢ƒæ§‹ç¯‰ãŠè†³ç«‹ã¦ã¯ catatsuy ã•ã‚“ãŒã„ã„æ„Ÿã˜ã«ã‚„ã£ã¦ãã‚Œã¦ã„ã¾ã—ãŸã€‚äºˆé¸ã«ã¤ã„ã¦æœ¬è¨˜äº‹åŸ·ç­†ã«ã‚ãŸã‚Šäºˆé¸å®Ÿæ–½æ—¥ã¨æœŸé–“ãŒç©ºã„ã¦ã€ã»ã¼ã™ã¹ã¦ã®è¨˜æ†¶ã‚’æå¤±ã—ã¾ã—ãŸã€‚æ§˜å­ã¯ãŸã¶ã‚“ catatsuy ã•ã‚“ã®ä»¥ä¸‹è¨˜äº‹ã«ã‚ã‚‹æ°—ãŒã—ã¾ã™ã€‚medium.comæœ¬æˆ¦ã«ã¤ã„ã¦ã ã„ãŸã„å‡ºé¡Œã•ã‚ŒãŸèª²é¡Œã®è¦ç‚¹ã¯ä»¥ä¸‹è¨˜äº‹ã§èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚isucon.net3 ä½ã«å…¥è³ã§ããŸæ±ºã‚ã¦ã¯çªå‡ºã—ãŸã‚³ãƒ¬ã¨ã„ã†ç‚¹ã¯ç„¡ãã€ãƒãƒ¼ãƒ ã§ãã‚Œãã‚Œè²¢çŒ®ã§ããŸã€ãƒãƒ©ãƒ³ã‚¹çš„ã«ã¯è‰¯ã„å¡©æ¢…ãªã®ã§ã¯ã¨æ„Ÿã˜ã¾ã—ãŸã€‚å…·ä½“çš„ãªã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¨ã—ã¦ã¯è¦šãˆã¦ã„ã‚‹é™ã‚Šä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚å‰åŠ: å¥½èª¿ãªæ»‘ã‚Šå‡ºã—ã¨ã‚Šã‚ãˆãšå„ã€…åˆæœŸæº–å‚™ã‚’ã™ã‚‹è‡ªåˆ†ã¯ã“ã“ã§ã¯ DB ã‚¹ã‚­ãƒ¼ãƒã‚’å–ã‚Šå‡ºã—ã¦å…±æœ‰ã—ãŸã‚Š WebUI èª¿ã¹ãŸã‚Šcatatsuy ã•ã‚“ãŒæ—©æœŸã«ãƒ­ã‚°åˆ†æAPIã®å©ãæ–¹å•é¡Œã«æ°—ã¥ãç€æƒ³ã¨ã—ã¦ã¯rate limitã¨ã‹ã‚ˆã‚Šé‡è¦ãªãƒ‘ã‚¹ã§I/Oã—ã¦ã„ãã†ãªã“ã¨ãŒã‚„ã°ãã†11 æ™‚å°ã«è­°è«–ã—ã¦ã€ãƒãƒã‚Šãã†ã ã‹ã‚‰æ‰‹ã‚’æ‰“ã¨ã†ã¨çµè«–ã¥ã‘ã¦ catatsuy ã•ã‚“ãŒç€æ‰‹ã—ã ã™syucream ãŒ LIMIT 1 å•é¡Œã«æ°—ã¥ãæœ€åˆã¯ã‚µãƒ–ã‚¯ã‚¨ãƒªæ›¸ãæ„Ÿã˜ã§æ”¹å–„ã—ãŸãŒ LIMIT 1 ã™ã‚‹ã®ã¨èª²é¡Œçš„ã«å·®åˆ†ãŒãã‚Œã»ã©ãªã‹ã£ãŸã“ã“ã§ä¸€æ™‚çš„ã« 5000 ç‚¹ã»ã©ã‚¹ã‚³ã‚¢ã‚’å©ãå‡ºã—ãƒˆãƒƒãƒ—ã«èºã‚Šå‡ºã‚‹æ™‚é–“è»¸ãŒå…¥ã‚Œæ›¿ã‚ã‚‹ãŒã€ã“ã®æ”¹å–„ã®å®Ÿæ–½ç›´å‰ã« cubicdaiya ã•ã‚“ãŒ slow query ã‚’å‡ºã—ã¦ãã‚Œã¦ã„ã¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®è£ä»˜ã‘ã‚‚ã—ãŸä¸Šã§å®Ÿæ–½ã—ãŸcubicdaiya ã•ã‚“ãŒã‚¤ãƒ³ãƒ•ãƒ©å‘¨ã‚Šã€ç‰¹ã« nginx å‘¨è¾ºã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å¾ã€…ã«ã™ã‚‹å†—é•·ãã†ãªã‚³ãƒ³ãƒ†ãƒŠåŒ–ã‚’ã‚„ã‚ã‚‹é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ nginx ã§é…ä¿¡ä¸­ç›¤: æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ã¸ã®åˆ°é”ã¨ã®è‘›è—¤ä¼šå ´æä¾›ã§ãƒ©ãƒ³ãƒã¨ã—ã¦å¼å½“ãŒå‡ºã‚‹AbemaTV ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã§é¯–ã®æ¼ç²é‡ãŒæ¸›ã£ã¦å€¤æ®µãŒè‹¥å¹²ä¸ŠãŒã£ãŸè©±ã‚’æ€ã„å‡ºã—ã€åƒ•ã¯æ€ã‚ãšé¯–å‘³å™Œç…®å¼å½“ã‚’ç¢ºä¿catatsuy ã•ã‚“ã®ãƒ­ã‚°ã®é›†ç´„é€ä¿¡ãŒå‹•ãå‡ºã™send_bulk API ã®åˆ©ç”¨ãŒã†ã¾ãã„ã‹ãšã€æ™‚é–“ã‚‚ã‚‚ã£ãŸã„ãªã„ã®ã§ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã—ã¦ send ã™ã‚‹ã ã‘ã«ã¨ã©ã‚ãŸã‚Šã“ã®ç¬é–“ã¯ã‚¹ã‚³ã‚¢ã«éŸ¿ã‹ãªã‹ã£ãŸãŒã€å¾Œã€…ãƒœãƒ‡ã‚£ãƒ–ãƒ­ãƒ¼ã®ã‚ˆã†ã«åŠ¹ã„ã¦ããŸæ„Ÿã˜ãŒã‚ã‚‹syucream ãŒåœ°å‘³ã«ç„¡é§„ãã†ãª user table ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãƒ­ãƒƒã‚¯ã‚’å¤–ã™slow query ã§ã¯ã‚ã£ãŸãŒã€å…¨ãã‚¹ã‚³ã‚¢ã«éŸ¿ã‹ãªã‹ã£ãŸcubicdaiya ã•ã‚“ãŒãã‚ãã‚ã„ã„ã§ã—ã‚‡ã¨è‰¯ã„ SNS share æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹syucream ãŒé›‘ã«ãƒ­ã‚¦ã‚½ã‚¯è¶³ãƒãƒ£ãƒ¼ãƒˆã®ã‚ªãƒ³ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å…¥ã‚Œã‚‹ãƒãƒ¼ã‚¸ã—ãŸå¾Œã«ã€ä¸€åº¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã™ã‚‹ã¨åˆ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«å¯¾ã—ã¦ã®ã‚¯ã‚¨ãƒªã«ã‚‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆã—ã¦ã—ã¾ã†ãƒã‚°ã«æ°—ã¥ããŒã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚«ãŒæ–‡å¥ã‚’è¨€ã‚ãªã‹ã£ãŸï¼ä¸€ç¬ãƒãƒ¼ãƒ ã§ç›¸è«‡ã—ã¦ã€å•é¡ŒãŒå‡ºã¦ãªã„ãªã‚‰å¾Œã§è€ƒãˆã‚ˆã†ã¨çµè«–ã¥ã‘ã‚‹cubicdaiya ã•ã‚“ãŒè¤‡æ•°å°æ§‹æˆã‚’è€ƒãˆå§‹ã‚ã‚‹ç‰¹ã«ç•°è«–ç„¡ãã€ 1: DB, 2: App, 1: nginx ã¨ã„ã†æ„æ€æ±ºå®šãŒå³ãªã•ã‚Œã‚‹å¾ŒåŠ: ç€çœ¼ç‚¹ã¯æ‚ªããªã‹ã£ãŸãŒã‚‚ã†ä¸€æ­©ã ã£ãŸã‹catatsuy & syucream ã§ orders & trade ã®èª²é¡Œã«ã¤ã„ã¦è€ƒãˆå‡ºã™ã‹ãªã‚ŠçœŸé¢ç›®ã«å·¨å¤§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’å¼•ãå‰¥ãŒã™ã¨ã‹æ¤œè¨ã—ãŸãŒã€ã„ã¾ã„ã¡é³´ã‹ãšé£›ã°ãšãã®è£ã§ cubicdaiya ã•ã‚“ãŒ App ã‚µãƒ¼ãƒã‚’ 2 å°æ§‹æˆã«ã—ã¦ã„ãŸã“ã®ã‚ãŸã‚Šï¼Ÿã§ã‚¹ã‚³ã‚¢ãŒ 10000 è¿‘ãã«åˆ°é”catatsuy ã•ã‚“ãŒãƒŸã‚¯ãƒ­ãªæœ€é©åŒ–ã—ãŸã‚Šã€ syucream ãŒéŠ€è¡Œ API ã‚¢ã‚¯ã‚»ã‚¹ã‚’ä¸¦åˆ—åŒ–ã—ãŸã‚Š N+1 ã‚’ç„¡ããã†ã¨ã—ã¦çˆ†æ­»ã—ãŸã‚Šãã®è£ã§ cubicdaiya ã•ã‚“ãŒ 4 å°ãƒ•ãƒ«ã«ä½¿ã„åˆ‡ã‚‹æ§‹æˆã¸ã®ç§»è¡Œã‚’è¿½ãˆã¦ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã«å…¥ã£ãŸã‚ŠDB ã®è² è·ã‚’ã•ã’ãŸãã¦ ORDER BY ã‚’ä½¿ã†ã‚¯ã‚¨ãƒªã‚’ Go ã®ã‚¢ãƒ—ãƒªãƒ¬ãƒ™ãƒ«ã«ç§»æ¤ã—ã¦æ™‚é–“ãŒãŸã‚Šãªã‹ã£ãŸã‚Šä¸€éƒ¨ã•ã°ã‘ãªã„è² è·ã«å¯¾ã—ã¦ cubicdaiya ã•ã‚“ãŒ async sleep å…¥ã‚ŒãŸã‚Šsyucream ã¯ã“ã‚ŒãŒå¤§ããªå·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆã ã£ãŸæ°—ãŒã—ã¦ã„ã‚‹ãã†ã“ã†ã—ã¦ã„ã‚‹é–“ã« 17:50 é ƒã«ãªã£ã¦åæŸã•ã›ã¦çµ‚äº†'ã‚‚ã†ä¸€æ­©' ã«å¯¾ã™ã‚‹æ‰€æ„Ÿç€çœ¼ç‚¹ã¯éå¸¸ã«è‰¯ãã¦ã€ PARTITION ã«å¯¾ã™ã‚‹ç–‘æƒ‘ã‚„ POST /orders ã€ RunTrade() æœ€é©åŒ–ã¯èª²é¡Œã«æ„Ÿã˜ã¦ã„ã¦ä¸€éƒ¨å–ã‚Šçµ„ã‚“ã§ã„ã¾ã—ãŸã‚ã‚‰ã‹ã˜ã‚é…å¸ƒã•ã‚ŒãŸ spec ã‚’èª­ã¿è¾¼ã‚“ã ã‚Šã€å¤–éƒ¨ API ã«å¯¾ã—ã¦å‘ã‘ã‚‹ç–‘æƒ‘ãŒã‚‚ã£ã¨ã‚ã£ã¦ã‚‚è‰¯ã‹ã£ãŸã‹ã‚‚çµè«–: ISUCON ã¯ã„ã„ãä»Šå›ã®å‡ºé¡Œã®å¤–éƒ¨ API ãŒçµ¡ã‚€è©±ã¯å€‹äººçš„ã«ã‚ˆãç·´ã‚‰ã‚Œã¦ã„ã¦ã€å€‹äººçš„ã«éå¸¸ã«å¥½ã¾ã—ã„è©±ã§ã—ãŸã€‚ãªãœãªã‚‰ã“ã†ã„ã†å¤–éƒ¨APIã¨ãã®æŒ™å‹•ã®å·®ç•°ã¯ç¾å®Ÿå•é¡Œã«èµ·ã“ã‚Šã†ã‚Šãã†ãªè©±ã ã‹ã‚‰ã§ã™ã€‚ãã†ã„ã†è¦³ç‚¹ã‹ã‚‰è¨€ã†ã¨ã€å­¦ç”Ÿãƒãƒ¼ãƒ ãŒå„ªå‹ã—ãŸã¨ã„ã†å±•é–‹ã¯ã¨ã¦ã‚‚èˆˆå‘³æ·±ã„ã‚ˆã†ã«ã‚‚æ€ãˆã¾ã™ã€‚å€‹äººçš„èª²é¡Œã¨ã—ã¦ã€è‡ªåˆ†ãŒå½“æ—¥è¦‹ã¦ã„ãŸç®‡æ‰€ã§è¦‹ã©ã“ã‚ã¯èª¤ã£ã¦ã„ãªã„ã‘ã©ä¸€æ­©è¶³ã‚Šãªã‹ã£ãŸã“ã¨ãŒæŒ™ã’ã‚‰ã‚Œã€ç‹‚ãŠã—ã„ã»ã©æ‚”ã—ã„ã§ã™ã€‚ã‚‚ã—æ¬¡å›å‚åŠ ã—ã¦åŒã˜ãƒ¡ãƒ³ãƒãƒ¼ã§ãƒãƒ¼ãƒ ã‚’çµ„ã‚€ã®ãªã‚‰ã€ catatsuy ã•ã‚“ãŒå„ªå‹ã™ã‚‹ã®ã«ä¸¦ã€…ãªã‚‰ã¬ç†±æ„ã‚’æŠ±ã„ã¦ã„ã‚‹ã®ã§ãŸã¶ã‚“åƒ•ã‚‰ãŒå„ªå‹ã™ã‚‹ã§ã—ã‚‡ã†ã€‚","link":"https://syucream.hatenablog.jp/entry/2018/10/25/030930","isoDate":"2018-10-24T18:09:30.000Z","dateMiliSeconds":1540404570000,"authorName":"syucream","authorId":"syucream"},{"title":"POSIX message queue ã‚’ Go ã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª posix_mq ã‚’ä½œã£ãŸ","contentSnippet":"è¡¨é¡Œã®é€šã‚Šã§ã™ã€‚github.comcgo ã‚’ä½¿ã£ã¦ POSIX message queue ã®åŸºæœ¬çš„ãªæ“ä½œã€ open/close ã¨ send/receive ã¨ãã®ä»–ç´°ã€…ã¨ã—ãŸæ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ã¨ã¯è¨€ã£ã¦ã‚‚ã€ãã‚Œã»ã©è¤‡é›‘ãªã“ã¨ã¯ã—ã¦ãŠã‚‰ãšã€ POSIX ã®é–¢æ•°å‘¼ã³å‡ºã—ã‚’æ„šç›´ã« Go ã® func ã«ãƒ©ãƒƒãƒ—ã—ã¦ã„ã‚‹ã ã‘ãªã®ã§ã™ã‘ã©ã­ã€‚ãªãœã‚„ã£ãŸã®ã‹å…¥é–€ Kubernetes ãªã©ã‚’èª­ã‚€ã¨ã€ Pod å†…ã®ã‚³ãƒ³ãƒ†ãƒŠåŒå£«ã§ã¯ SysV / POSIX ã® IPC namespace ã‚’å…±æœ‰ã—ã¦ã„ã‚‹è¨˜è¿°ãŒã‚ã‚Šã¾ã™ã€‚www.oreilly.co.jpPod å†…ã®åˆ¥ã‚³ãƒ³ãƒ†ãƒŠã¸ã®é€šä¿¡ã¨ãªã‚‹ã¨ã€ sidecar ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ Envoy ã‚’å‹•ã‹ã™ã‚ˆã†ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ç”¨ãƒ—ãƒ­ã‚­ã‚·ã‚’ä»‹ã™ã‚‹ã®ã«åˆ©ç”¨ã—ãŸã‚Š fluentd ãªã©ã®ãƒ­ã‚®ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ãƒ­ã‚°ã‚’é€ã£ãŸã‚Šã€ãŠæ±ºã¾ã‚Šã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã†ã„ã£ãŸéš›ã«ä½ã‚³ã‚¹ãƒˆã§éè¨€èªä¾å­˜ãªãƒ—ãƒ­ãƒˆã‚³ãƒ«ãŒæ¬²ã—ããªã‚‹ã“ã¨ãŒå¤šã€…ã‚ã‚‹ã‚ˆã†ã«è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚POSIX message queue ã¯ POSIX ã¨ã—ã¦ã®ä»•æ§˜ã‚‚å­˜åœ¨ã—ã€ä½ã‚³ã‚¹ãƒˆãª IPC æ‰‹æ®µã®ã²ã¨ã¤ã§ã™ã€‚ã“ã‚Œã‚’é¸æŠè‚¢ã®ã²ã¨ã¤ã¨ã—ã¦ç”¨æ„ã—ã¦ãŠãã“ã¨ã¯ç™ºç”Ÿã™ã‚‹èª²é¡Œã«æŸ”è»Ÿã«å¯¾å¿œã™ã‚‹ã®ã«é‡è¦ã§ã‚ã‚‹ã¨è€ƒãˆã¾ã™ã€‚æ‰‹æ®µã¯ä»–ã«ã‚‚ã‚ã‚‹ã—ã€åŒæ§˜ã®æ©Ÿèƒ½ã§ã‚ã‚Œã° SySV message queue ã‚„ã„ã£ã AMQP ãªã©ã‚’ã—ã‚ƒã¹ã£ã¦ã‚‚è‰¯ã„æ°—ã‚‚ã™ã‚‹ã®ã§ã™ãŒã€æ‰‹æ®µã‚’å¢—ã‚„ã™æ„å‘³ã§ã‚‚ä»Šå›ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é–‹ç™ºã—ã¦ã¿ãŸæ¬¡ç¬¬ã§ã™ã€‚å‹•ä½œä¾‹sender / receiver ã®é€šä¿¡ä¾‹ã‚·ãƒ³ãƒ—ãƒ«ãªsender ã¨ receiver ã§ã‚ã‚Œã°ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§å®Ÿè£…ã—ã¦ã‚„ã‚Šå–ã‚Šã§ãã¾ã™ã€‚sender.gopackage mainimport (    \"fmt\"    \"log\"    \"time\"    \"github.com/syucream/posix_mq/src/posix_mq\")const maxTickNum = 10func main() {    oflag := posix_mq.O_WRONLY | posix_mq.O_CREAT    mq, err := posix_mq.NewMessageQueue(\"/posix_mq_example\", oflag, 0666, nil)    if err != nil {        log.Fatal(err)    }    defer mq.Close()    count := 0    for {        count++        mq.Send([]byte(fmt.Sprintf(\"Hello, World : %d\\n\", count)), 0)        fmt.Println(\"Sent a new message\")        if count >= maxTickNum {            break        }        time.Sleep(1 * time.Second)    }}receiver.gopackage mainimport (    \"fmt\"    \"log\"    \"github.com/syucream/posix_mq/src/posix_mq\")const maxTickNum = 10func main() {    oflag := posix_mq.O_RDONLY    mq, err := posix_mq.NewMessageQueue(\"/posix_mq_example\", oflag, 0666, nil)    if err != nil {        log.Fatal(err)    }    defer mq.Close()    fmt.Println(\"Start receiving messages\")    count := 0    for {        count++        msg, _, err := mq.Receive()        if err != nil {            log.Fatal(err)        }        fmt.Printf(string(msg))        if count >= maxTickNum {            break        }    }}Kubernetes ã®åŒä¸€ Pod ä¸Š container é€šä¿¡ä¾‹æŠ˜è§’ãªã®ã§ä¸Šè¨˜ã® sender / receiver ã‚’ Kubernetes ã® Pod ã«æŠ¼ã—è¾¼ã‚“ã§é€šä¿¡ã•ã›ã¦ã¿ã¾ã™ã€‚ã‚ã‚‰ã‹ã˜ã‚ã¦ãã¨ã†ã« sender / receiver ç”¨ã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã£ã¦ãŠã„ã¦ãã ã•ã„ã€‚Pod ã®å®šç¾©ãªã®ã§ã™ãŒã€æ„šç›´ã« container ã®è¨­å®šã‚’ç¾…åˆ—ã—ã¦ã„ãã ã‘ã§ã™ã€‚IPC namespace ã¯å‹æ‰‹ã«å…±æœ‰ã•ã‚Œã‚‹ã®ã§ãã‚Œã«é–¢ã™ã‚‹è¨­å®šã‚„æº–å‚™ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚apiVersion: v1kind: Podmetadata:  name: posixmq-podspec:  containers:    - name: posixmq-sender      image: \"posix_mq_sender\"      imagePullPolicy: IfNotPresent    - name: posixmq-receiver      image: \"posix_mq_receiver\"      imagePullPolicy: IfNotPresent  restartPolicy: NeverPod ã®å‹•ä½œç¢ºèªã‚’ã•ãã£ã¨ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚$ kubectl apply -f example/kubernetes/pod-posixmq.yamlpod \"posixmq-pod\" created...$ kubectl logs posixmq-pod -c posixmq-sendergo run example/exec/sender.goSent a new messageSent a new messageSent a new messageSent a new messageSent a new messageSent a new messageSent a new messageSent a new messageSent a new messageSent a new message$ kubectl logs posixmq-pod -c posixmq-receivergo run example/exec/receiver.goStart receiving messagesHello, World : 1Hello, World : 2Hello, World : 3Hello, World : 4Hello, World : 5Hello, World : 6Hello, World : 7Hello, World : 8Hello, World : 9Hello, World : 10ã“ã®å‡ºåŠ›çµæœã‚’è¦‹ã‚‹ã«ã€ sender ã®é€ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã¡ã‚ƒã‚“ã¨ receiver ã«å±Šã„ã¦ã„ãã†ã§ã™ï¼ä½™è«‡POSIX ã®æ©Ÿèƒ½ã¨ãªã‚‹ã¨å¯æ¬æ€§ã‚’æœŸå¾…ã—ã¦ã—ã¾ã„ã¾ã™ãŒã€ POSIX message queue ã¯ darwin ã‚„ windows ã§ã¯å®Ÿè£…ã•ã‚Œã¦ã„ãªã‹ã£ãŸã‚Šã¨æ„å¤–ã«å¯æ¬æ€§ã«æ¬ ã‘ã¾ã™ã€‚å¯¾ã—ã¦ SysV ã® message queue ã¯ã“ã‚Œã«æ¯”ã¹ã¦å¯æ¬æ€§ãŒé«˜ãã€ã‚ˆã‚Šå¤šãã®ç’°å¢ƒã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚ï¼ˆã“ã®ã‚ãŸã‚Šã¯ Linuxãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ ã«ã‚‚è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã­ï¼ï¼‰www.oreilly.co.jpã¨ã¯è¨€ã£ã¦ã‚‚æœ¬è¨˜äº‹ã§æ›¸ãã‚ˆã†ã«ã‚ã‚‰ã‹ã˜ã‚ç’°å¢ƒãŒå®šã‚ã‚‰ã‚Œã¦ã„ã‚‹ Kubernetes ã‚¯ãƒ©ã‚¹ã‚¿ä¸Šã§å‹•ã‹ã™å ´åˆã¯ã€ãã‚Œã»ã©æ°—ã«ã™ã‚‹ã“ã¨ã§ã‚‚ç„¡ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã¾ãŸã€ SysV message queue ã® Go ãƒ©ãƒƒãƒ‘ãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ Shopify ã«ã‚ˆã‚Šå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã®ã§ã“ã‚Œã‚’è©¦ã™ã®ã‚‚ã‚¢ãƒªã‹ã‚‚ã§ã™ã€‚github.comã¡ãªã¿ã«å°‘ã—å‰ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å†…å®¹ã§ã™ãŒã€ POSIX message queue ã¯ IPC ã®æ‰‹æ®µã¨ã—ã¦çµæ§‹é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã§ã‚ã‚‹ã‚ˆã†ãªèª¿æŸ»çµæœã‚‚ã‚ã‚Šã¾ã™ã€‚www.programering.com","link":"https://syucream.hatenablog.jp/entry/2018/10/15/001313","isoDate":"2018-10-14T15:13:13.000Z","dateMiliSeconds":1539529993000,"authorName":"syucream","authorId":"syucream"},{"title":"æŠ€è¡“æ›¸å…¸5ã«ã¦ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã¨Envoyã€æš—å·é€šè²¨ã«ã¤ã„ã¦ã®è–„ã„æœ¬ã‚’é…å¸ƒã—ã¾ã™","contentSnippet":"æ˜æ—¥ 10/08 (æœˆ) ã¯æŠ€è¡“æ›¸å…¸5 ã®æ—¥ã§ã™ã­ï¼techbookfest.orgå½“ã‚µãƒ¼ã‚¯ãƒ«ã€Œã¾ã„ã«ã¡ãŒãã‚“ã‚ˆã†ã³ã€‚ã€ã‚‚ã‚µãƒ¼ã‚¯ãƒ«å‚åŠ ã—ã¦ã€æ–°åˆŠã‚’é…å¸ƒã™ã‚‹äºˆå®šã§ã™ï¼ï¼ˆæ—¢åˆŠã®é…å¸ƒäºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰techbookfest.orgå†…å®¹ã¨ã—ã¦ã¯ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã¨ Envoy Proxy ã‚’è©¦ã—ã¦ã¿ãŸçµæœã‹ã‚‰ã®ç´¹ä»‹è¨˜äº‹ã‚’ãƒ¡ã‚¤ãƒ³ã«ã€å‰å›è¨˜äº‹åŸ·ç­†è€…ã«ã‚ˆã‚‹ bitcoin ã®ä»•æ§˜ã®é—‡ã®è¨˜äº‹ã‚’ä»˜éŒ²ã«æ·»ãˆãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã«ãªã‚Šã¾ã™ï¼ˆç›®æ¬¡ã‹ã‚‰æŠœç²‹ï¼‰ç¬¬1ç« ã€€Envoy Proxy å…¥é–€1.1ã€€ã¯ã˜ã‚ã«1.2ã€€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦1.2.1 ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£1.2.2 ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£1.3ã€€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã€ãã—ã¦ Envoy ã¨ Istio1.3.1 Envoy ã¨ã¯1.3.2 Istio ã¨ã¯1.4ã€€Envoy è©³è§£1.4.1 Envoy ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦1.4.2 Envoy ã®ãƒªã‚½ãƒ¼ã‚¹æŠ½è±¡åŒ–1.4.3 Envoy ã®ç‰¹å¾´çš„ãªæ©Ÿèƒ½èª¬æ˜1.4.4 nginx ãªã©å¾“æ¥ã®ãƒ—ãƒ­ã‚­ã‚·ã¨ä½•ãŒé•ã†ã®ã‹ã«ã¤ã„ã¦1.5ã€€Envoy ã®è©¦ã—æ–¹1.5.1 Docker image ã‚’ã¨ã‚Šã‚ãˆãšå‹•ã‹ã™1.5.2 è¤‡é›‘ãªæ§‹æˆã‚’è©¦ã—ã¦ã¿ã‚‹1.6ã€€ãŠã¾ã‘1.6.1 Istio ã«ãŠã‘ã‚‹ Envoy ã®çµ„ã¿è¾¼ã¾ã‚Œæ–¹1.6.2 Envoy ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ†ã‚£ãƒ³ã‚°1.7ã€€ã¾ã¨ã‚ä»˜éŒ²Aã€€ç§ãŒæš—å·é€šè²¨ã‚’å«Œã„ã«ãªã£ãŸã‚ã‘A.1ã€€ã¯ã˜ã‚ã«A.2ã€€å‰æçŸ¥è­˜A.2.1 ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®æ§‹é€ ã¨æ‰€æœ‰æ¨©ã®ç§»è»¢å±¥æ­´A.2.2 TXID ã¨ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿A.2.3 ã‚³ã‚¤ãƒ³ãƒ™ãƒ¼ã‚¹ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¨ãƒã‚¤ãƒ‹ãƒ³ã‚°å ±é…¬A.2.4 ãƒãƒ¼ã‚¯ãƒ«ãƒ„ãƒªãƒ¼ã¨ãƒãƒ¼ã‚¯ãƒ«ãƒ«ãƒ¼ãƒˆA.2.5 ãƒã‚¤ãƒ‹ãƒ³ã‚°ã¨ NonceA.2.6 ã‚³ã‚¤ãƒ³ãƒ™ãƒ¼ã‚¹ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¨ã‚¨ã‚¯ã‚¹ãƒˆãƒ© NonceA.2.7 TXID ã®è¡çªç¢ºç‡ã¨é³©ãƒå·£åŸç†ã¨ãƒãƒ¼ã‚¹ãƒ‡ã‚¤ãƒ‘ãƒ©ãƒ‰ãƒƒã‚¯ã‚¹A.3ã€€TXID ã®è¡çªäº‹ä¾‹ã¨ BIP-30A.4ã€€BIP-30 ã‹ã‚‰ BIP-34 ã¸A.5ã€€BIP-34 ä»¥å‰ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¨ã®è¡çªå•é¡ŒA.6ã€€BIP-30,34 ã¨å„ç¨®ã‚¢ãƒ«ãƒˆã‚³ã‚¤ãƒ³A.7ã€€å®Ÿéš›ã®è¡çªç™ºç”Ÿç¢ºç‡A.8ã€€ãŠã‚ã‚Šã«ã‚ã¨ãŒããœã²ä¼šå ´ã§ãŠç›®ã«æ­¢ã¾ã‚‹ã‚ˆã†ã§ã‚ã‚Œã°ã€æ‰‹ã«ã¨ã£ã¦ã¿ã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ï¼ã¾ãŸå½“æ—¥ä¼šå ´ã«æ¥ãªã„ã€æ¥ã‚Œãªã„ã€ã‚ã‚‹ã„ã¯åƒ•ã«ã¨ã£ã¦ã¯é‹è‰¯ãå®Œå£²ã—ã¦ã—ã¾ã£ã¦è³¼å…¥ã§ããªããªã£ãŸã¨ã„ã†æ™‚ã®ãŸã‚ã« kindle ç‰ˆã‚‚ç”¨æ„ã—ã¦ãŠã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚åˆã‚ã›ã¦ã”æ¤œè¨ã„ãŸã ã‘ã‚Œã°å¹¸ã„ã§ã™ã€‚https://www.amazon.co.jp/dp/B07HYC1HLN","link":"https://syucream.hatenablog.jp/entry/2018/10/07/212525","isoDate":"2018-10-07T12:25:25.000Z","dateMiliSeconds":1538915125000,"authorName":"syucream","authorId":"syucream"},{"title":"Netflix ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’èª­ã¿è§£ããŸã„","contentSnippet":"Netflix ã¯ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç•Œã«ãŠã„ã¦ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã§æˆåŠŸä¾‹ã‚’ç©ã‚“ã§ã„ã‚‹ã€ã„ã‚ã°å¤§å…ˆè¼©ã ã¨æ€ã‚ã‚Œã¾ã™ã€‚å½¼ã‚‰ã¯æ•°å¤šãã®ã‚¤ãƒ™ãƒ³ãƒˆç™»å£‡ã‚„ techblog ã®è¨˜äº‹ã€ GitHub ä¸Šã«ã‚ˆã‚‹ OSS ã®å…¬é–‹ã‚’è¡Œã£ã¦ãŠã‚Šã€ãã‚Œã‚‰ã‹ã‚‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚„ãã®å¤‰é·ã‚’å£é–“è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ç­†è€…ãŒæœ€è¿‘æ‚©ã‚“ã§ã„ã‚‹ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å‰æã®ä¸–ç•Œã§ã®ãƒ­ã‚°åé›†åŸºç›¤ã«ãŠã„ã¦ã€ Netflix ã®æ§˜ã€…ãªäº‹ä¾‹ã‚’èª¿ã¹ãŸçµæœã‚’ã¤ã‚‰ã¤ã‚‰æ›¸ã„ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚ã‚ã‚‰ã‹ã˜ã‚æœ¬è¨˜äº‹ã¯æ­£ç¢ºæ€§ã‚’æ‹…ä¿ã—ã¦ãŠã‚‰ãšã€ã‚ãã¾ã§ç­†è€…å€‹äººãŒèª¿ã¹ã‚‹ã“ã¨ãŒã§ããŸç¯„å›²ã§ã®è¨˜è¿°ã«ç•™ã¾ã‚‹ã“ã¨ã‚’ãŠæ–­ã‚Šã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚Suro: åˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³2015 å¹´ãã‚‰ã„ã«ãƒ¡ãƒ³ãƒ†ãŒæ­¢ã¾ã£ã¦ã—ã¾ã£ãŸã®ã§ã™ãŒã€åˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ã†ãŸã† Suro ã¨ã„ã†ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãŒå­˜åœ¨ã—ã¾ã—ãŸã€‚Suro ã«é–¢ã—ã¦ã¯è§£èª¬è¨˜äº‹ã‚‚æ›¸ã‹ã‚Œã¦ã„ã¦ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ã‚’é›†ç´„ã—å¾Œç¶šã® S3 ã€ Kafka ã€ãã®ä»–ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã«è»¢é€ã™ã‚‹å½¹å‰²ã‚’æ‹…ã£ã¦ã„ãŸã‚ˆã†ã§ã™ã€‚ã¾ãŸãƒãƒƒãƒã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã€ä¸¡æ–¹ã®æ€§è³ªã‚’æŒã¤ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘ä»˜ã‘ã¦ã„ãŸã‚ˆã†ã§ã™ã€‚medium.comSuro ãŒãƒ¡ãƒ³ãƒ†ã•ã‚Œãªããªã£ãŸçµŒç·¯ã¯ç­†è€…ã‚‚ã‚ˆãåˆ†ã‹ã£ã¦ã„ã¾ã›ã‚“ãŒã€å¾Œç¶šã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ä»•çµ„ã¿ã‚’è¦‹ã‚‹ã«ãƒãƒƒãƒã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ä¸¡æ–¹ã®è¦æœ›ã«ç­”ãˆã‚‹ã®ãŒè¾›ã‹ã£ãŸã®ã‹ã€ã‚ã‚‹ã„ã¯ãƒ‡ãƒ¼ã‚¿ã®åˆ†æåŸºç›¤ã®å¤‰æ›´ã«åˆã‚ã›ã¦ä½œã‚Šç›´ã™æ±ºå®šã‚’ã—ãŸã‚‚ã®ã‹ã¨æ¨æ¸¬ã—ã¦ã„ã¾ã™ã€‚Cassandra ã®ãƒ‡ãƒ¼ã‚¿è»¢é€ã®ãƒãƒƒãƒãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ Ursula ã«ã‚ˆã‚‹ã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ¬ã‚¤ãƒ¤ãƒ¼Suro ã¨å…¥ã‚Œæ›¿ãˆã‚‹å½¢ã‹ã©ã†ãã†ã§ãªã„ã‹ã¯å®šã‹ã§ç„¡ã„ã§ã™ãŒã€ä»¥ä¸‹ã®è³‡æ–™ã«ã‚ˆã‚‹ã¨ Lambda Architecture ã«ä¼¼ãŸãƒãƒƒãƒãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®åˆ†é›¢ã‚’è¡Œã£ã¦ã„ã‚‹ã®ãŒè¦‹ã¦å–ã‚Œã¾ã™ã€‚https://qconsf.com/sf2016/system/files/presentation-slides/netflix-cloud_analytics.pdfãƒãƒƒãƒãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã¯ã€ Netflix ã§åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹ Cassandra ã‚’ãƒ™ãƒ¼ã‚¹ã« SSTable ã‚’ãƒ€ãƒ³ãƒ—ã—ã¦ã€ãã‚Œã‚’ aegisthus ã¨ã„ã† Cassandra å‘ã‘ãƒãƒ«ã‚¯ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ä½¿ã£ã¦ã€ Netflix ãŒãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã«ä½¿ã£ã¦ã„ã‚‹ S3 ã«è»¢é€ã—ã¦ã„ãŸã‚ˆã†ã§ã™ã€‚ã¾ãŸ SSTable ã®ãƒ€ãƒ³ãƒ—ã¯ä¸Šè¨˜è³‡æ–™ã§ã¯æ˜ç¤ºã•ã‚Œã¦ã„ãªã„ã®ã§ã™ãŒã€ Priam ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ãŒå…¬é–‹ã•ã‚Œã¦ãŠã‚Šã“ã‚Œã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ¨æ¸¬ã—ã¦ã„ã¾ã™ã€‚ã¡ãªã¿ã«ã“ã® aegisthus ã‚‚ã€ 2017 å¹´ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ã«ç§»è¡Œã—ä»Šã§ã¯ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚æœ€å¾Œã®ã‚³ãƒŸãƒƒãƒˆã«å¯¾ã—ã¦ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆ ã‚’è¦‹ã‚‹ã«ã€ Cassandra ã®ãƒ‡ãƒ¼ã‚¿ã®ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã¸ã®è»¢é€ã¯ä»Šå¾Œ Spark ã®ã‚¸ãƒ§ãƒ–ã«ç§»è¡Œã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãŠã‚Šã€ 2018 å¹´ 8 æœˆæ™‚ç‚¹ã§ã¯ã¾ã ç§»è¡Œé€”ä¸­ï¼Ÿã§ã‹ã¤æ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã¯ OSS ã«ã¯ãªã£ã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚ã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’æ”¯ãˆã‚‹ Ursula ã¨ã„ã†ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®å­˜åœ¨ã‚‚ä¸Šè¨˜ã‚¹ãƒ©ã‚¤ãƒ‰ã§ã¯è§¦ã‚Œã‚‰ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ OSS ã«ãªã£ã¦ã„ã‚‹æ°—é…ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‘¨è¾ºæŠ€è¡“ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä»¥å¤–ã«ã‚‚ã€ Netflix ã¯ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚¸ãƒ§ãƒ–ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ genie ã‚„ã€ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã‚ã‚‹ metacat ãªã©å¤šãã®å°é“å…·ã‚’æƒãˆã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ä½™è«‡ä¸Šè¨˜ã®ã†ã¡ Suro ã‚„ aegisthus ã«ã¤ã„ã¦ã¯ã€ \"ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£\" ã«ã‚‚è¨˜è¿°ãŒã‚ã‚Šå‚è€ƒã«ãªã‚‹éƒ¨åˆ†ãŒã‚ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚www.oreilly.co.jpã“ã“ã§æŒ™ã’ãŸãƒ„ãƒ¼ãƒ«ã¯ Netflix ãŒ Cassandra ã‚’åºƒãæ¡ç”¨ã—ã¦ã„ã‚‹ã“ã¨ã‚„ã€å¤§è¦æ¨¡ãªãƒ‡ãƒ¼ã‚¿ã‚’æŒã¤ãŒã‚†ãˆã®æ§˜ã€…ãªèª²é¡Œã€èƒŒæ™¯ãªã©ã‚‚ã‚ã£ã¦ä½œã£ãŸã®ã ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ãŒãã®ã¾ã¾ãƒãƒƒãƒã—ã¦åˆ©ç”¨ã§ãã‚‹ä¼æ¥­ã¯å¤šã„ã‚ã‘ã§ã¯ãªã„ã¨æ€ã‚ã‚Œã¾ã™ãŒã€ã“ã‚Œã‚‰ã®å¤‰é·ã‚„æ§‹æˆãªã©ãŒèª­ã¿è§£ã‘ã‚‹ã‚‚ã®ãŒã‚ã‚‹ã®ã‹ã‚‚ã€ãªã©ã¨æ€ã„ã¾ã—ãŸï¼ˆå°ä¸¦æ„Ÿï¼‰è¿½è¨˜ä»Šã¯ Kafka ã‚’çµæ§‹æ´»ç”¨ã—ã¦ã„ã‚‹ã®ã‹ã‚‚ã€‚ã¡ã‚‡ã£ã¨å‰ã®è¨˜äº‹ã ã‘ã©ã€èª¿ã¹æã­ã¦ãŸ netflix ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€æŠ•å…¥éƒ¨åˆ†ã¯ Java library (+ Non-java app å‘ã‘ã® proxy) ã§ã‚„ã£ã¦ã‚‹ã®ã‹ãªãƒ¼ï¼Ÿ  https://t.co/eCKkKf58KTâ€” ã—ã‚…ãƒ¼ã€€ãã‚Šãƒ¼ã‚€ (@syu_cream) 2018å¹´8æœˆ22æ—¥2017 å¹´ã®è³‡æ–™ã«ã‚‚ sharing jar ã®è©±å‡ºã¦ãã‚‹ã—æŠ•å…¥éƒ¨åˆ†ã¯ä»Šã‚‚ã‚ã¾ã‚Šå¤‰ã‚ã£ã¦ãªã„ã®ã‹ã—ã‚‰ https://t.co/oTIeDhLJY2â€” ã—ã‚…ãƒ¼ã€€ãã‚Šãƒ¼ã‚€ (@syu_cream) 2018å¹´8æœˆ22æ—¥","link":"https://syucream.hatenablog.jp/entry/2018/08/21/235945","isoDate":"2018-08-21T14:59:45.000Z","dateMiliSeconds":1534863585000,"authorName":"syucream","authorId":"syucream"},{"title":"æ ªå¼ä¼šç¤¾ãƒ¡ãƒ«ã‚«ãƒªã«å…¥ç¤¾ã—ã¦1å¹´ãŒçµŒéã—ãŸ","contentSnippet":"ã¡ã‚‡ã†ã©ä¸€å¹´å‰ã® 2017å¹´8æœˆ16æ—¥ã«æ ªå¼ä¼šç¤¾ãƒ¡ãƒ«ã‚«ãƒªã«å…¥ç¤¾ã—ã¾ã—ãŸã€‚ã‚­ãƒªãŒã„ã„ã“ã¨ã‚‚ã‚ã‚Šã€ã“ã“ã‚‰ã§å€‹äººçš„ãªæŒ¯ã‚Šè¿”ã‚Šã‚’ã¤ã‚‰ã¤ã‚‰æ›¸ã„ã¦ã¿ã¾ã™ã€‚ã‚ã‚‰ã‹ã˜ã‚ã€ã¯ã£ãã‚Šã„ã£ã¦å€‹äººã®æ—¥è¨˜ãƒ¬ãƒ™ãƒ«ã®å†…å®¹ã§ã‚ã‚‹ã“ã¨ã‚’ãŠæ–­ã‚Šã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚è»¢è·ã®çµŒç·¯ã‹ã‚‰å…¥ç¤¾ã¾ã§ã€€2017 å¹´ 1 æœˆé ƒã‹ã‚‰è»¢è·ã‚’è€ƒãˆåˆã‚ã¦ã„ã¾ã—ãŸã€‚å…ƒã®æ‰€å±ã‚‚ Web ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãªã‚Šã‚ã„ã¨ã—ã¦ãŠã‚Šã€ãã‚Œãªã‚Šã®æ„›ç€ã‚‚ã‚ã‚Šè‰¯ã„çµŒé¨“ã‚’ã•ã›ã¦é ‚ã„ã¦ã¯ã„ãŸã®ã§ã™ãŒã€è‡ªåˆ†ã®èƒ½åŠ›å‘ä¸Šã‚’ç›®æŒ‡ã—ã¤ã¤ã‚ˆã‚Šæ—©ã„ãƒšãƒ¼ã‚¹ã§ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’æä¾›ã—ã¦ã„ãä½“é¨“ã‚’ç©ã¿ãŸãç²›ã€…ã¨æº–å‚™ã‚’ã—ã¦ã„ã¾ã—ãŸã€‚ãã‚“ãªä¸­ãƒ¡ãƒ«ã‚«ãƒªã¯ã€æ€¥æˆé•·ã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¦ãŠã‚Šå¤–éƒ¨ã¸ã®ç™ºä¿¡ã‚‚å¤šãã€ã¾ãŸæ‰€å±ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‚å¼·åŠ›ãªæ–¹ã€…ãŒå¤šãè‡ªåˆ†ã«ã¨ã£ã¦ã‚‚è‰¯ã„çµŒé¨“ã«ãªã‚‹ã¨è¸ã‚“ã ãŸã‚å¿œå‹Ÿã—ãŸæ¬¡ç¬¬ã§ã—ãŸã€‚ã€€å¿œå‹Ÿã«éš›ã—ã¦åƒ•ã®å ´åˆã¯ç‰¹ã«çŸ¥ã‚Šåˆã„ã®ãƒ„ãƒ†ã‚„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é€šã•ãšã«ã€æ¡ç”¨ãƒšãƒ¼ã‚¸ã®å‹Ÿé›†ãƒ•ã‚©ãƒ¼ãƒ ã«ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¿ãƒƒã‚¯ã‚’ä»•æ›ã‘ã¦é¸è€ƒã«é€²ã¿ã¾ã—ãŸã€‚æ•¢ãˆã¦åçœç‚¹ã‚’ã²ã­ã‚Šå‡ºã™ãªã‚‰ã°ã€ä½•ã¨ã‹æ‰€å±ã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ä»•æ›ã‘ã¦é›°å›²æ°—ãªã©ã‚’ç¢ºã‹ã‚ã‚‹ã¨ã‚ˆã‚Šè‰¯ã‹ã£ãŸæ°—ã¯ã—ã¾ã™ã€‚æ¡ç”¨ãƒšãƒ¼ã‚¸ã‚„å„ç¨®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‹ã‚‰ã¯è¦‹ãˆãªã„ç¾å ´ã§ã®è‘›è—¤ã‚„ãã“ã«æ ¹ã–ã™æ–‡åŒ–ã‚’ç¢ºèªã™ã‚‹ã®ã¯ã€é‡è¦ãªã“ã¨ã§ã—ã‚‡ã†ã—ã€‚å…¥ç¤¾å¾Œã‹ã‚‰ä»Šã¾ã§ã€€2017 å¹´å†…ã¯ãƒ¡ãƒ«ã‚«ãƒª SRE ãƒãƒ¼ãƒ ã«æ‰€å±ã—ã¦ã€ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢é–‹ç™ºãƒãƒ³ã¨ã—ã¦ä¸»ã«ãƒ‡ãƒ¼ã‚¿åé›†åŸºç›¤ã¨ãã®ä»–ç´°ã€…ã¨ã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é–‹ç™ºã«æºã‚ã£ã¦ã„ã¾ã—ãŸã€‚ãã®å¾Œã¯ 2018 å¹´ 2 æœˆé ƒï¼Ÿï¼ˆã†ã‚è¦šãˆï¼‰ã«å­ä¼šç¤¾ãƒ¡ãƒ«ãƒšã‚¤ã«ç±ã‚’ç§»ã—ã€ä¸€éƒ¨ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºã‚„ã€ãƒ¡ãƒ«ãƒšã‚¤ã®ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿åé›†åŸºç›¤ã‚’ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«å¾“ã£ãŸä¸–ç•Œã§ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã®èª²é¡Œã‚‚å¸åã—ã¤ã¤è€ƒãˆã‚‹ã¨ã„ã†ä»•äº‹ã«å¾“äº‹ã—å§‹ã‚ã¾ã—ãŸã€‚ã€€ã“ã®é–“ã«èµ·ã“ã£ãŸå¤§ããªå¤‰åŒ–ã¨ã—ã¦ã€å€‹äººçš„ã«ã¯å‰è·ãŒåŸºæœ¬ã‚ªãƒ³ãƒ—ãƒ¬å‰æã®ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆã§ã‚ã£ãŸã¨ã“ã‚ã‹ã‚‰ã‚¯ãƒ©ã‚¦ãƒ‰ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å¤šç”¨ã™ã‚‹ç’°å¢ƒã«ãªã£ãŸã“ã¨ã¨ã€ä¼šç¤¾çš„ã«ã¯ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã¸èˆµã‚’åˆ‡ã£ãŸã“ã¨ã§ã™ã€‚ç‰¹ã«å¾Œè€…ã¯ä»Šã§ã‚‚æ‚©ã¾ã—ã„äº‹ãŒã„ãã¤ã‚‚ã‚ã‚Šã€åˆºæ¿€ã®å¤šã„æ—¥ã€…ã‚’éã”ã›ã¦ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã¦ã„ã¾ã™ã€‚åçœç‚¹ã¨ä»Šå¾Œã®ç›®æ¨™ã€€ã“ã“ä¸€å¹´å¤šãã®åˆºæ¿€ã‚’å—ã‘ã¤ã¤éã”ã›ã¾ã—ãŸãŒã€ã¾ã ã¾ã è‡ªåˆ†ãŒç´å¾—ã§ãã‚‹ã»ã©å¤§ããªæˆåŠŸã«åˆ°é”ã—ã¦ã„ãªã„ã¨ã‚‚æ€ãˆã¾ã™ã€‚å…ƒã€…ã€ä¸ç¢ºå®šãªä¸–ç•Œã®ä¸­ã“ã¤ã“ã¤ã¨å°‘ã—ãšã¤æˆæœã‚’ç©ã¿ä¸Šã’æ¨¡ç´¢ã™ã‚‹ã®ãŒå¥½ãã§ã‚ã‚Šå¾—æ„ã§ã‚ã‚‹ã¨è€ƒãˆã¦ã„ã‚‹ã®ã§ã™ãŒã€ãã®ã‚¹ã‚¿ã‚¤ãƒ«ã§ã¯åˆ°é”ã—ã«ãã„é ˜åŸŸã«ã¤ã„ã¦ã‚‚è€ƒãˆã‚‹ã¹ãã‹ã‚‚ã¨ã„ã†å±æ©Ÿæ„Ÿã‚‚æŒã£ã¦ãã¦ã„ã¾ã™ã€‚ãã†ã„ã£ãŸç¾çŠ¶ã®è‡ªèº«ã®ä¸è¶³ã—ã¦ã„ã‚‹ã‚¹ã‚­ãƒ«ã‚„ã§ãã‚‹é ˜åŸŸã€ã‚„ã‚Œã‚‹é ˜åŸŸã‚’æ˜ç¢ºã«ã—ã¦ã„ãã®ãŒä»Šå¾Œã®èª²é¡Œãªã®ã‹ãªãã€ãªã©ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ãŠã¾ã‘: ä»•äº‹ä»¥å¤–ã®ã“ã“ä¸€å¹´ã®æ´»å‹•ngx_mruby ã®ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚° sleepã€€ãƒ¡ãƒ«ã‚«ãƒª SRE ãƒãƒ¼ãƒ ã«æ‰€å±ã—ãŸéš›ã€ãã†ã„ãˆã°ã¡ã‚ƒã‚“ã¨ nginx ã‚’ç†è§£ã—ã¦ã„ãªã„ãªã¨å±æ©Ÿæ„Ÿã‚’è¦šãˆã¤ã¤ã€å‹‰å¼·ã‚‚å…¼ã­ã¦ mruby ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å‹•ã‹ã™ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ngx_mruby ã«ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚° sleep ã™ã‚‹ä»•çµ„ã¿ã‚’è¿½åŠ ã™ã‚‹ãƒ‘ãƒƒãƒã‚’æ›¸ã„ã¦ã¿ã¦ã„ã¾ã—ãŸã€‚ã“ã®ãƒ‘ãƒƒãƒã¯çµå±€å¹¾ã¤ã‹ã®å•é¡Œã«ãƒãƒã‚Šã€è‡ªåˆ†ã ã‘ã§ã¯è§£æ±ºã§ããšåŠã°æ”¾ç½®ã—ã¦ã„ãŸã®ã§ã™ãŒã€ matsumotory ã•ã‚“ã¯ã˜ã‚ GMO ãƒšãƒ‘ãƒœã•ã‚“ã®æ–¹ã€…ã«æ‹¾ã£ã¦ã„ãŸã ãã€ RubyKaigi 2018 ã§ç´¹ä»‹ã•ã‚Œã‚‹ã¾ã§ã«è‡³ã‚Šã¾ã—ãŸã€‚ãƒ»ãƒ»ãƒ»è«¦ã‚ã¦å˜ç´”ã«æ”¾ç½®ã™ã‚‹ã§ãªãã€ã‚‚ã†å°‘ã—èƒ½å‹•çš„ã«ç›¸è«‡ã—ã«è¡Œã£ãŸã‚Šã¨ã‹ã™ã¹ãã ã£ãŸã‹ã‚‚ã€ãªã©æ§˜ã€…ãªåçœãŒã‚ã‚Šã¾ã™ã€‚rubykaigi.orgGo ã§ã„ãã¤ã‹ãƒ„ãƒ¼ãƒ«ã‚’æ›¸ã„ãŸã€€ã™ã§ã«è¨˜äº‹ã¨åŒ–ã—ãŸã‚‚ã®ã‚‚ã‚ã‚‹ã®ã§ã™ãŒã€ Go ã§ã„ãã¤ã‹ãƒ„ãƒ¼ãƒ«ã‚’æ›¸ãã¾ã—ãŸã€‚syucream.hatenablog.jpsyucream.hatenablog.jpè‡ªåˆ†ã®æ¥­å‹™ã«ç›´çµã™ã‚‹ã‚¹ã‚­ãƒ«ãŒå¾—ã‚‰ã‚Œã‚‹ä»¥å¤–ã«ã‚‚ã€ã‚„ã£ã±ä½•ã‚‚è€ƒãˆãªãã¦ã‚‚ã‚·ãƒ³ã‚°ãƒ«ãƒã‚¤ãƒŠãƒªã§ä½¿ãˆã‚‹ã¨ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã¯ä¾¿åˆ©ã ã¨è€ƒãˆãŸãŸã‚ã€ã²ãŸã™ã‚‰ Go ã§æ›¸ã„ã¦ã¾ã™ã€‚ã§ã€èª°ï¼Ÿ","link":"https://syucream.hatenablog.jp/entry/2018/08/16/122548","isoDate":"2018-08-16T03:25:48.000Z","dateMiliSeconds":1534389948000,"authorName":"syucream","authorId":"syucream"},{"title":"Cloud Spanner ã® DDL parser ã¨ DDL å¤‰æ›ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸ","contentSnippet":"Cloud Spanner ã® DDL parser ã® Go å®Ÿè£…ã¨ã€ Spanner DDL ã‚’ MySQL DDL ã£ã½ã„ã‚‚ã®ã«å¤‰æ›ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚æœ¬è¨˜äº‹ã¯ã“ã‚Œã‚‰ã®ç´¹ä»‹ã«ãªã‚Šã¾ã™ã€‚github.comgithub.comspar: Cloud Spanner DDL parser in GoSpanner ã® DDL ã¯ ã“ã‚“ãªæ„Ÿã˜ ã§ã€ SQL æ–¹è¨€ã«è¦‹ãˆã‚‹ã‚‚ã®ã®ã‚«ãƒ©ãƒ ã®å‹ã ã® INTERLEAVE ã ã®ã€ä»•æ§˜ã«å¯¾ã—ã¦ç‹¬è‡ªã®æ–‡æ³•ã‚‚çµæ§‹ãªå‰²åˆã§æŒã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚ä»Šå›ä½œã£ãŸ spar, DDL parser ã¯ã“ã‚Œã‚‰ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ CREATE æ–‡ã‚„ ALTER æ–‡ãªã©ã®æ§‹æˆè¦ç´ ã‚’ã¾ã¨ã‚ã¦è¿”ã—ã¦ãã‚Œã¾ã™ã€‚åŒãƒªãƒã‚¸ãƒˆãƒªã«åŒæ¢±ã—ãŸ DDL syntax checker ã®ã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ãƒ—ãƒ«ãªä½¿ç”¨ä¾‹ã¨ã—ã¦ã‚‚æœ‰ç”¨ã§ã™ã€‚parser package ã®æŒã¤ Parse() ã«èª­ã¿ãŸã„ DDL ã® Reader ã‚’æ¸¡ã™ã¨ãƒ‘ãƒ¼ã‚¹ã—ãŸçµæœã‚’è¿”ã—ã¦ãã‚Œã¾ã™ã€‚package mainimport (    \"io/ioutil\"    \"log\"    \"os\"    \"strings\"    \"github.com/syucream/spar/src/parser\")func main() {    data, err := ioutil.ReadAll(os.Stdin)    if err != nil {        log.Fatal(err)    }    _, err = parser.Parse(strings.NewReader(string(data)))    if err != nil {        log.Fatal(err)    }}ãƒ‘ãƒ¼ã‚µãƒ¼éƒ¨åˆ†ã¯ goyacc ã‚’ä½¿ã£ã¦ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚ã¾ãŸ lexer éƒ¨åˆ†ã®ä¸€éƒ¨ã¯ https://github.com/benbjohnson/sql-parser ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚jackup: Jack up your DDL and translate between MySQL and Spannerã‚¹ãƒ‘ãƒŠã¨ããŸã‚‰ä»Šåº¦ã¯åˆ¥ã®å·¥å…·ã‚‚æ¬²ã—ããªã£ã¦ãã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚ã¨ã„ã†ã“ã¨ã§ã‚¸ãƒ£ãƒƒã‚­ã‚’ä½œã‚Šã¾ã—ãŸã€‚jackup ã¯æ¨™æº–å…¥åŠ›ã‹ -f ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æ¸¡ã—ãŸãƒ‘ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã® DDL ã‚’å‚ç…§ã—ã€ spar ã‚’ä½¿ã£ã¦ãƒ‘ãƒ¼ã‚¹ã—ãŸå¾Œã€ï¼ˆç¾åœ¨ã¯ CREATE TABLE , CREATE INDEX ã—ã‹èª­ã‚“ã§ãã‚Œã¾ã›ã‚“ãŒï¼‰ MySQL ã®åŒã˜ã‚ˆã†ãªæ§‹é€ ã‚’æŒã¤ DDL ã‚’å‡ºåŠ›ã—ã¦ãã‚Œã¾ã™ã€‚æ®‹å¿µãªãŒã‚‰ä¸€éƒ¨ã®å¤‰æ›ã€ç‰¹ã«ã‚«ãƒ©ãƒ ã®é•·ã•ã«é–¢ã™ã‚‹åˆ¶é™ãŒ Spanner ã®ã»ã†ãŒã‚†ã‚‹ã„éƒ¨åˆ†ãŒã‚ã‚Šã€ç„¡ç†ã‚„ã‚Šå¤‰æ›ã—ãŸã‚Šå¤‰æ›ã›ãšç„¡è¦–ã—ãŸã‚Šã‚‚ã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ Spanner ã‚’æ¨ã¦ã¦ MySQL ã«ä»¥é™ã—ãŸã‚Šãªã©ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«å¯¾å¿œã™ã‚‹ã¤ã‚‚ã‚Šã¯ãªãã€ã‚‚ã†å°‘ã—ã‚†ã‚‹ãå¤‰æ›ã—ãŸã‚‰ã©ã†ãªã‚Šãã†ã‹ç¢ºèªã—ãŸã‚Šã€ MySQL å‘¨ã‚Šã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã€ä¾‹ãˆã° MySQL Workbench ã«ã‚ˆã‚‹ ER å›³ç”Ÿæˆã«é£Ÿã‚ã›ãŸã‚Šã—ã¦ã¿ã‚‹ãŸã‚ã«ä½œã£ã¦ã¾ã™ã€‚ãªãŠã€ã“ã®ã‚ãŸã‚Šã® SQL æ–¹è¨€ã¨ãã®é–“ã®ç›¸äº’å¤‰æ›ã¯ã€ç¾çŠ¶è‰¯ã„ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãŒç„¡ãä»Šå›è‡ªåˆ†ã¯è‡ªå‰ã§å®Ÿè£…ã—ãŸã®ã§ã™ãŒã€ä»Šå¾Œã¯ Apache Calcite ã«æ·¡ã„æœŸå¾…ã‚’å¯„ã›ã¦ã¿ã¦ã‚‚ã„ã„ã®ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚Apache Calcite â€¢ Dynamic data management framework","link":"https://syucream.hatenablog.jp/entry/2018/08/08/004257","isoDate":"2018-08-07T15:42:57.000Z","dateMiliSeconds":1533656577000,"authorName":"syucream","authorId":"syucream"},{"title":"æŠ€è¡“æ›¸å…¸4ã§é…å¸ƒã—ãŸåŒäººèªŒã®åŸç¨¿ãƒ‡ãƒ¼ã‚¿ã‚’ GitHub ã§å…¬é–‹ã—ã¾ã—ãŸ","contentSnippet":"ä»¥ä¸‹ã®è¨˜äº‹ã§ã”ç´¹ä»‹ã—ãŸã€å¼Šã‚µãƒ¼ã‚¯ãƒ«ã®æŠ€è¡“æ›¸å…¸4ã®æ–°åˆŠã‚’ GitHub ã§ public repo ã¨ã—ã¦å…¬é–‹ã—ã¾ã—ãŸã€‚syucream.hatenablog.jpãƒªãƒã‚¸ãƒˆãƒªã¯ã“ã¡ã‚‰ã«ãªã‚Šã¾ã™ã€‚github.comãƒ“ãƒ«ãƒ‰æ¸ˆã¿ pdf ã¯ç„¡ãã€ã¾ãŸãã®ä»–é…å¸ƒã—ãŸåŸç¨¿ã«ã—ã‹å«ã¾ã‚Œãªã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãªã©ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã”äº†æ‰¿ãã ã•ã„ã€‚æŠ€è¡“æ›¸å…¸4æŒ¯ã‚Šè¿”ã‚Šã„ã„æ©Ÿä¼šãªã®ã§æŒ¯ã‚Šè¿”ã‚Šã‚’ã¤ã‚‰ã¤ã‚‰æ›¸ãã¾ã™åŸ·ç­†ç’°å¢ƒã«ã¤ã„ã¦Re:VIEW ã§åŸç¨¿ã‚’è¨˜è¿°CircleCI ã§ textlint å®Ÿè¡Œã¨ pdf è‡ªå‹•ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã‚ˆã†ã«ã—ãŸå…¥ç¨¿ç›´å‰ã«ãªã£ã¦ pdf ãŒã‚³ãƒ¬ã‚¸ãƒ£ãƒŠã‚¤æ„Ÿå‡ºã‚‹ã®ãƒã‚¸å‹˜å¼ï¼ãªã®ã§base ã® Docker Image ã« vvakame/review ã‚’ä½¿ã‚ã›ã¦ã„ãŸã ãã¾ã—ãŸç´°ã‹ãªãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ GitHub ã® pullreq or Issue ãƒ™ãƒ¼ã‚¹ã§å®Ÿæ–½é€²æ—ç®¡ç†ã«ã¤ã„ã¦GitHub Issues ã® Milestone ã§ã€ã„ãã¤ã‹ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã¨ãã®ç· åˆ‡ã‚’è¨­å®šã‚†ã‚‹ã‚ã®ç· åˆ‡ã«ã—ãŸæœ€åˆã‹ã‚‰æ—©å‰²å…¥ç¨¿å‰æã§ç®¡ç†ã—ã¦ãŸã€‚è¿½ã„è¾¼ã¿è¨˜äº‹ã«ã“ã®ãƒãƒƒãƒ•ã‚¡ãŒã‚ã‚‹ã“ã¨ã§å°‘ã—ç²¾ç¥çš„ã«åŠ©ã‹ã£ãŸã‚ã¾ã‚Šäºˆå®šé€šã‚Šã«ã„ã‹ãªã‹ã£ãŸã®ã¯å¤§ããªåçœç‚¹å¤šäººæ•°ã§ã®åŸ·ç­†ç®¡ç†ã®çµŒé¨“ãŒä»Šå›ã§åˆã‚ã¦ã ã£ãŸã®ã§ã€å­¦ã³ãŒå¤šã‹ã£ãŸæœ¬ã®ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦ãƒ†ãƒ¼ãƒã‚’ 1 ã¤ã«çµã‚‹ã‹ã€é–‹ãç›´ã£ã¦é›‘èªŒå½¢å¼ã«ã™ã¹ãã ã£ãŸãƒ†ãƒ¼ãƒãŒ 2 ã¤ã‚ã‚‹ã›ã„ã§ã€ãã®ãƒ†ãƒ¼ãƒé–“ã«é–¢é€£ãŒã‚ã‚‹ã‚‚ã®ã ã¨èª¤è§£ã•ã›ã¦ã—ã¾ã£ãŸãã®ä»–ãƒ¡ãƒ³ãƒãƒ¼ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒé€”ä¸­ã§ä½æ¸›ã—ã¦ã—ã¾ã£ãŸãƒ¢ãƒãƒ™ç®¡ç†ã¾ã§ã™ã¹ãã‹ã¯æ‚©ã¿ã©ã“ã‚ã€‚åŒäººèªŒã§ã‚ã‚‹ãªã‚‰ã€å€‹ã€…äººãŒè‡ªåˆ†ã®è¨˜äº‹ã®å“è³ªã«ç´å¾—ãŒè¡Œã£ã¦ã„ã‚‹ãªã‚‰ã¾ãã„ã„ã®ã‹ãªï¼Ÿè¡¨ç´™çµµã®æ‹…å½“ãŒæ±ºã¾ã£ãŸã®ãŒå¾ŒåŠã ã£ãŸæ—©ã‚ã«èª¿æ•´ï¼ï¼ãã—ã¦æŠ€è¡“æ›¸å…¸5ã¸ã€œå¼Šã‚µãƒ¼ã‚¯ãƒ«ã€Œã¾ã„ã«ã¡ãŒãã‚“ã‚ˆã†ã³ã€‚ã€ã¯æŠ€è¡“æ›¸å…¸5ã«ã‚‚å‚åŠ ã—ã¾ã™ï¼ãŸã¶ã‚“ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å‘¨è¾ºæŠ€è¡“ã«ã¤ã„ã¦åŸ·ç­†é™£ãŒå¥½ããªè¦ç´ ã‚’ã²ã‚ã£ã¦ã¾ã¨ã‚ãŸæ–°åˆŠã‚’å‡ºã™ã“ã¨ã«ãªã‚‹ã‹ã¨æ€ã„ã¾ã™ï¼ˆãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹é–¢é€£ä»¥å¤–ã«ã‚‚ã€ã‚ªãƒã‚±ã¨ã—ã¦è¨˜äº‹ã‚’æ›¸ãã‹ã‚‚ã§ã™ï¼‰å¼•ãç¶šãã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ï¼ï¼","link":"https://syucream.hatenablog.jp/entry/2018/08/06/225711","isoDate":"2018-08-06T13:57:11.000Z","dateMiliSeconds":1533563831000,"authorName":"syucream","authorId":"syucream"},{"title":"embulk-input-datastore ã‚’ä½œã£ãŸ","contentSnippet":"TL;DRCloud Datastore ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ã¶ã£ã“æŠœã„ã¦ãã‚‹ãŸã‚ã® embulk input plugin ã‚’ä½œã‚Šã¾ã—ãŸã€‚github.comæ™®é€šã« embulk gem install embulk-input-datastore ã—ãŸä¸Šã§ input plugin ã¨ã—ã¦ã”åˆ©ç”¨ãã ã•ã„ã€‚å‚ç…§ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’çµã‚Šè¾¼ã‚€ãŸã‚ã« GQL ã‚’æŒ‡å®šå¯èƒ½ã«ã—ã¦ã„ã‚‹ã®ã§ã”åˆ©ç”¨ãã ã•ã„ã€‚ï¼ˆé€†ã«ãã‚Œä»¥å¤–ã®å‚ç…§æ–¹æ³•ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚ã€‚ï¼‰in:  type: datastore  project_id: \"your-gcppj-123\"  json_keyfile: credential.json  gql: \"SELECT * FROM myKind\"...ç´°ã‹ã„è©±å®Ÿè£…è¨€èªKotlin ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ãã®ç†ç”±ã¨ã—ã¦ã¯ Java ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã«è¨˜è¿°å¯èƒ½ã§ã€ã‹ã¤ãã‚Œãªã‚Šã«äº‹ä¾‹ãŒã‚ã‚‹ã®ã§æ¡ç”¨ã—ã¦ã¿ãŸæ¬¡ç¬¬ã§ã™ã€‚qiita.comãƒ†ã‚¹ãƒˆã¯ Spek ã‚’ç”¨ã„ã¦ RSpec çš„ãªã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã§ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ã€ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ kotlin-test ã‚’ä½¿ã†ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚å¤§ã—ãŸè¨˜è¿°é‡ã§ã¯ç„¡ã„ã®ã§ã™ãŒã€ã¾ãã¾ãæ§˜ã«ãªã£ã¦ã„ã‚‹æ°—ãŒã—ã¾ã™ã€‚embulk ã® input plugin ã¨ã—ã¦ã®æŒ™å‹•Cloud Datastore ã¯ã„ã‚ã‚†ã‚‹ NoSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚Šã‚¹ã‚­ãƒ¼ãƒãŒå›ºå®šã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å¾“ã£ã¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ã‚ˆã£ã¦åŒã˜ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã§é•ã†å‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå­˜åœ¨ã—ãŸã‚Šã€å€¤ãŒãã‚‚ãã‚‚å­˜åœ¨ã—ãªã‹ã£ãŸã‚Šã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ embulk ã®ï¼ˆã¨ã„ã†ã‹ MessagePack ã®ï¼Ÿï¼‰å‹ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã®ãŒé¢å€’ãã•ãã€ã‚ã¾ã‚Šè‰¯ã„å¯¾å¿œæ–¹æ³•ã‚‚æ€ã„ã¤ã‹ãªã‹ã£ãŸã®ã§ embulk-input-mongodb ã¨åŒæ§˜å˜ä¸€ã® JSON ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«çµæœã‚’ã¾ã¨ã‚ã¦å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚input plugin ã¨ã—ã¦å€¤ã®èª­ã¿å‡ºã—ã¯è¡Œã†ãŒã€å¤‰æ›å‡¦ç†ã‚’è¡Œã†å ´åˆã¯åˆ¥ã® filter plugin ãªã©ã§ãªã‚“ã¨ã‹ã›ã„ã€ã¨ã„ã†ã‚¹ã‚¿ãƒ³ã‚¹ã§ã™ã€‚gradle-embulk-plugin ã®åˆ©ç”¨gradle-embulk-plugin ã‚’ä¾¿åˆ©ã«ä½¿ã‚ã›ã¦ã„ãŸã ãã¾ã—ãŸï¼ä¸»ã«åˆæœŸã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚„ gradle embulk_run ã«ã‚ˆã‚‹å‹•ä½œç¢ºèªãªã©ã§ãŠä¸–è©±ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã‹ã‚‰ gradle ã§ãƒ“ãƒ«ãƒ‰ã—ã¤ã¤ embulk plugin ä½œã‚‹ã‚ˆã†ãªæ–¹ã«ã¯ã‚ªã‚¹ã‚¹ãƒ¡ã—ãŸã„ã¨ã“ã‚ã§ã™ã€‚å‹•ä½œä¾‹ä¸€å¿œè¼‰ã£ã‘ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãª myKind ã‚«ã‚¤ãƒ³ãƒ‰ã«å¯¾ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŸã¡ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«ã“ã‚“ãªæ„Ÿã˜ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ã¦in:  type: datastore  project_id: \"<my-project-id>\"  json_keyfile: credential.json  gql: \"SELECT * FROM myKind WHERE myProp >= 100 AND myProp < 200\"out:  type: stdoutå®Ÿè¡Œã™ã‚‹ã“ã¨ã§ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã¾ã—ãŸã€‚$ embulk run examples/datastore2stdout.yaml2018-06-26 00:11:05.173 +0900: Embulk v0.9.72018-06-26 00:11:07.219 +0900 [WARN] (main): DEPRECATION: JRuby org.jruby.embed.ScriptingContainer is directly injected.2018-06-26 00:11:14.783 +0900 [INFO] (main): Gem's home and path are set by default: \"/Users/ryo/.embulk/lib/gems\"2018-06-26 00:11:17.364 +0900 [INFO] (main): Started Embulk v0.9.72018-06-26 00:11:17.639 +0900 [INFO] (0001:transaction): Loaded plugin embulk-input-datastore (0.1.1)2018-06-26 00:11:17.743 +0900 [INFO] (0001:transaction): Using local thread executor with max_threads=8 / output tasks 4 = input tasks 1 * 42018-06-26 00:11:17.784 +0900 [INFO] (0001:transaction): {done:  0 / 1, running: 0}{\"extra\":{\"defaultProperty\":\"hogefuga\"}, \"myProp\":100}{\"myProp\":150}2018-06-26 00:11:19.708 +0900 [INFO] (0001:transaction): {done:  1 / 1, running: 0}2018-06-26 00:11:19.714 +0900 [INFO] (main): Committed.2018-06-26 00:11:19.715 +0900 [INFO] (main): Next config diff: {\"in\":{},\"out\":{}}ãŠã‚ã‚Šã«ãªã‚“ã¨ãªãå‹•ãã¨ã“ã‚ã¾ã§æŒã£ã¦ã„ã‘ãŸã®ã§è¨˜äº‹ã«ã—ã¾ã—ãŸã€‚Cloud Firestore ã‚‚åŒã˜è¦é ˜ã§ plugin ä½œã‚ŒãŸã‚Šã™ã‚‹ã®ã‹ãªã¨ã¼ã‚“ã‚„ã‚Šè€ƒãˆãŸã‚Šã—ã¾ã—ãŸã€‚","link":"https://syucream.hatenablog.jp/entry/2018/06/26/001404","isoDate":"2018-06-25T15:14:04.000Z","dateMiliSeconds":1529939644000,"authorName":"syucream","authorId":"syucream"},{"title":"protobuf ã® Marshal/Unmarshal ã‚„ Any å‹ã«ã¤ã„ã¦ç¢ºèªã—ã¦ã„ãŸ","contentSnippet":"ã‚ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ã‚Šå…ƒã¨é€ã‚Šå…ˆã§ã‚¹ã‚­ãƒ¼ãƒã‚’å…±æœ‰ã—ã¦ãã®ã‚¹ã‚­ãƒ¼ãƒã«åŸºã¥ã„ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚„ã‚Šå–ã‚Šã—ãŸã„ã“ã¨ãŒå¤šã€…ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã‚“ãªéš›ã«ã‚¹ã‚­ãƒ¼ãƒã®è¨˜è¿°ã‚’ protobuf ã§è¡Œã„ã€ã‹ã¤ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ã¦é€ã‚‹æ§‹æƒ³ã«ã¤ã„ã¦èª¿æŸ»ã—ãŸãƒ¡ãƒ¢ã‚’æœ¬ç¨¿ã§è¨˜è¼‰ã—ã¾ã™ã€‚èƒŒæ™¯IoT ã ã¨ã‹ Microservices Architecture ã ã¨ã‹ã‚¦ã‚§ãƒ–ãƒ»ã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¦ãƒ¼ã‚¶è¡Œå‹•åˆ†æã ã¨ã‹ã€AWS,GCP ã ã¨ã‹ä½•ã¨ã‹ã€ä¸–ã®ä¸­ã«ã¯å¤šãã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚„ãƒ‡ãƒ¼ã‚¿æ ¼ç´ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒç”Ÿã¾ã‚Œã¦ãã¦ã„ã¾ã™ã€‚ãã‚“ãªä¸­ã€ã©ã®ã‚ˆã†ãªã‚¹ã‚­ãƒ¼ãƒãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ã‹ã¨ã„ã†ç‚¹ã¯æœªã å¤šãã®é–‹ç™ºè€…ã‚’æ‚©ã¾ã›ã¦ã„ã‚‹ã®ã§ã¯ã¨è€ƒãˆã¾ã™ã€‚ã“ã‚ŒãŒãƒ“ã‚¸ãƒã‚¹ä¸Šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¦ä»¶ãŒå³ã—ã‹ã£ãŸã‚Šã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å¤‰åŒ–ãŒå¤§ãã‹ã£ãŸã‚Šã€ãƒ‡ãƒ¼ã‚¿é€ä¿¡ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›¸ãé–‹ç™ºè€…ãŒè“„ç©ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã™ã‚‹ã‚·ãƒ¼ãƒ³ã§ã‚µãƒãƒ¼ãƒˆã§ãã‚‹ã®ã§ã‚ã‚Œã°ã€ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã²ã¨ã¾ãšãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã—ã¾ãã‚‹ã®ã‚‚è‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚ã—ã‹ã—ãªãŒã‚‰å€‹äººçš„ã«ã¯ãã†ã§ã¯ãªã„çŠ¶æ³ã‚„ã€å°†æ¥çš„ãªçµ„ç¹”ãƒ»äººå“¡ã®æ‹¡å……ã‚’è€ƒãˆã‚‹ã¨ã‚¹ã‚­ãƒ¼ãƒãŒã‚ã£ã¦æ¬²ã—ã„æ°—æŒã¡ãŒé«˜ã¾ã‚Šã¾ã™ã€‚ã¨ã¯ã„ãˆã€ãªã‚‹ã¹ãã‚¹ã‚­ãƒ¼ãƒã®å¤‰æ›´ã«ã¯æŸ”è»Ÿã«å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ã‚ã£ã¦æ¬²ã—ã„ã‚‚ã®ã§ã™ã€‚ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã‚’ã©ã†ã™ã‚‹ã‹ã«ã¤ã„ã¦æœ€åˆã«æ€ã„ã¤ã„ãŸã®ã¯ JSON Schema ãªã®ã§ã™ãŒã€äººãŒèª­ã¿æ›¸ãã™ã‚‹ã®ã«ã¯é©ã•ãªã„ã¨æ„Ÿã˜ã¾ã™ã€‚ãã®æ¬¡ã«æœ¬ç¨¿ã§è§¦ã‚Œã‚‹ã€æœ€è¿‘ã¯ gRPC ãƒ¡ã‚½ãƒƒãƒ‰å®šç¾©ãªã©ã§ã‚‚ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹ protobuf ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã‚’æ€ã„ã¤ãã¾ã—ãŸã€‚ï¼ˆå®Ÿéš›ã«ã„ãã¤ã‹ã®ã‚µãƒ³ãƒ—ãƒ«ã«è§¦ã‚Œã‚‹å‰ã«ã€ä»¥ä¸‹ã®è¨˜äº‹ã«å½±éŸ¿ã‚’å—ã‘ã¾ã—ãŸã€‚ protobuf ã«ã“ã‚Œã‹ã‚‰å…¥é–€ã—ã¦ã¿ãŸã„æ–¹ã¯èª­ã‚“ã§ã¿ã¦ã„ãŸã ã‘ã‚‹ã¨ï¼ï¼‰ä»Šã•ã‚‰Protocol Buffersã¨ã€æ‰‹ã«é¦´æŸ“ã‚€é“å…·ã®è©±ç¢ºèªã—ãŸã‹ã£ãŸã“ã¨protobuf ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ¼ãƒå®šç¾©è‡ªä½“ã¯ä¸Šè¨˜ã®è¨˜äº‹ã‚ˆã‚Šè‰¯ã•ã’ã ãªã¨æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€ã‚¹ã‚­ãƒ¼ãƒã®æ›´æ–°ã®æŸ”è»Ÿæ€§ã€å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ç‚¹ãŒæ°—ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å¢—ã‚„ã—ãŸéš›ã®å—ä¿¡å´ã®æŒ™å‹•ã‚¿ã‚°ã®å€¤ãŒæ›¸ãæ›ã‚ã‚‹ã‚ˆã†ãªæ›´æ–°ãŒèµ·ã“ã£ãŸéš›ã®å—ä¿¡å´ã®æŒ™å‹•Any ã«ã‚ˆã‚‹å‹æƒ…å ±ä»˜ããƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å—ä¿¡å´ã®æŒ™å‹•ã“ã‚Œã‚‰ã‚’ä»¥ä¸‹ã®ã‚·ãƒŠãƒªã‚ªã®ã‚‚ã¨å‹•ä½œç¢ºèªã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚Twitter ã¿ãŸã„ãªã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¦ãƒ¼ã‚¶ã®è¡Œå‹•ãƒ­ã‚°ã‚’ protobuf ã§å®šç¾©ã™ã‚‹æœ€åˆã¯ v1 ã¨ã—ã¦ Event å‹ã§è¡Œå‹•ãƒ­ã‚°ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã‚ã‚‹ç¨‹åº¦æ™‚æœŸãŒçµŒéã—ãŸéš›ã€ãƒ„ã‚¤ãƒ¼ãƒˆã® URI ã®ã‚ˆã†ãªè¿½åŠ æƒ…å ±ã‚’è¶³ã—ãŸããªã£ãŸã®ã§ RichEvent ã¨ã„ã†æ–°ã—ã„å‹ã§ãƒ­ã‚°ã‚’æ‰±ã†ã“ã¨ã«ã—ãŸæ›´ã«æ™‚æœŸãŒçµŒéã—ãŸéš›ã€æ ¹æœ¬çš„ã«æ§‹é€ ã‚’è¦‹ç›´ã—ãŸããªã‚Šã€æ–°ã—ã„ v1 Event å‹ã‚’å®šç¾©ã—ã¦ãƒ­ã‚°ã‚’æ‰±ã†ã“ã¨ã«ã—ãŸãƒ­ã‚°é€ä¿¡ã‚³ãƒ¼ãƒ‰ã‚’è§¦ã‚‹äººã¨é€ä¿¡ã•ã‚ŒãŸãƒ­ã‚°ã‚’åé›†ã™ã‚‹äººã¯ç•°ãªã‚Šã€ã‚·ã‚¹ãƒ†ãƒ ã‚‚ç•°ãªã‚Šã€ã†ã¾ãé€£æºã§ããšå—ä¿¡å´ã®ã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ä½œæ¥­ãŒé…ã‚Œã‚‹å ´åˆãŒã‚ã‚‹ç¢ºèªçµæœNOTE: ã“ã“ã§ã¯ Go ã® protobuf packages ã‚’ä½¿ã£ãŸã‚Šã™ã‚‹ã“ã¨å‰æã§æ›¸ã„ã¦ã„ã¾ã™å®Ÿé¨“ç”¨ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã«è¨˜è¼‰ã—ã¾ã™ã€‚github.comç•°ãªã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³é–“ã® Marshal/Unmarshalã‚ã¾ã‚Šç¶ºéº—ã«ã¾ã¨ã¾ã£ã¦ã„ã¾ã›ã‚“ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã«ãªã‚Šã¾ã—ãŸã€‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¿ã‚°ã¨å‹ãŒä¸€è‡´ã—ã¦ã„ã‚‹éƒ¨åˆ†ã«é–¢ã—ã¦ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ãŒè¡Œã‚ã‚Œãªã‹ã£ãŸå ´åˆã§ã‚‚æœ€ä½é™æ‹¾ã£ã¦ãã‚Œã¾ã™ã€‚ã—ã‹ã—ãªãŒã‚‰ protobuf ã¯ NON NULL æŒ‡å®šã‚’ã—ã¦ Unmarshal æ™‚ã«ã‚¨ãƒ©ãƒ¼ã‚’èµ·ã“ã™ã‚ˆã†ãªã“ã¨ãŒã§ããªã„ï¼ˆã¯ãšï¼Ÿãªã«ã‹è‰¯ã„æ–¹æ³•ãŒã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆãã ã•ã„ï¼‰ã®ã§å„è¨€èªå‘ã‘ã« protoc plugin ãŒåãå‡ºã™ getter ãªã©ã§è‡ªå‰ã§ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚Check handling between messages might be compatible :v1 -> v1.5id:1 created_at:<seconds:1528128844 nanos:914007623 > event_type:TWEET user_id:1 value:\"test tweet!\"v1.5 -> v1id:1 created_at:<seconds:1528128844 nanos:914007623 > event_type:TWEET user_id:1 value:\"test tweet!\"Check handling between messages might be NOT compatible :v1 -> v2id:1 event_at:<seconds:1528128844 nanos:914007623 > event_type:TYPE_TWEETv2 -> v1id:1 created_at:<seconds:1528128844 nanos:914007623 > user_id:1Anyprotobuf ã® Any å‹ã¯ message ã®å‹æƒ…å ±ã‚’ä»˜ä¸ã—ã¦ãã‚Œã‚‹ã®ã§ã€ Marshal ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã“ã‚Œã§ wrap ã—ã¦ã¿ã¾ã™ã€‚ã¾ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚‹å´ã§ã¯ Unmarshal å‰ã«å‹ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ã‚ˆã†ã«ã—ã¦ã¿ã¾ã™ã€‚å‹ãƒã‚§ãƒƒã‚¯ã¯ Go ã§ã¯ ptypes package ã® ptypes.Is() ã§è¡Œãˆã¾ã™ã€‚ã“ã‚Œã«åŸºã¥ãã€ v2 Event ã‚’ Unmarshal ã™ã‚‹éš›ã®å‹•ä½œã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚v2 ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ v1, v1.5 ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ Unmarshal ã—ã‚ˆã†ã¨ã—ãŸéš›ã« ptypes.Is() ã®ãƒã‚§ãƒƒã‚¯ãŒé€šã‚‰ãªããªã£ã¦ã„ã¾ã™ã€‚Check handling Any :type_url:\"type.googleapis.com/logging.v2.Event\" value:\"\\010\\001\\022\\014\\010\\314\\312\\325\\330\\005\\020\\307\\314\\352\\263\\003\\032\\014\\010\\314\\312\\325\\330\\005\\020\\307\\314\\352\\263\\003 \\001(\\0020\\0018\\002B\\013test tweet!\"Any is not loggingv1.EventAny is not loggingv1.RichEventid:1 event_at:<seconds:1528128844 nanos:914007623 > processed_at:<seconds:1528128844 nanos:914007623 > event_type:TYPE_TWEET event_source:SOURCE_PUBLIC_TIMELINE user_id:1 user_agent:UA_IOS value:\"test tweet!\"Any ã« wrap ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚ºå¢—åŠ å®Ÿé¨“ã«ç”¨ã„ãŸ v1 Event å‹ã§è¨€ã†ã¨ã€ãã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç›´æ¥ Marshal ã—ãŸå ´åˆã¨ Any ã§ wrap ã—ãŸå ´åˆã¨ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚µã‚¤ã‚ºå·®ãŒã‚ã‚Šã¾ã—ãŸã€‚å½“ç„¶ãªãŒã‚‰ Any ã ã¨å¤šå°‘ã‚µã‚¤ã‚ºãŒå¢—ãˆã¦ã„ã¾ã™ã€‚ãŒã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒå¤§ãã‘ã‚Œã°ç›¸å¯¾çš„ã«å¢—åŠ å…·åˆãŒç›®ç«‹ãŸãªããªã‚‹ãƒ¬ãƒ™ãƒ«ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚Check marshaled size w/ Any :len(v1bin) : 33len(v1anyBin) : 73protobuf ã®å‘¨è¾ºç’°å¢ƒå¤œã«å‡ºã¦ã„ã‚‹ protoc plugin ã‚’ä½¿ã£ã¦ã€ protobuf ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã‚’å‘¨è¾ºãƒ„ãƒ¼ãƒ«ã¨é€£æºã—ã¦è¡Œã†ãªã©å¼·åŠ›ãªé–‹ç™ºãƒ»ãƒ‡ãƒ¼ã‚¿åˆ†æç’°å¢ƒãŒæ§‹ç¯‰ã§ãã‚‹ã‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚https://github.com/pseudomuto/protoc-gen-docproto ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆhttps://github.com/GoogleCloudPlatform/protoc-gen-bq-schemaproto ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ BigQuery ã® schema ã‚’ç”Ÿæˆhttps://github.com/chrusty/protoc-gen-jsonschemaproto ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ JSON Schema ã‚’ç”ŸæˆãŠã‚ã‚Šã«protobuf ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã€ãªã‹ãªã‹è‰¯ã•ãã†ã«æ„Ÿã˜ã¾ã™ã€‚ç‰¹ã«ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µã‚¤ã‚ºãŒå¢—ãˆã‚‹ã“ã¨ãŒè¨±å®¹ã§ãã‚‹ãªã‚‰ï¼‰ Any å‹ã§åŒ…ã‚“ã§ã‚„ã‚Šå–ã‚Šã™ã‚‹ã¨å¿…è¦ãªéš›ã«ç°¡å˜ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ã“ã¨ãŒã§ãã€ä¾¿åˆ©ã ã¨æ€ã‚ã‚Œã¾ã™ã€‚ã¾ãŸ protoc plugin ã‚‚å¤šæ•°å­˜åœ¨ã—ã€å˜ã« protobuf ã‚’ç›´æ¥ä½¿ã†ä»¥å¤–ã«ã‚‚ä»–ã®ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã‚’ç”Ÿæˆã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãª DSL ã¨ã—ã¦ä½¿ã†ã®ã‚‚ã‚ã‚Šã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ï¼ˆJSON Schema ã¨ã‹ï¼‰ã€‚ã“ã®åˆ†é‡ã§ã¯ Apache Avro ã¨æ¯”è¼ƒã—ãŸæ¤œè¨¼ãŒã§ãã¦ã„ãªã„ã®ã§ã€ã©ã“ã‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã—ã¦ã¿ãŸã„æ°—æŒã¡ã‚‚ã‚ã‚Šã¾ã™ã€‚","link":"https://syucream.hatenablog.jp/entry/2018/06/05/022810","isoDate":"2018-06-04T17:28:10.000Z","dateMiliSeconds":1528133290000,"authorName":"syucream","authorId":"syucream"},{"title":"MySQL ã®ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã‹ã‚‰å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’æ¨æ¸¬ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸ","contentSnippet":"GW ä¸­ã®è‡ªåˆ†ã¸ã®ãƒ—ãƒèª²é¡Œã¨ã—ã¦ã€è¡¨é¡Œã®é€šã‚Šã®ãƒ„ãƒ¼ãƒ« hakagi(è‘‰éµ, Leaf and Key) ã‚’ä½œã‚Šã¾ã—ãŸã€‚ãƒ„ãƒ¼ãƒ«åã«ã¯ç‰¹ã«æ„å‘³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚github.comãƒ†ãƒ¼ãƒ–ãƒ«åã‚„ã‚«ãƒ©ãƒ åã‹ã‚‰å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’å¼µã‚Œã‚‹ã‚ˆã†ãªæ°—ãŒã™ã‚‹ã‚«ãƒ©ãƒ ã‚’é¸å‡ºã—ã€åˆ¶ç´„è¿½åŠ ã®ãŸã‚ã® ALTER TABLE ã‚’ã™ã‚‹ã‚¯ã‚¨ãƒªã‚’åãå‡ºã—ãŸã‚Šã—ã¾ã™ã€‚ãªãœä½œã£ãŸã®ã‹å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã¯è¨€ã†ã¾ã§ã‚‚ãªããƒ‡ãƒ¼ã‚¿ã®ä¸æ•´åˆã‚’é¿ã‘ã‚‹ã®ã«æœ‰ç”¨ã§ã™ãŒã€ã„ãã¤ã‹ã®ç†ç”±ã‹ã‚‰ã“ã‚Œã‚’ç”¨ã„ãªã„é¸æŠè‚¢ã‚‚å­˜åœ¨ã™ã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚ã“ã®è¾ºã‚Šã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ãªã©ã‚‚å‚è€ƒã«ã™ã‚‹ã¨è‰¯ã•ãã†ã§ã™ã€‚æˆ‘ã€…(ä¸»èªãŒå¤§ãã„)ã¯ä½•æ•…MySQLã§å¤–éƒ¨ã‚­ãƒ¼ã‚’ä½¿ã‚ãªã„ã®ã‹MySQLã§å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’èª²ã™ã¹ãã‹ - ãƒªã‚¸ã‚§ã‚¯ãƒˆã•ã‚Œã¾ã—ãŸå¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’è¨­ã‘ãªã„ã“ã¨ã«ã‚ˆã‚‹ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚‚å¹¾ã¤ã‹ç”Ÿã˜ã‚‹ã¨æ€ã£ã¦ã„ã¦ã€ãã®ä¸€ã¤ã§è‡ªåˆ†ãŒæ°—ã«ãªã£ã¦ã„ã‚‹ç‚¹ã¨ã—ã¦ã€ã€ŒER å›³ã‚’ãƒ„ãƒ¼ãƒ«ã§è‡ªå‹•ç”Ÿæˆã—ã«ãã„ã€ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã° MySQL Workbench ã¯ sql ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ç¨¼åƒã™ã‚‹ MySQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ ER å›³ã‚’è‡ªå‹•ç”Ÿæˆã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ã‚’æŒã¡ã¾ã™ãŒã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–“ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’ç„¡ãã™ã¨è¿½ãˆãªããªã‚Šã¾ã™ã€‚ã“ã®å•é¡Œã«å¯¾ã™ã‚‹ç·©å’Œç­–ã¨ã—ã¦ SchemaSpy ã‚’ç”¨ã„ã‚Œã°ä¸»ã‚­ãƒ¼ã‚’ãƒ™ãƒ¼ã‚¹ã«å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’æ¨æ¸¬ã—ã¦ ER å›³ç”Ÿæˆã‚’è¡Œã£ã¦ãã‚Œã¾ã™ã€‚ã—ã‹ã—ãªãŒã‚‰ã“ã®æ¨æ¸¬ã®ãƒ«ãƒ¼ãƒ«ã¯ã‚ã¾ã‚Šå°å›ã‚ŠãŒåŠ¹ãã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚SchemaSpy ã®ã‚„ã£ã¦ã„ã‚‹ã‚ˆã†ãªåˆ¶ç´„ã®æ¨æ¸¬ã‚’ã€å›³ã®è‡ªå‹•ç”Ÿæˆã¨ã¯åˆ†é›¢ã—ã¦ã‚·ãƒ³ãƒ—ãƒ«ã«æ‰±ã„ã€ã‹ã¤ãƒ«ãƒ¼ãƒ«ã‚’ç´°ã‹ãè¿½åŠ ã—ãŸã‚Š ON/OFF ã—ãŸã‚Šã—ãŸã„ã€‚ãã†è€ƒãˆä»Šå›ç´¹ä»‹ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚å®Ÿè£…ãªã©ãƒ¯ãƒ³ãƒã‚¤ãƒŠãƒªã§ã‚µã‚¯ãƒƒã¨å‹•ã‹ã—ãŸã„å¸Œæœ›ãŒã‚ã£ãŸãŸã‚ Go ã§æ›¸ã„ã¦ã„ã¾ã™ã€‚MySQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã‚„ä¸»ã‚­ãƒ¼ã®æƒ…å ±ã‚’é›†ã‚ã‚‹ãŸã‚ information_schema ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‚ç…§ã—ã€æ¨æ¸¬ã‚’è¡Œã£ã¦åˆ¶ç´„è¿½åŠ ã‚¯ã‚¨ãƒªã‚’æ¨™æº–å‡ºåŠ›ã«å‡ºã—ã¾ã™ã€‚ç¾åœ¨ã‚µãƒãƒ¼ãƒˆã™ã‚‹æ¨æ¸¬ãƒ«ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ã‚ã‚‹ã‚«ãƒ©ãƒ åã¨åŒã˜åå‰ã®ã€åˆ¥ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚«ãƒ©ãƒ ãŒå­˜åœ¨ã—ã€ã‹ã¤ãã‚ŒãŒ id ã¨ã„ã†åå‰ã§ã¯ãªããã®ãƒ†ãƒ¼ãƒ–ãƒ«ã§ä¸»ã‚­ãƒ¼ã§ã‚ã‚‹å ´åˆå¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’è¿½åŠ ã™ã‚‹ã‚ã‚‹ã‚«ãƒ©ãƒ åãŒ <åˆ¥ã®ãƒ†ãƒ¼ãƒ–ãƒ«åã®å˜æ•°å½¢>_id ã§ã‚ã‚Šã€ã‹ã¤åˆ¥ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã§ id ãŒä¸»ã‚­ãƒ¼ã§ã‚ã‚‹å ´åˆå¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’è¿½åŠ ã™ã‚‹æ¨™æº–å‡ºåŠ›ã«æœ€çµ‚çš„ã«åãå‡ºã™ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ã—ã¦ã¯ä»Šå¾Œã¯å¿…è¦ã§ã‚ã‚Œã° PlantUML ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã‚Šã—ã¦ã‚‚ã„ã„ã‹ã‚‚ã€ã¨è€ƒãˆã¦ãŠã‚Šã¾ã™ã€‚å‹•ä½œä¾‹ä»¥ä¸‹ã®ã‚ˆã†ãªã€å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ãŒå…¨ãè¨­ã‘ã‚‰ã‚Œã¦ã„ãªã„ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ãŒã‚ã£ãŸã¨ã—ã¾ã™ã€‚CREATE TABLE IF NOT EXISTS users (  id    INT UNSIGNED NOT NULL AUTO_INCREMENT,  name  VARCHAR(255) NOT NULL,  age   INT UNSIGNED NOT NULL,  email VARCHAR(255) NOT NULL,  PRIMARY KEY(id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;CREATE TABLE IF NOT EXISTS contents (  id    INT UNSIGNED NOT NULL AUTO_INCREMENT,  title VARCHAR(255) NOT NULL,  text  TEXT NOT NULL,  user_id INT UNSIGNED NOT NULL,  PRIMARY KEY(id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;CREATE TABLE IF NOT EXISTS content_comments (  content_comment_id INT UNSIGNED NOT NULL AUTO_INCREMENT,  text               TEXT NOT NULL,  content_id         INT UNSIGNED NOT NULL,  user_id            INT UNSIGNED NOT NULL,  PRIMARY KEY(content_comment_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;CREATE TABLE IF NOT EXISTS content_comment_reactions (  content_comment_id INT UNSIGNED NOT NULL,  user_id            INT UNSIGNED NOT NULL,  reaction_id        INT UNSIGNED NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8;CREATE TABLE IF NOT EXISTS reactions (  id        INT UNSIGNED NOT NULL AUTO_INCREMENT,  image_url VARCHAR(255) NOT NULL,  PRIMARY KEY(id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã« MySQL Workbench ã§ ER å›³ã‚’ç”Ÿæˆã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã«å¯¾ã— hakagi ã¯ã„ãã¤ã‹å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’è¿½åŠ ã™ã‚‹ã‚¯ã‚¨ãƒªã‚’åãå‡ºã—ã¦ãã‚Œã¾ã™ã€‚$ ./hakagi -dbuser root -targets hakagi_exampleALTER TABLE content_comment_reactions ADD CONSTRAINT FOREIGN KEY (content_comment_id) REFERENCES content_comments(content_comment_id);ALTER TABLE content_comment_reactions ADD CONSTRAINT FOREIGN KEY (user_id) REFERENCES users(id);ALTER TABLE content_comment_reactions ADD CONSTRAINT FOREIGN KEY (reaction_id) REFERENCES reactions(id);ALTER TABLE content_comments ADD CONSTRAINT FOREIGN KEY (content_id) REFERENCES contents(id);ALTER TABLE content_comments ADD CONSTRAINT FOREIGN KEY (user_id) REFERENCES users(id);ALTER TABLE contents ADD CONSTRAINT FOREIGN KEY (user_id) REFERENCES users(id);ã“ã®ã‚¯ã‚¨ãƒªã‚‚ç”¨ã„ã‚‹ã“ã¨ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãª ER å›³ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ãŠã‚ã‚Šã«ã¾ã å°‘ãªã„ã‚µãƒ³ãƒ—ãƒ«ã«å¯¾ã—ã¦å°‘ãªã„æ¨æ¸¬ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã—ã¦ã„ã‚‹ã ã‘ãªã®ã§ã€èª¤ã£ãŸæ¨æ¸¬çµæœãŒå‡ºãŸã‚Šæ¨æ¸¬ãŒè¶³ã‚Šãªã‹ã£ãŸã‚Šã™ã‚‹å ´é¢ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã‚’ç”¨ã„ã‚‹å ´é¢ãŒæ•°å¤šãã‚ã‚Œã°ã€ãã“ã§å‡ºã¦ããŸãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’å…ƒã«ãƒ„ãƒ¼ãƒ«ã‚’æ©Ÿèƒ½æ‹¡å¼µã—ã¦ã„ããŸã„ã¨ã“ã‚ã§ã™ã€‚","link":"https://syucream.hatenablog.jp/entry/2018/05/06/201257","isoDate":"2018-05-06T11:12:57.000Z","dateMiliSeconds":1525605177000,"authorName":"syucream","authorId":"syucream"},{"title":"æŠ€è¡“æ›¸å…¸4ã«ã‚µãƒ¼ã‚¯ãƒ«åã€Œã¾ã„ã«ã¡ãŒãã‚“ã‚ˆã†ã³ã€‚ã€ã§æš—å·é€šè²¨ã¨DNSã®æœ¬ã‚’é…å¸ƒã—ã¾ã™ã€€","contentSnippet":"ç›´å‰ã®ãŠçŸ¥ã‚‰ã›ã«ãªã‚Šã¾ã™ãŒã€ æŠ€è¡“æ›¸å…¸4 ã«ã€Œã¾ã„ã«ã¡ãŒãã‚“ã‚ˆã†ã³ã€‚ã€ã¨ã„ã†ã‚µãƒ¼ã‚¯ãƒ«åã§å‚åŠ ã—ã¦æŠ€è¡“ç³»è–„ã„æœ¬ã‚’é…å¸ƒã—ã¾ã™ï¼techbookfest.orgä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã«ãªã£ã¦ã„ã¾ã™ï¼åŸºç¤ã‹ã‚‰èª¬æ˜ã™ã‚‹æš—å·é€šè²¨ @lunatic_starä»Šæ—¥ã‹ã‚‰å§‹ã‚ã‚‹ IOTA @syu_creamã‚¨ãƒ³ã‚·ã‚™ãƒ‹ã‚¢ã®ãŸã‚ã® DNS(å†)å…¥é–€(åˆç´šè€…ç·¨) @m_birdã‚¨ãƒ³ã‚·ã‚™ãƒ‹ã‚¢ã®ãŸã‚ã® DNS(å†)å…¥é–€(ä¸­ç´šè€…ç·¨) @kdmn(è¡¨ç´™ã‚¤ãƒ©ã‚¹ãƒˆ @fuga_romantica )é…å¸ƒéƒ¨æ•°ã¯ 50 ç¨‹åº¦ã«ãªã‚‹äºˆå®šã§ã™ã€‚ã¾ãŸè²©å£²ä¾¡æ ¼ã¯ä¸€å†Š 500 å††ã‚’äºˆå®šã—ã¦ã„ã¾ã™ã€‚é›»å­æ›¸ç±ã§ã®è²©å£²ã‚‚äºˆå®šã—ã¦ã„ã‚‹ãŸã‚ã€ã‚‚ã—å£²ã‚Šåˆ‡ã‚Œã‚‹ã‚ˆã†ãªã“ã¨ãŒã‚ã‚Œã°ï¼ˆã‚ã‚‹ã®ã‹ãª...ï¼‰ãã¡ã‚‰ã‚’ã”æ¤œè¨é ‚ã‘ã‚Œã°å¹¸ã„ã§ã™ã€‚ãœã²å½“æ—¥ã€ä¼šå ´ã«ã¦ãŠä¼šã„å‡ºæ¥ã‚Œã°å¬‰ã—ã„ã§ã™ï¼ï¼ï¼","link":"https://syucream.hatenablog.jp/entry/2018/04/18/214622","isoDate":"2018-04-18T12:46:22.000Z","dateMiliSeconds":1524055582000,"authorName":"syucream","authorId":"syucream"}]},"__N_SSG":true}